<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>utils/twitterAgent.js - MultiBrowseAutomation Docs</title>
    
    <meta name="description" content="Documentation for the Multi-Browser Automation Framework" />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/your-repo-here" target="_blank" >GitHub Repo</a></h2><h3>Classes</h3><ul><li><a href="ActionOrchestrator.html">ActionOrchestrator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="ActionOrchestrator.html#getConstraintBlockedRoutines">getConstraintBlockedRoutines</a></li><li data-type='method' style='display: none;'><a href="ActionOrchestrator.html#getNext">getNext</a></li><li data-type='method' style='display: none;'><a href="ActionOrchestrator.html#getNextRoutine">getNextRoutine</a></li><li data-type='method' style='display: none;'><a href="ActionOrchestrator.html#record">record</a></li><li data-type='method' style='display: none;'><a href="ActionOrchestrator.html#reset">reset</a></li></ul></li><li><a href="module-connectors_baseDiscover-BaseDiscover.html">BaseDiscover</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-connectors_baseDiscover-BaseDiscover.html#discover">discover</a></li></ul></li><li><a href="module-connectors_discovery_ixbrowser-IxbrowserDiscover.html">IxbrowserDiscover</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-connectors_discovery_ixbrowser-IxbrowserDiscover.html#discover">discover</a></li></ul></li><li><a href="module-connectors_discovery_localBrave-LocalBraveDiscover.html">LocalBraveDiscover</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-connectors_discovery_localBrave-LocalBraveDiscover.html#discover">discover</a></li></ul></li><li><a href="module-connectors_discovery_roxybrowser-RoxybrowserDiscover.html">RoxybrowserDiscover</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-connectors_discovery_roxybrowser-RoxybrowserDiscover.html#discover">discover</a></li></ul></li><li><a href="module-connectors_discovery_undetectable-UndetectableDiscover.html">UndetectableDiscover</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-connectors_discovery_undetectable-UndetectableDiscover.html#discover">discover</a></li></ul></li><li><a href="module-core_agent-connector-AgentConnector.html">AgentConnector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_agent-connector-AgentConnector.html#getHealth">getHealth</a></li><li data-type='method' style='display: none;'><a href="module-core_agent-connector-AgentConnector.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-core_agent-connector-AgentConnector.html#handleGenerateReply">handleGenerateReply</a></li><li data-type='method' style='display: none;'><a href="module-core_agent-connector-AgentConnector.html#handleVisionRequest">handleVisionRequest</a></li><li data-type='method' style='display: none;'><a href="module-core_agent-connector-AgentConnector.html#logHealth">logHealth</a></li><li data-type='method' style='display: none;'><a href="module-core_agent-connector-AgentConnector.html#processRequest">processRequest</a></li></ul></li><li><a href="module-core_audit-verifier-AuditVerifier.html">AuditVerifier</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_audit-verifier-AuditVerifier.html#calculateReliabilityMetric">calculateReliabilityMetric</a></li><li data-type='method' style='display: none;'><a href="module-core_audit-verifier-AuditVerifier.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-core_audit-verifier-AuditVerifier.html#logStats">logStats</a></li><li data-type='method' style='display: none;'><a href="module-core_audit-verifier-AuditVerifier.html#postFlightCheck">postFlightCheck</a></li><li data-type='method' style='display: none;'><a href="module-core_audit-verifier-AuditVerifier.html#preFlightCheck">preFlightCheck</a></li><li data-type='method' style='display: none;'><a href="module-core_audit-verifier-AuditVerifier.html#resetStats">resetStats</a></li><li data-type='method' style='display: none;'><a href="module-core_audit-verifier-AuditVerifier.html#waitForState">waitForState</a></li></ul></li><li><a href="module-core_automator-Automator.html">Automator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#checkConnectionHealth">checkConnectionHealth</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#checkNetworkConnectivity">checkNetworkConnectivity</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#checkPageResponsive">checkPageResponsive</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#closeAll">closeAll</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#connectToBrowser">connectToBrowser</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#getBrowser">getBrowser</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#getConnectedEndpoints">getConnectedEndpoints</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#getConnectionCount">getConnectionCount</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#getHealthSummary">getHealthSummary</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#getHealthyConnectionCount">getHealthyConnectionCount</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#isHealthy">isHealthy</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#reconnect">reconnect</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#recoverConnection">recoverConnection</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#shutdown">shutdown</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#startHealthChecks">startHealthChecks</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#stopHealthChecks">stopHealthChecks</a></li><li data-type='method' style='display: none;'><a href="module-core_automator-Automator.html#testConnection">testConnection</a></li></ul></li><li><a href="module-core_circuit-breaker-CircuitBreaker.html">CircuitBreaker</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_circuit-breaker-CircuitBreaker.html#execute">execute</a></li><li data-type='method' style='display: none;'><a href="module-core_circuit-breaker-CircuitBreaker.html#forceClose">forceClose</a></li><li data-type='method' style='display: none;'><a href="module-core_circuit-breaker-CircuitBreaker.html#forceOpen">forceOpen</a></li><li data-type='method' style='display: none;'><a href="module-core_circuit-breaker-CircuitBreaker.html#getAllStatus">getAllStatus</a></li><li data-type='method' style='display: none;'><a href="module-core_circuit-breaker-CircuitBreaker.html#getBreaker">getBreaker</a></li><li data-type='method' style='display: none;'><a href="module-core_circuit-breaker-CircuitBreaker.html#getHealth">getHealth</a></li><li data-type='method' style='display: none;'><a href="module-core_circuit-breaker-CircuitBreaker.html#reset">reset</a></li><li data-type='method' style='display: none;'><a href="module-core_circuit-breaker-CircuitBreaker.html#resetAll">resetAll</a></li></ul></li><li><a href="module-core_cloud-client-CloudClient.html">CloudClient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_cloud-client-CloudClient.html#getMultiClient">getMultiClient</a></li><li data-type='method' style='display: none;'><a href="module-core_cloud-client-CloudClient.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-core_cloud-client-CloudClient.html#resetStats">resetStats</a></li><li data-type='method' style='display: none;'><a href="module-core_cloud-client-CloudClient.html#sendRequest">sendRequest</a></li><li data-type='method' style='display: none;'><a href="module-core_cloud-client-CloudClient.html#testConnection">testConnection</a></li><li data-type='method' style='display: none;'><a href="module-core_cloud-client-CloudClient.html#testFreeModels">testFreeModels</a></li></ul></li><li><a href="module-core_discovery-Discovery.html">Discovery</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_discovery-Discovery.html#discoverBrowsers">discoverBrowsers</a></li><li data-type='method' style='display: none;'><a href="module-core_discovery-Discovery.html#getConnectorInfo">getConnectorInfo</a></li><li data-type='method' style='display: none;'><a href="module-core_discovery-Discovery.html#loadConnectors">loadConnectors</a></li></ul></li><li><a href="module-core_history-compactor-HistoryCompactor.html">HistoryCompactor</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_history-compactor-HistoryCompactor.html#compactHistory">compactHistory</a></li><li data-type='method' style='display: none;'><a href="module-core_history-compactor-HistoryCompactor.html#generateNarrativeSummary">generateNarrativeSummary</a></li><li data-type='method' style='display: none;'><a href="module-core_history-compactor-HistoryCompactor.html#getStats">getStats</a></li></ul></li><li><a href="module-core_humanizer-engine-HumanizerEngine.html">HumanizerEngine</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_humanizer-engine-HumanizerEngine.html#_easeOutCubic">_easeOutCubic</a></li><li data-type='method' style='display: none;'><a href="module-core_humanizer-engine-HumanizerEngine.html#_generateComputedPath">_generateComputedPath</a></li><li data-type='method' style='display: none;'><a href="module-core_humanizer-engine-HumanizerEngine.html#generateKeystrokeTiming">generateKeystrokeTiming</a></li><li data-type='method' style='display: none;'><a href="module-core_humanizer-engine-HumanizerEngine.html#generateMousePath">generateMousePath</a></li><li data-type='method' style='display: none;'><a href="module-core_humanizer-engine-HumanizerEngine.html#generatePause">generatePause</a></li></ul></li><li><a href="module-core_idle-ghosting-IdleGhosting.html">IdleGhosting</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_idle-ghosting-IdleGhosting.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-core_idle-ghosting-IdleGhosting.html#isGhosting">isGhosting</a></li><li data-type='method' style='display: none;'><a href="module-core_idle-ghosting-IdleGhosting.html#setWiggleParams">setWiggleParams</a></li><li data-type='method' style='display: none;'><a href="module-core_idle-ghosting-IdleGhosting.html#start">start</a></li><li data-type='method' style='display: none;'><a href="module-core_idle-ghosting-IdleGhosting.html#stop">stop</a></li></ul></li><li><a href="module-core_intent-classifier-IntentClassifier.html">IntentClassifier</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_intent-classifier-IntentClassifier.html#classify">classify</a></li><li data-type='method' style='display: none;'><a href="module-core_intent-classifier-IntentClassifier.html#forceCloud">forceCloud</a></li><li data-type='method' style='display: none;'><a href="module-core_intent-classifier-IntentClassifier.html#forceLocal">forceLocal</a></li><li data-type='method' style='display: none;'><a href="module-core_intent-classifier-IntentClassifier.html#getStats">getStats</a></li></ul></li><li><a href="module-core_local-client-LocalClient.html">LocalClient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_local-client-LocalClient.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-core_local-client-LocalClient.html#resetStats">resetStats</a></li><li data-type='method' style='display: none;'><a href="module-core_local-client-LocalClient.html#sendRequest">sendRequest</a></li></ul></li><li><a href="module-core_ollama-client-OllamaClient.html">OllamaClient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_ollama-client-OllamaClient.html#_chatRequest">_chatRequest</a></li><li data-type='method' style='display: none;'><a href="module-core_ollama-client-OllamaClient.html#_generateRequest">_generateRequest</a></li><li data-type='method' style='display: none;'><a href="module-core_ollama-client-OllamaClient.html#_warmupModel">_warmupModel</a></li><li data-type='method' style='display: none;'><a href="module-core_ollama-client-OllamaClient.html#applyHumanization">applyHumanization</a></li><li data-type='method' style='display: none;'><a href="module-core_ollama-client-OllamaClient.html#applyTypos">applyTypos</a></li><li data-type='method' style='display: none;'><a href="module-core_ollama-client-OllamaClient.html#generate">generate</a></li><li data-type='method' style='display: none;'><a href="module-core_ollama-client-OllamaClient.html#initialize">initialize</a></li><li data-type='method' style='display: none;'><a href="module-core_ollama-client-OllamaClient.html#isReady">isReady</a></li></ul></li><li><a href="module-core_orchestrator-Orchestrator.html">Orchestrator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_orchestrator-Orchestrator.html#_sleep">_sleep</a></li><li data-type='method' style='display: none;'><a href="module-core_orchestrator-Orchestrator.html#addTask">addTask</a></li><li data-type='method' style='display: none;'><a href="module-core_orchestrator-Orchestrator.html#getMetrics">getMetrics</a></li><li data-type='method' style='display: none;'><a href="module-core_orchestrator-Orchestrator.html#getRecentTasks">getRecentTasks</a></li><li data-type='method' style='display: none;'><a href="module-core_orchestrator-Orchestrator.html#getTaskBreakdown">getTaskBreakdown</a></li><li data-type='method' style='display: none;'><a href="module-core_orchestrator-Orchestrator.html#logMetrics">logMetrics</a></li><li data-type='method' style='display: none;'><a href="module-core_orchestrator-Orchestrator.html#processTasks">processTasks</a></li><li data-type='method' style='display: none;'><a href="module-core_orchestrator-Orchestrator.html#shutdown">shutdown</a></li><li data-type='method' style='display: none;'><a href="module-core_orchestrator-Orchestrator.html#startDiscovery">startDiscovery</a></li><li data-type='method' style='display: none;'><a href="module-core_orchestrator-Orchestrator.html#waitForTasksToComplete">waitForTasksToComplete</a></li></ul></li><li><a href="module-core_prompt-builder-PromptBuilder.html">PromptBuilder</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_prompt-builder-PromptBuilder.html#build">build</a></li></ul></li><li><a href="module-core_request-queue-RequestQueue.html">RequestQueue</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_request-queue-RequestQueue.html#clear">clear</a></li><li data-type='method' style='display: none;'><a href="module-core_request-queue-RequestQueue.html#enqueue">enqueue</a></li><li data-type='method' style='display: none;'><a href="module-core_request-queue-RequestQueue.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-core_request-queue-RequestQueue.html#pause">pause</a></li><li data-type='method' style='display: none;'><a href="module-core_request-queue-RequestQueue.html#resume">resume</a></li></ul></li><li><a href="module-core_semantic-parser-SemanticParser.html">SemanticParser</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_semantic-parser-SemanticParser.html#extractSemanticTree">extractSemanticTree</a></li><li data-type='method' style='display: none;'><a href="module-core_semantic-parser-SemanticParser.html#findElementByName">findElementByName</a></li><li data-type='method' style='display: none;'><a href="module-core_semantic-parser-SemanticParser.html#generateCompactRepresentation">generateCompactRepresentation</a></li><li data-type='method' style='display: none;'><a href="module-core_semantic-parser-SemanticParser.html#getTreeStats">getTreeStats</a></li></ul></li><li><a href="module-core_sessionManager-SessionManager.html">SessionManager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#addSession">addSession</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#cleanupTimedOutSessions">cleanupTimedOutSessions</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#findAndOccupyIdleWorker">findAndOccupyIdleWorker</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#getAllSessions">getAllSessions</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#getSessionMetadata">getSessionMetadata</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#getStuckWorkers">getStuckWorkers</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#getWorkerOccupancy">getWorkerOccupancy</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#loadSessionState">loadSessionState</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#registerPage">registerPage</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#releaseWorker">releaseWorker</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#removeSession">removeSession</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#saveSessionState">saveSessionState</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#shutdown">shutdown</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#stopCleanupTimer">stopCleanupTimer</a></li><li data-type='method' style='display: none;'><a href="module-core_sessionManager-SessionManager.html#unregisterPage">unregisterPage</a></li></ul></li><li><a href="module-core_state-manager-StateManager.html">StateManager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_state-manager-StateManager.html#addBreadcrumb">addBreadcrumb</a></li><li data-type='method' style='display: none;'><a href="module-core_state-manager-StateManager.html#calculateComplexityScore">calculateComplexityScore</a></li><li data-type='method' style='display: none;'><a href="module-core_state-manager-StateManager.html#clearSession">clearSession</a></li><li data-type='method' style='display: none;'><a href="module-core_state-manager-StateManager.html#getBreadcrumbSummary">getBreadcrumbSummary</a></li><li data-type='method' style='display: none;'><a href="module-core_state-manager-StateManager.html#getBreadcrumbs">getBreadcrumbs</a></li><li data-type='method' style='display: none;'><a href="module-core_state-manager-StateManager.html#getExecutionState">getExecutionState</a></li><li data-type='method' style='display: none;'><a href="module-core_state-manager-StateManager.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-core_state-manager-StateManager.html#shutdown">shutdown</a></li><li data-type='method' style='display: none;'><a href="module-core_state-manager-StateManager.html#updateExecutionState">updateExecutionState</a></li></ul></li><li><a href="module-core_stuck-detector-StuckDetector.html">StuckDetector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_stuck-detector-StuckDetector.html#check">check</a></li><li data-type='method' style='display: none;'><a href="module-core_stuck-detector-StuckDetector.html#reset">reset</a></li></ul></li><li><a href="module-core_vision-interpreter-VisionInterpreter.html">VisionInterpreter</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_vision-interpreter-VisionInterpreter.html#buildPrompt">buildPrompt</a></li><li data-type='method' style='display: none;'><a href="module-core_vision-interpreter-VisionInterpreter.html#parseResponse">parseResponse</a></li></ul></li><li><a href="module-core_vision-packager-VisionPackager.html">VisionPackager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_vision-packager-VisionPackager.html#captureScreenshot">captureScreenshot</a></li><li data-type='method' style='display: none;'><a href="module-core_vision-packager-VisionPackager.html#captureWithROI">captureWithROI</a></li><li data-type='method' style='display: none;'><a href="module-core_vision-packager-VisionPackager.html#cleanupOldScreenshots">cleanupOldScreenshots</a></li><li data-type='method' style='display: none;'><a href="module-core_vision-packager-VisionPackager.html#compressScreenshot">compressScreenshot</a></li><li data-type='method' style='display: none;'><a href="module-core_vision-packager-VisionPackager.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-core_vision-packager-VisionPackager.html#identifyROI">identifyROI</a></li></ul></li><li><a href="module-core_vllm-client-VLLMClient.html">VLLMClient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-core_vllm-client-VLLMClient.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-core_vllm-client-VLLMClient.html#resetStats">resetStats</a></li><li data-type='method' style='display: none;'><a href="module-core_vllm-client-VLLMClient.html#sendRequest">sendRequest</a></li><li data-type='method' style='display: none;'><a href="module-core_vllm-client-VLLMClient.html#testConnection">testConnection</a></li></ul></li><li><a href="module-utils_actions.ActionRunner.html">ActionRunner</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_actions.ActionRunner.html#calculateSmartProbabilities">calculateSmartProbabilities</a></li><li data-type='method' style='display: none;'><a href="module-utils_actions.ActionRunner.html#executeAction">executeAction</a></li><li data-type='method' style='display: none;'><a href="module-utils_actions.ActionRunner.html#getEngagementType">getEngagementType</a></li><li data-type='method' style='display: none;'><a href="module-utils_actions.ActionRunner.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-utils_actions.ActionRunner.html#isActionAvailable">isActionAvailable</a></li><li data-type='method' style='display: none;'><a href="module-utils_actions.ActionRunner.html#selectAction">selectAction</a></li><li data-type='method' style='display: none;'><a href="module-utils_actions.ActionRunner.html#tryExecute">tryExecute</a></li></ul></li><li><a href="module-utils_apiHandler-ApiHandler.html">ApiHandler</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_apiHandler-ApiHandler.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="module-utils_apiHandler-ApiHandler.html#get">get</a></li><li data-type='method' style='display: none;'><a href="module-utils_apiHandler-ApiHandler.html#post">post</a></li><li data-type='method' style='display: none;'><a href="module-utils_apiHandler-ApiHandler.html#put">put</a></li><li data-type='method' style='display: none;'><a href="module-utils_apiHandler-ApiHandler.html#request">request</a></li></ul></li><li><a href="module-utils_async-queue.DiveQueue.html">DiveQueue</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_async-queue.DiveQueue.html#addDive">addDive</a></li><li data-type='method' style='display: none;'><a href="module-utils_async-queue.DiveQueue.html#canEngage">canEngage</a></li><li data-type='method' style='display: none;'><a href="module-utils_async-queue.DiveQueue.html#disableQuickMode">disableQuickMode</a></li><li data-type='method' style='display: none;'><a href="module-utils_async-queue.DiveQueue.html#enableQuickMode">enableQuickMode</a></li><li data-type='method' style='display: none;'><a href="module-utils_async-queue.DiveQueue.html#getEngagementProgress">getEngagementProgress</a></li><li data-type='method' style='display: none;'><a href="module-utils_async-queue.DiveQueue.html#getFullStatus">getFullStatus</a></li><li data-type='method' style='display: none;'><a href="module-utils_async-queue.DiveQueue.html#recordEngagement">recordEngagement</a></li><li data-type='method' style='display: none;'><a href="module-utils_async-queue.DiveQueue.html#resetEngagement">resetEngagement</a></li><li data-type='method' style='display: none;'><a href="module-utils_async-queue.DiveQueue.html#updateEngagementLimits">updateEngagementLimits</a></li><li data-type='method' style='display: none;'><a href="module-utils_async-queue.DiveQueue.html#updateEngagementLimits">updateEngagementLimits</a></li></ul></li><li><a href="module-utils_config-cache.ConfigCache.html">ConfigCache</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#cleanExpired">cleanExpired</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#clear">clear</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#get">get</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#getEntries">getEntries</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#getMemoryUsage">getMemoryUsage</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#has">has</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#set">set</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#updateMaxSize">updateMaxSize</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-cache.ConfigCache.html#updateTTL">updateTTL</a></li></ul></li><li><a href="module-utils_config-service-ConfigService.html">ConfigService</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_config-service-ConfigService.html#_getWithDefaults">_getWithDefaults</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-service-ConfigService.html#ensureInit">ensureInit</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-service-ConfigService.html#get">get</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-service-ConfigService.html#getProfileConfig">getProfileConfig</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-service-ConfigService.html#getSettings">getSettings</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-service-ConfigService.html#init">init</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-service-ConfigService.html#reload">reload</a></li></ul></li><li><a href="module-utils_config-validator.ConfigValidator.html">ConfigValidator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_config-validator.ConfigValidator.html#getSchema">getSchema</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-validator.ConfigValidator.html#validateConfig">validateConfig</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-validator.ConfigValidator.html#validateSectionConfig">validateSectionConfig</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-validator.ConfigValidator.html#validateWithReport">validateWithReport</a></li></ul></li><li><a href="module-utils_configLoader-ConfigLoader.html">ConfigLoader</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_configLoader-ConfigLoader.html#clearCache">clearCache</a></li><li data-type='method' style='display: none;'><a href="module-utils_configLoader-ConfigLoader.html#getValue">getValue</a></li><li data-type='method' style='display: none;'><a href="module-utils_configLoader-ConfigLoader.html#loadConfig">loadConfig</a></li><li data-type='method' style='display: none;'><a href="module-utils_configLoader-ConfigLoader.html#reloadConfig">reloadConfig</a></li><li data-type='method' style='display: none;'><a href="module-utils_configLoader-ConfigLoader.html#validateConfig">validateConfig</a></li></ul></li><li><a href="module-utils_entropyController-EntropyController.html">EntropyController</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#applyFatigueToTiming">applyFatigueToTiming</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#calculateFatigueLevel">calculateFatigueLevel</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#checkFatigue">checkFatigue</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#gaussian">gaussian</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#generateSessionProfile">generateSessionProfile</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#getFatigueModifiers">getFatigueModifiers</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#getSessionStats">getSessionStats</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#interActionGap">interActionGap</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#logAction">logAction</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#logNormal">logNormal</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#microBreakDuration">microBreakDuration</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#pageLoadWait">pageLoadWait</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#poisson">poisson</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#postClickDelay">postClickDelay</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#preDecisionDelay">preDecisionDelay</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#reactionTime">reactionTime</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#readingTime">readingTime</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#resetSession">resetSession</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#retryDelay">retryDelay</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#scrollDistance">scrollDistance</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#scrollSettleTime">scrollSettleTime</a></li><li data-type='method' style='display: none;'><a href="module-utils_entropyController-EntropyController.html#shouldMicroBreak">shouldMicroBreak</a></li></ul></li><li><a href="module-utils_environment-config.EnvironmentConfig.html">EnvironmentConfig</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#generateDocumentation">generateDocumentation</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#getConfigPath">getConfigPath</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#getCurrentEnvValues">getCurrentEnvValues</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#getEnvOverrides">getEnvOverrides</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#getSupportedEnvVars">getSupportedEnvVars</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#isSupportedEnvVar">isSupportedEnvVar</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#validateEnvValues">validateEnvValues</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#.applyEnvOverrides">applyEnvOverrides</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#.getNestedValue">getNestedValue</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#.logAppliedOverrides">logAppliedOverrides</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#.parseEnvValue">parseEnvValue</a></li><li data-type='method' style='display: none;'><a href="module-utils_environment-config.EnvironmentConfig.html#.setNestedValue">setNestedValue</a></li></ul></li><li><a href="module-utils_errors.AppError.html">AppError</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_errors.AppError.html#toJSON">toJSON</a></li><li data-type='method' style='display: none;'><a href="module-utils_errors.AppError.html#toString">toString</a></li></ul></li><li><a href="module-utils_errors.BrowserError.html">BrowserError</a></li><li><a href="module-utils_errors.CircuitBreakerError.html">CircuitBreakerError</a></li><li><a href="module-utils_errors.ConfigError.html">ConfigError</a></li><li><a href="module-utils_errors.ModelError.html">ModelError</a></li><li><a href="module-utils_errors.ProxyError.html">ProxyError</a></li><li><a href="module-utils_errors.RateLimitError.html">RateLimitError</a></li><li><a href="module-utils_errors.RouterError.html">RouterError</a></li><li><a href="module-utils_errors.TimeoutError.html">TimeoutError</a></li><li><a href="module-utils_errors.ValidationError.html">ValidationError</a></li><li><a href="module-utils_global-scroll-controller-GlobalScrollController.html">GlobalScrollController</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#apply">apply</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#applyRandom">applyRandom</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#getMultiplier">getMultiplier</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#init">init</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#reload">reload</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#scrollBy">scrollBy</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#scrollDown">scrollDown</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#scrollRandom">scrollRandom</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#scrollReplies">scrollReplies</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#scrollToBottom">scrollToBottom</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#scrollToElement">scrollToElement</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#scrollToTop">scrollToTop</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#scrollUp">scrollUp</a></li><li data-type='method' style='display: none;'><a href="module-utils_global-scroll-controller-GlobalScrollController.html#smoothScroll">smoothScroll</a></li></ul></li><li><a href="module-utils_logger-BufferedLogger.html">BufferedLogger</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#_add">_add</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#_startTimer">_startTimer</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#_stopTimer">_stopTimer</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#clear">clear</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#debug">debug</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#error">error</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#flush">flush</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#info">info</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#shutdown">shutdown</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#success">success</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-BufferedLogger.html#warn">warn</a></li></ul></li><li></li><li><a href="module-utils_logger-Logger.html">Logger</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_logger-Logger.html#_log">_log</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-Logger.html#colorizeTags">colorizeTags</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-Logger.html#debug">debug</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-Logger.html#error">error</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-Logger.html#info">info</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-Logger.html#success">success</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger-Logger.html#warn">warn</a></li></ul></li><li><a href="module-utils_metrics-MetricsCollector.html">MetricsCollector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#exportToJSON">exportToJSON</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#generateJsonReport">generateJsonReport</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#getAvgAILatency">getAvgAILatency</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#getAvgDiveDuration">getAvgDiveDuration</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#getRecentTasks">getRecentTasks</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#getTaskBreakdown">getTaskBreakdown</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#getTwitterEngagementMetrics">getTwitterEngagementMetrics</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#logStats">logStats</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#recordAILatency">recordAILatency</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#recordApiCall">recordApiCall</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#recordBrowserDiscovery">recordBrowserDiscovery</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#recordDiveDuration">recordDiveDuration</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#recordError">recordError</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#recordSessionEvent">recordSessionEvent</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#recordSocialAction">recordSocialAction</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#recordTaskExecution">recordTaskExecution</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#recordTwitterEngagement">recordTwitterEngagement</a></li><li data-type='method' style='display: none;'><a href="module-utils_metrics-MetricsCollector.html#reset">reset</a></li></ul></li><li><a href="module-utils_sentiment-integration.SentimentIntegration.html">SentimentIntegration</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_sentiment-integration.SentimentIntegration.html#checkEngagementAction">checkEngagementAction</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-integration.SentimentIntegration.html#enrichContext">enrichContext</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-integration.SentimentIntegration.html#export">export</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-integration.SentimentIntegration.html#getReplyToneAdaptation">getReplyToneAdaptation</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-integration.SentimentIntegration.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-integration.SentimentIntegration.html#setEnabled">setEnabled</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-integration.SentimentIntegration.html#setPersonality">setPersonality</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-integration.SentimentIntegration.html#shouldQuoteCheck">shouldQuoteCheck</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-integration.SentimentIntegration.html#shouldReplyCheck">shouldReplyCheck</a></li></ul></li><li><a href="module-utils_sentiment-service.SentimentService.html">SentimentService</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_sentiment-service.SentimentService.html#analyze">analyze</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-service.SentimentService.html#analyzeBasic">analyzeBasic</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-service.SentimentService.html#analyzeForReplySelection">analyzeForReplySelection</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-service.SentimentService.html#calculateConfidence">calculateConfidence</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-service.SentimentService.html#deriveCompositeMetrics">deriveCompositeMetrics</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-service.SentimentService.html#getEngagementRecommendations">getEngagementRecommendations</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-service.SentimentService.html#getFromCache">getFromCache</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-service.SentimentService.html#getNeutralAnalysis">getNeutralAnalysis</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-service.SentimentService.html#getReplyRecommendations">getReplyRecommendations</a></li><li data-type='method' style='display: none;'><a href="module-utils_sentiment-service.SentimentService.html#hasNegativePattern">hasNegativePattern</a></li></ul></li><li><a href="module-utils_task-config-loader.TaskConfigLoader.html">TaskConfigLoader</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_task-config-loader.TaskConfigLoader.html#clearCache">clearCache</a></li><li data-type='method' style='display: none;'><a href="module-utils_task-config-loader.TaskConfigLoader.html#getStats">getStats</a></li><li data-type='method' style='display: none;'><a href="module-utils_task-config-loader.TaskConfigLoader.html#loadAiTwitterActivityConfig">loadAiTwitterActivityConfig</a></li></ul></li><li><a href="utils_config-manager%250D%250DThis%2520is%2520a%2520NEW%2520module%2520for%2520Phase%25202%2520improvements.%2520It%2520does%2520not%2520replace%2520existing%2520config%2520loaders%250Dbut%2520provides%2520a%2520more%2520robust%2520alternative%2520for%2520new%2520code.module_-ConfigManager.html">ConfigManager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#clearCache">clearCache</a></li><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#get">get</a></li><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#getCacheStats">getCacheStats</a></li><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#getSources">getSources</a></li><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#getWithMeta">getWithMeta</a></li><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#has">has</a></li><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#init">init</a></li><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#keys">keys</a></li><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#reload">reload</a></li><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#set">set</a></li><li data-type='method' style='display: none;'><a href="utils_config-manager%25250D%25250DThis%252520is%252520a%252520NEW%252520module%252520for%252520Phase%2525202%252520improvements.%252520It%252520does%252520not%252520replace%252520existing%252520config%252520loaders%25250Dbut%252520provides%252520a%252520more%252520robust%252520alternative%252520for%252520new%252520code.module_-ConfigManager.html#toJSON">toJSON</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-connectors_baseDiscover.html">connectors/baseDiscover</a></li><li><a href="module-connectors_discovery_ixbrowser.html">connectors/discovery/ixbrowser</a></li><li><a href="module-connectors_discovery_localBrave.html">connectors/discovery/localBrave</a></li><li><a href="module-connectors_discovery_roxybrowser.html">connectors/discovery/roxybrowser</a></li><li><a href="module-connectors_discovery_undetectable.html">connectors/discovery/undetectable</a></li><li><a href="module-constants_twitter-timeouts.html">constants/twitter-timeouts</a></li><li><a href="module-core_agent-connector.html">core/agent-connector</a></li><li><a href="module-core_agent-cortex.html">core/agent-cortex</a></li><li><a href="module-core_audit-verifier.html">core/audit-verifier</a></li><li><a href="module-core_automator.html">core/automator</a></li><li><a href="module-core_circuit-breaker.html">core/circuit-breaker</a></li><li><a href="module-core_cloud-client.html">core/cloud-client</a></li><li><a href="module-core_discovery.html">core/discovery</a></li><li><a href="module-core_history-compactor.html">core/history-compactor</a></li><li><a href="module-core_humanizer-engine.html">core/humanizer-engine</a></li><li><a href="module-core_idle-ghosting.html">core/idle-ghosting</a></li><li><a href="module-core_intent-classifier.html">core/intent-classifier</a></li><li><a href="module-core_local-client.html">core/local-client</a></li><li><a href="module-core_ollama-client.html">core/ollama-client</a></li><li><a href="module-core_orchestrator.html">core/orchestrator</a></li><li><a href="module-core_prompt-builder.html">core/prompt-builder</a></li><li><a href="module-core_request-queue.html">core/request-queue</a></li><li><a href="module-core_semantic-parser.html">core/semantic-parser</a></li><li><a href="module-core_sessionManager.html">core/sessionManager</a></li><li><a href="module-core_state-manager.html">core/state-manager</a></li><li><a href="module-core_stuck-detector.html">core/stuck-detector</a></li><li><a href="module-core_vision-interpreter.html">core/vision-interpreter</a></li><li><a href="module-core_vision-packager.html">core/vision-packager</a></li><li><a href="module-core_vision_image-storage.html">core/vision/image-storage</a></li><li><a href="module-core_vision_roi-detector.html">core/vision/roi-detector</a></li><li><a href="module-core_vllm-client.html">core/vllm-client</a></li><li><a href="module-examples_simpleNavigate.html">examples/simpleNavigate</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-examples_simpleNavigate.html#~simpleNavigate">simpleNavigate</a></li></ul></li><li><a href="module-local-agent_core_actionEngine.html">local-agent/core/actionEngine</a></li><li><a href="module-local-agent_core_agent.html">local-agent/core/agent</a></li><li><a href="module-local-agent_core_vision.html">local-agent/core/vision</a></li><li><a href="module-local-agent_network_llmClient.html">local-agent/network/llmClient</a></li><li><a href="module-main.html">main</a></li><li><a href="module-strategies_EntropyReferrer.html">strategies/EntropyReferrer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-strategies_EntropyReferrer.html#~_extractContext">_extractContext</a></li></ul></li><li><a href="module-tasks_agentNavigate.html">tasks/agentNavigate</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-tasks_agentNavigate.html#~agentNavigate">agentNavigate</a></li></ul></li><li><a href="module-tasks_ai-testertask.html">tasks/ai-testertask</a></li><li><a href="module-tasks_automationTask1.html">tasks/automationTask1</a></li><li><a href="module-tasks_automationTask2.html">tasks/automationTask2</a></li><li><a href="module-tasks_cookieBotRandom.html">tasks/cookieBotRandom</a></li><li><a href="module-tasks_runAgent.html">tasks/runAgent</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-tasks_runAgent.html#.run">run</a></li></ul></li><li><a href="module-tasks_testGoogleSearch.html">tasks/testGoogleSearch</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-tasks_testGoogleSearch.html#~testGoogleSearch">testGoogleSearch</a></li></ul></li><li><a href="module-tasks_twitterscroll.html">tasks/twitterscroll</a></li><li><a href="module-tests_test-core-modules.html">tests/test-core-modules</a></li><li><a href="module-utils_actions.html">utils/actions</a></li><li><a href="module-utils_actions_ai-twitter-bookmark.html">utils/actions/ai-twitter-bookmark</a></li><li><a href="module-utils_actions_ai-twitter-go-home.html">utils/actions/ai-twitter-go-home</a></li><li><a href="module-utils_actions_ai-twitter-like.html">utils/actions/ai-twitter-like</a></li><li><a href="module-utils_actions_ai-twitter-quote.html">utils/actions/ai-twitter-quote</a></li><li><a href="module-utils_actions_ai-twitter-reply.html">utils/actions/ai-twitter-reply</a></li><li><a href="module-utils_ai-context-engine.html">utils/ai-context-engine</a></li><li><a href="module-utils_ai-quote-engine.html">utils/ai-quote-engine</a></li><li><a href="module-utils_ai-reply-engine.html">utils/ai-reply-engine</a></li><li><a href="module-utils_ai-tools.html">utils/ai-tools</a></li><li><a href="module-utils_ai-twitterAgent.html">utils/ai-twitterAgent</a></li><li><a href="module-utils_api-key-timeout-tracker.html">utils/api-key-timeout-tracker</a></li><li><a href="module-utils_apiHandler.html">utils/apiHandler</a></li><li><a href="module-utils_async-queue.html">utils/async-queue</a></li><li><a href="module-utils_banner.html">utils/banner</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_banner.html#.showBanner">showBanner</a></li></ul></li><li><a href="module-utils_browserPatch.html">utils/browserPatch</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_browserPatch.html#.applyHumanizationPatch">applyHumanizationPatch</a></li></ul></li><li><a href="module-utils_circuit-breaker.html">utils/circuit-breaker</a></li><li><a href="module-utils_config-cache.html">utils/config-cache</a></li><li><a href="module-utils_config-service.html">utils/config-service</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_config-service.html#~applyEnvOverrides">applyEnvOverrides</a></li><li data-type='method' style='display: none;'><a href="module-utils_config-service.html#~getFromEnvOrSettings">getFromEnvOrSettings</a></li></ul></li><li><a href="module-utils_config-validator.html">utils/config-validator</a></li><li><a href="module-utils_configLoader.html">utils/configLoader</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_configLoader.html#.getBrowserAPI">getBrowserAPI</a></li><li data-type='method' style='display: none;'><a href="module-utils_configLoader.html#.getSettings">getSettings</a></li><li data-type='method' style='display: none;'><a href="module-utils_configLoader.html#.getTimeoutValue">getTimeoutValue</a></li><li data-type='method' style='display: none;'><a href="module-utils_configLoader.html#.getTimeouts">getTimeouts</a></li></ul></li><li><a href="module-utils_content-depth.html">utils/content-depth</a></li><li><a href="module-utils_dockerLLM.html">utils/dockerLLM</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_dockerLLM.html#.ensureDockerLLM">ensureDockerLLM</a></li><li data-type='method' style='display: none;'><a href="module-utils_dockerLLM.html#~isLocalLLMReady">isLocalLLMReady</a></li><li data-type='method' style='display: none;'><a href="module-utils_dockerLLM.html#~startLocalLLM">startLocalLLM</a></li></ul></li><li><a href="module-utils_engagement-limits.html">utils/engagement-limits</a></li><li><a href="module-utils_entropyController.html">utils/entropyController</a></li><li><a href="module-utils_envLoader.html">utils/envLoader</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_envLoader.html#.getEnv">getEnv</a></li><li data-type='method' style='display: none;'><a href="module-utils_envLoader.html#.getLogLevel">getLogLevel</a></li><li data-type='method' style='display: none;'><a href="module-utils_envLoader.html#.getNodeEnv">getNodeEnv</a></li><li data-type='method' style='display: none;'><a href="module-utils_envLoader.html#.getRequiredEnv">getRequiredEnv</a></li><li data-type='method' style='display: none;'><a href="module-utils_envLoader.html#.isDevelopment">isDevelopment</a></li><li data-type='method' style='display: none;'><a href="module-utils_envLoader.html#.isProduction">isProduction</a></li><li data-type='method' style='display: none;'><a href="module-utils_envLoader.html#.resolveEnvVars">resolveEnvVars</a></li><li data-type='method' style='display: none;'><a href="module-utils_envLoader.html#.resolveEnvVarsInObject">resolveEnvVarsInObject</a></li><li data-type='method' style='display: none;'><a href="module-utils_envLoader.html#.validateRequiredEnvVars">validateRequiredEnvVars</a></li></ul></li><li><a href="module-utils_environment-config.html">utils/environment-config</a></li><li><a href="module-utils_errors.html">utils/errors</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_errors.html#.classifyHttpError">classifyHttpError</a></li><li data-type='method' style='display: none;'><a href="module-utils_errors.html#.wrapError">wrapError</a></li></ul></li><li><a href="module-utils_free-api-router.html">utils/free-api-router</a></li><li><a href="module-utils_free-openrouter-helper.html">utils/free-openrouter-helper</a></li><li><a href="module-utils_global-scroll-controller.html">utils/global-scroll-controller</a></li><li><a href="module-utils_human-interaction.html">utils/human-interaction</a></li><li><a href="module-utils_human-timing.html">utils/human-timing</a></li><li><a href="module-utils_local-ollama-manager.html">utils/local-ollama-manager</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_local-ollama-manager.html#.ensureOllama">ensureOllama</a></li><li data-type='method' style='display: none;'><a href="module-utils_local-ollama-manager.html#.isOllamaRunning">isOllamaRunning</a></li><li data-type='method' style='display: none;'><a href="module-utils_local-ollama-manager.html#.startOllama">startOllama</a></li><li data-type='method' style='display: none;'><a href="module-utils_local-ollama-manager.html#~doesModelExist">doesModelExist</a></li><li data-type='method' style='display: none;'><a href="module-utils_local-ollama-manager.html#~isOllamaProcessRunning">isOllamaProcessRunning</a></li></ul></li><li><a href="module-utils_logger.html">utils/logger</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_logger.html#.createBufferedLogger">createBufferedLogger</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger.html#.createLogger">createLogger</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger.html#~initLogFile">initLogFile</a></li><li data-type='method' style='display: none;'><a href="module-utils_logger.html#~writeToLogFile">writeToLogFile</a></li></ul></li><li><a href="module-utils_metrics.html">utils/metrics</a></li><li><a href="module-utils_micro-interactions.html">utils/micro-interactions</a></li><li><a href="module-utils_mistake-engine.html">utils/mistake-engine</a></li><li><a href="module-utils_model-perf-tracker.html">utils/model-perf-tracker</a></li><li><a href="module-utils_motor-control.html">utils/motor-control</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_motor-control.html#~getXSelectors">getXSelectors</a></li><li data-type='method' style='display: none;'><a href="module-utils_motor-control.html#~smartSelector">smartSelector</a></li></ul></li><li><a href="module-utils_navigation-diversity.html">utils/navigation-diversity</a></li><li><a href="module-utils_proxy-agent.html">utils/proxy-agent</a></li><li><a href="module-utils_randomScrolling.html">utils/randomScrolling</a></li><li><a href="module-utils_randomZoom.html">utils/randomZoom</a></li><li><a href="module-utils_rate-limit-tracker.html">utils/rate-limit-tracker</a></li><li><a href="module-utils_request-dedupe.html">utils/request-dedupe</a></li><li><a href="module-utils_retry.html">utils/retry</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_retry.html#.withRetry">withRetry</a></li></ul></li><li><a href="module-utils_scroll-helper.html">utils/scroll-helper</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_scroll-helper.html#.getScrollMultiplier">getScrollMultiplier</a></li><li data-type='method' style='display: none;'><a href="module-utils_scroll-helper.html#.scroll">scroll</a></li><li data-type='method' style='display: none;'><a href="module-utils_scroll-helper.html#.scrollDown">scrollDown</a></li><li data-type='method' style='display: none;'><a href="module-utils_scroll-helper.html#.scrollRandom">scrollRandom</a></li><li data-type='method' style='display: none;'><a href="module-utils_scroll-helper.html#.scrollToBottom">scrollToBottom</a></li><li data-type='method' style='display: none;'><a href="module-utils_scroll-helper.html#.scrollToTop">scrollToTop</a></li><li data-type='method' style='display: none;'><a href="module-utils_scroll-helper.html#.scrollUp">scrollUp</a></li><li data-type='method' style='display: none;'><a href="module-utils_scroll-helper.html#.scrollWheel">scrollWheel</a></li></ul></li><li><a href="module-utils_scroll-humanizer.html">utils/scroll-humanizer</a></li><li><a href="module-utils_sentiment-analyzer-multi.html">utils/sentiment-analyzer-multi</a></li><li><a href="module-utils_sentiment-analyzers.html">utils/sentiment-analyzers</a></li><li><a href="module-utils_sentiment-data.html">utils/sentiment-data</a></li><li><a href="module-utils_sentiment-decision-engine.html">utils/sentiment-decision-engine</a></li><li><a href="module-utils_sentiment-guard.html">utils/sentiment-guard</a></li><li><a href="module-utils_sentiment-integration.html">utils/sentiment-integration</a></li><li><a href="module-utils_sentiment-service.html">utils/sentiment-service</a></li><li><a href="module-utils_session-phases.html">utils/session-phases</a></li><li><a href="module-utils_task-config-loader.html">utils/task-config-loader</a></li><li><a href="module-utils_temporal-awareness.html">utils/temporal-awareness</a></li><li><a href="module-utils_twitter-interaction-methods.html">utils/twitter-interaction-methods</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_twitter-interaction-methods.html#.executeQuoteMethod">executeQuoteMethod</a></li><li data-type='method' style='display: none;'><a href="module-utils_twitter-interaction-methods.html#.executeReplyMethod">executeReplyMethod</a></li></ul></li><li><a href="module-utils_twitter-reply-prompt.html">utils/twitter-reply-prompt</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_twitter-reply-prompt.html#.buildEnhancedPrompt">buildEnhancedPrompt</a></li><li data-type='method' style='display: none;'><a href="module-utils_twitter-reply-prompt.html#.getStrategyInstruction">getStrategyInstruction</a></li></ul></li><li><a href="module-utils_urlReferrerGenerator.html">utils/urlReferrerGenerator</a></li><li><a href="module-utils_utils.html">utils/utils</a></li><li><a href="module-utils_validator.html">utils/validator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_validator.html#.validateApiResponse">validateApiResponse</a></li><li data-type='method' style='display: none;'><a href="module-utils_validator.html#.validateBrowserConnection">validateBrowserConnection</a></li><li data-type='method' style='display: none;'><a href="module-utils_validator.html#.validatePayload">validatePayload</a></li><li data-type='method' style='display: none;'><a href="module-utils_validator.html#.validateTaskExecution">validateTaskExecution</a></li><li data-type='method' style='display: none;'><a href="module-utils_validator.html#~convertSchemaToZod">convertSchemaToZod</a></li></ul></li><li><a href="tasks_twitterActivity.html#.module:js">tasks/twitterActivity.js</a><ul class='methods'><li data-type='method' style='display: none;'><a href="tasks_twitterActivity.html#.module:js#~applyHumanizationPatch">applyHumanizationPatch</a></li></ul></li><li><a href="tasks_twitterFollow.html#.module:js">tasks/twitterFollow.js</a><ul class='methods'><li data-type='method' style='display: none;'><a href="tasks_twitterFollow.html#.module:js#~applyHumanizationPatch">applyHumanizationPatch</a></li></ul></li><li><a href="tasks_twitterFollowLikeRetweet.html#.module:js">tasks/twitterFollowLikeRetweet.js</a><ul class='methods'><li data-type='method' style='display: none;'><a href="tasks_twitterFollowLikeRetweet.html#.module:js#~applyHumanizationPatch">applyHumanizationPatch</a></li></ul></li><li><a href="tasks_twitterTweet.html#.module:js">tasks/twitterTweet.js</a><ul class='methods'><li data-type='method' style='display: none;'><a href="tasks_twitterTweet.html#.module:js#~applyHumanizationPatch">applyHumanizationPatch</a></li></ul></li><li><a href="tests_integration_agent-connector-health.module_test.html">tests/integration/agent-connector-health.test</a></li><li><a href="tests_integration_agent-connector.module_test.html">tests/integration/agent-connector.test</a></li><li><a href="tests_integration_circuit-breaker.module_test.html">tests/integration/circuit-breaker.test</a></li><li><a href="tests_integration_cloud-client.module_test.html">tests/integration/cloud-client.test</a></li><li><a href="tests_integration_profile-manager.module_test.html">tests/integration/profile-manager.test</a></li><li><a href="tests_integration_request-queue.module_test.html">tests/integration/request-queue.test</a></li><li><a href="tests_integration_task-config-loader.module_test.html">tests/integration/task-config-loader.test</a></li><li><a href="tests_test-multiline-tweet.module_js.html">tests/test-multiline-tweet.js</a></li><li><a href="tests_unit_ai-twitter-activity.module_test.html">tests/unit/ai-twitter-activity.test</a></li><li><a href="tests_unit_ai-twitterAgent.module_test.html">tests/unit/ai-twitterAgent.test</a></li><li><a href="tests_unit_ai-twitterAgent.real.module_test.html">tests/unit/ai-twitterAgent.real.test</a></li><li><a href="tests_unit_apiHandler.module_test.html">tests/unit/apiHandler.test</a></li><li><a href="tests_unit_async-queue.module_test.html">tests/unit/async-queue.test</a></li><li><a href="tests_unit_banner.module_test.html">tests/unit/banner.test</a></li><li><a href="tests_unit_circuit-breaker.module_test.html">tests/unit/circuit-breaker.test</a></li><li><a href="tests_unit_config-service.module_test.html">tests/unit/config-service.test</a></li><li><a href="tests_unit_discovery.module_test.html">tests/unit/discovery.test</a></li><li><a href="tests_unit_dockerLLM.module_test.html">tests/unit/dockerLLM.test</a></li><li><a href="tests_unit_engagement-limits.module_test.html">tests/unit/engagement-limits.test</a></li><li><a href="tests_unit_envLoader.module_test.html">tests/unit/envLoader.test</a></li><li><a href="tests_unit_global-scroll-controller.module_test.html">tests/unit/global-scroll-controller.test</a></li><li><a href="tests_unit_human-interaction.module_test.html">tests/unit/human-interaction.test</a></li><li><a href="tests_unit_humanization-utils.module_test.html">tests/unit/humanization-utils.test</a></li><li><a href="tests_unit_ixbrowser.module_test.html">tests/unit/ixbrowser.test</a></li><li><a href="tests_unit_logging-config.module_test.html">tests/unit/logging-config.test</a></li><li><a href="tests_unit_request-queue.module_test.html">tests/unit/request-queue.test</a></li><li><a href="tests_unit_retry.module_test.html">tests/unit/retry.test</a></li><li><a href="tests_unit_roxybrowser.module_test.html">tests/unit/roxybrowser.test</a></li><li><a href="tests_unit_scroll-helper.module_test.html">tests/unit/scroll-helper.test</a></li><li><a href="tests_unit_session-manager.module_test.html">tests/unit/session-manager.test</a></li><li><a href="tests_unit_validator.module_test.html">tests/unit/validator.test</a></li><li><a href="tools_composeTweet.module_js.html">tools/composeTweet.js</a><ul class='methods'><li data-type='method' style='display: none;'><a href="tools_composeTweet.module_js.html#~composeTweet">composeTweet</a></li><li data-type='method' style='display: none;'><a href="tools_composeTweet.module_js.html#~main">main</a></li><li data-type='method' style='display: none;'><a href="tools_composeTweet.module_js.html#~showQueueStatus">showQueueStatus</a></li><li data-type='method' style='display: none;'><a href="tools_composeTweet.module_js.html#~viewQueue">viewQueue</a></li></ul></li><li><a href="utils_config-manager%250D%250DThis%2520is%2520a%2520NEW%2520module%2520for%2520Phase%25202%2520improvements.%2520It%2520does%2520not%2520replace%2520existing%2520config%2520loaders%250Dbut%2520provides%2520a%2520more%2520robust%2520alternative%2520for%2520new%2520code.module_.html">utils/config-managerThis is a NEW module for Phase 2 improvements. It does not replace existing config loadersbut provides a more robust alternative for new code.</a></li></ul><h3>Global</h3><ul><li><a href="global.html#configDrivenReply">configDrivenReply</a></li><li><a href="global.html#ensureProfilesLoaded">ensureProfilesLoaded</a></li><li><a href="global.html#estimateConversationTokens">estimateConversationTokens</a></li><li><a href="global.html#estimateMessageTokens">estimateMessageTokens</a></li><li><a href="global.html#estimateTokens">estimateTokens</a></li><li><a href="global.html#formatEngagementLine">formatEngagementLine</a></li><li><a href="global.html#formatEngagementSummary">formatEngagementSummary</a></li><li><a href="global.html#generateProfiles">generateProfiles</a></li><li><a href="global.html#generateProgressBar">generateProgressBar</a></li><li><a href="global.html#getDefaultLoggingConfig">getDefaultLoggingConfig</a></li><li><a href="global.html#getLoggingConfig">getLoggingConfig</a></li><li><a href="global.html#loadProfiles">loadProfiles</a></li><li><a href="global.html#mathUtils">mathUtils</a></li><li><a href="global.html#postQuoteWithMethod">postQuoteWithMethod</a></li><li><a href="global.html#postReplyRandom">postReplyRandom</a></li><li><a href="global.html#postReplyWithFallback">postReplyWithFallback</a></li><li><a href="global.html#postReplyWithMethod">postReplyWithMethod</a></li><li><a href="global.html#resetLoggingConfig">resetLoggingConfig</a></li><li><a href="global.html#runAllEdgeCaseTests">runAllEdgeCaseTests</a></li><li><a href="global.html#runAllIntegrationTests">runAllIntegrationTests</a></li><li><a href="global.html#runAllTests">runAllTests</a></li><li><a href="global.html#runAllUnitTests">runAllUnitTests</a></li><li><a href="global.html#smartReply">smartReply</a></li><li><a href="global.html#takeScreenshot">takeScreenshot</a></li><li><a href="global.html#testStats">testStats</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">utils/twitterAgent.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { mathUtils } from './mathUtils.js';
import { entropy } from './entropyController.js';
import { profileManager } from './profileManager.js';
import { GhostCursor } from './ghostCursor.js';
import { HumanizationEngine } from './humanization/index.js';
import { scrollDown, scrollRandom } from './scroll-helper.js';


export class TwitterAgent {
    constructor(page, initialProfile, logger) {
        this.page = page;
        this.config = initialProfile;
        this.logger = logger;
        this.ghost = new GhostCursor(page);

        // Humanization Engine
        this.human = new HumanizationEngine(page, this);

        // Session state model
        this.sessionStart = Date.now();
        this.sessionEndTime = null;
        this.loopIndex = 0;
        this.state = {
            lastRefreshAt: 0,
            lastEngagementAt: 0,
            engagements: 0,
            tabs: { preferForYou: true, switchChance: 0.15 },
            fatigueBias: 0,
            consecutiveLoginFailures: 0, // Track login failures
            likes: 0,
            follows: 0,
            retweets: 0,
            tweets: 0,
            activityMode: 'NORMAL', // NORMAL | BURST
            burstEndTime: 0,
            consecutiveSoftErrors: 0
        };

        // Fatigue trigger between 3 and 8 minutes
        this.isFatigued = false;
        this.fatigueThreshold = mathUtils.randomInRange(3 * 60 * 1000, 8 * 60 * 1000);

        this.log(`Initialized [${this.config.description}]. Fatigue scheduled for T+${(this.fatigueThreshold / 60000).toFixed(1)}m`);

        // --- HEALTH MONITORING ---
        this.lastNetworkActivity = Date.now();
        // Setup listeners to track network life-signs
        // We use a safe wrapper to avoid crashing if page is closed
        try {
            this.page.on('request', () => { this.lastNetworkActivity = Date.now(); });
            this.page.on('response', () => { this.lastNetworkActivity = Date.now(); });
        } catch (e) {
            this.log(`[Warning] Failed to attach network listeners: ${e.message}`);
        }
    }

    log(msg) {
        if (this.logger) {
            this.logger.info(`[Agent:${this.config.id}] ${msg}`);
        } else {
            console.log(`[Agent:${this.config.id}] ${msg}`);
        }
    }

    // Utility: clamp
    clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

    /**
      * Anti-Sybil Interaction Wrapper - Human-like clicking behavior
      */
    async humanClick(target, description = 'Target') {
        if (!target) return;
        
        // HUMAN-LIKE: Thinking pause before clicking
        await this.human.think(description);
        
        try {
            // 1. Aggressive Scroll: Center the element
            await target.evaluate(el => el.scrollIntoView({ block: 'center', inline: 'center' }));

            // 2. HUMAN-LIKE: Target fixation - pause before moving mouse (200-500ms)
            const fixationDelay = mathUtils.randomInRange(200, 500);
            await this.page.waitForTimeout(fixationDelay);

            // 3. HUMAN-LIKE: Micro-movement before clicking (overshoot and correct)
            const overshoot = mathUtils.randomInRange(20, 50);
            const direction = Math.random() > 0.5 ? 1 : -1;
            await this.page.mouse.move(overshoot * direction, overshoot * direction);
            await this.page.waitForTimeout(mathUtils.randomInRange(100, 200));
            await this.page.mouse.move(-overshoot * direction / 2, -overshoot * direction / 2);

            // 4. Visual confirmation pause (Reaction time)
            await this.page.waitForTimeout(mathUtils.randomInRange(300, 600));

            // 5. Execute Ghost Click
            await this.ghost.click(target, { allowNativeFallback: true });

        } catch (e) {
            this.log(`[Interaction] humanClick failed on ${description}: ${e.message}`);
            
            // HUMAN-LIKE: Error recovery
            await this.human.recoverFromError('click_failed', { locator: target });
            
            try { await target.click({ force: true }); } catch { }
        }
    }

    /**
     * Safe human-like click with retry logic
     * Wraps humanClick with automatic retry on failure
     * @param {Object} target - Playwright locator or element handle
     * @param {string} description - Description for logging
     * @param {number} retries - Number of retry attempts (default: 3)
     * @returns {Promise&lt;boolean>} - True if successful, false if all retries failed
     */
    async safeHumanClick(target, description = 'Target', retries = 3) {
        const attemptLogs = [];
        for (let attempt = 1; attempt &lt;= retries; attempt++) {
            try {
                await this.humanClick(target, description);
                this.log(`[Interaction] [${description}] Success on attempt ${attempt}/${retries}`);
                return true;
            } catch (error) {
                attemptLogs.push(`Attempt ${attempt}: ${error.message}`);
                this.log(`[Interaction] [${description}] Attempt ${attempt}/${retries} failed: ${error.message}`);
                if (attempt === retries) {
                    this.log(`[Interaction] [${description}] All retries exhausted. Errors: ${attemptLogs.join('; ')}`);
                    return false;
                }
                // Exponential backoff: 1s, 2s, 3s...
                const delay = 1000 * attempt;
                this.log(`[Interaction] [${description}] Waiting ${delay}ms before retry ${attempt + 1}...`);
                await this.page.waitForTimeout(delay);
            }
        }
        return false;
    }

    /**
     * Check if element is truly actionable (not covered by overlay)
     * @param {Locator} element - Playwright locator
     * @returns {Promise&lt;boolean>}
     */
    async isElementActionable(element) {
        try {
            const handle = await element.elementHandle();
            if (!handle) return false;

            return await this.page.evaluate(async (el) => {
                const rect = el.getBoundingClientRect();
                if (rect.width === 0 || rect.height === 0) return false;

                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const topElement = document.elementFromPoint(centerX, centerY);

                return topElement &amp;&amp; (el.contains(topElement) || el === topElement);
            }, handle);
        } catch {
            return false;
        }
    }

    /**
     * Scroll element to Golden Zone (30% from top of viewport)
     * @param {Locator} element - Playwright locator
     */
    async scrollToGoldenZone(element) {
        try {
            const handle = await element.elementHandle();
            if (!handle) return;

            await this.page.evaluate((el) => {
                const rect = el.getBoundingClientRect();
                const targetY = window.innerHeight * 0.3; // 30% from top
                const scrollBy = rect.top - targetY;
                window.scrollBy({ top: scrollBy, behavior: 'smooth' });
            }, handle);

            await this.page.waitForTimeout(500); // Wait for scroll to settle
        } catch (e) {
            this.log(`[GoldenZone] Scroll failed: ${e.message}`);
        }
    }

    /**
     * Dismiss any overlays (toasts, modals) that might block clicks
     */
    async dismissOverlays() {
        try {
            // Check for toast notifications
            const toasts = this.page.locator('[data-testid="toast"], [role="alert"]');
            if (await toasts.count() > 0) {
                await this.page.keyboard.press('Escape');
                await this.page.waitForTimeout(300);
            }

            // Check for modals/dialogs
            const modals = this.page.locator('[role="dialog"], [aria-modal="true"]');
            if (await modals.count() > 0) {
                await this.page.keyboard.press('Escape');
                await this.page.waitForTimeout(300);
            }
        } catch {
            // Ignore overlay dismissal errors
        }
    }

    /**
     * Poll for follow state change
     * @param {string} unfollowSelector - Selector for unfollow button
     * @param {string} followSelector - Selector for follow button
     * @param {number} maxWaitMs - Maximum wait time in ms
     * @returns {Promise&lt;boolean>}
     */
    async pollForFollowState(unfollowSelector, followSelector, maxWaitMs = 20000) {
        const pollInterval = 2000;
        const maxPolls = Math.floor(maxWaitMs / pollInterval);

        for (let i = 0; i &lt; maxPolls; i++) {
            // Check if Unfollow button appeared
            if (await this.page.locator(unfollowSelector).first().isVisible().catch(() => false)) {
                return true;
            }

            // Check if button text changed to "Following"
            const btn = this.page.locator(followSelector).first();
            const text = await btn.textContent().catch(() => '');
            if (text &amp;&amp; text.toLowerCase().includes('following')) {
                return true;
            }

            await this.page.waitForTimeout(pollInterval);
        }

        return false;
    }

    /**
     * 6-Layer Click Strategy for maximum reliability
     * @param {Locator} element - Element to click
     * @param {string} logPrefix - Logging prefix
     * @returns {Promise&lt;boolean>} - Whether click was performed
     */
    async sixLayerClick(element, logPrefix) {
        const layers = [
            { name: 'Ghost Click', fn: async () => await this.safeHumanClick(element, 'Follow Button', 2) },
            { name: 'Native Click', fn: async () => await element.click({ timeout: 8000 }) },
            { name: 'Force Click', fn: async () => await element.click({ force: true, timeout: 8000 }) },
            {
                name: 'JS Dispatch', fn: async () => {
                    const handle = await element.elementHandle();
                    if (handle) await this.page.evaluate(el => el.click(), handle);
                }
            },
            {
                name: 'MouseEvent', fn: async () => {
                    const handle = await element.elementHandle();
                    if (handle) {
                        await this.page.evaluate(el => {
                            const event = new MouseEvent('click', { bubbles: true, cancelable: true, view: window });
                            el.dispatchEvent(event);
                        }, handle);
                    }
                }
            },
            {
                name: 'Keyboard', fn: async () => {
                    await element.focus();
                    await this.page.waitForTimeout(100);
                    await this.page.keyboard.press('Enter');
                }
            }
        ];

        for (let i = 0; i &lt; layers.length; i++) {
            const layer = layers[i];
            try {
                this.log(`${logPrefix} Layer ${i + 1}/6: ${layer.name}...`);
                await layer.fn();
                return true; // Click executed, caller will verify
            } catch (e) {
                this.log(`${logPrefix} Layer ${i + 1} (${layer.name}) failed: ${e.message}`);

                // Delay between layers (300-800ms)
                if (i &lt; layers.length - 1) {
                    await this.page.waitForTimeout(mathUtils.randomInRange(300, 800));
                }
            }
        }

        return false; // All layers failed
    }

    /**
     * Robust Follow with 99.99% Success Rate
     * 6-layer click fallback, polling verification, page reload on failure
     * @param {string} [logPrefix='[Follow]'] - Optional prefix for log messages
     * @param {string|null} [reloadUrl=null] - Optional URL to force navigate to on reload
     * @returns {Promise&lt;{success: boolean, attempts: number, reason: string}>}
     */
    async robustFollow(logPrefix = '[Follow]', reloadUrl = null) {
        const followBtnSelector = 'div[data-testid="placementTracking"] [data-testid$="-follow"], div[role="button"][data-testid$="-follow"]';
        const unfollowBtnSelector = '[data-testid$="-unfollow"]';
        const MAX_ATTEMPTS = 5;
        const POST_RELOAD_ATTEMPTS = 2;

        let result = { success: false, attempts: 0, reason: '', fatal: false };
        let hasReloaded = false;

        // Pre-check: Already following?
        const preCheckUnfollow = this.page.locator(unfollowBtnSelector).first();
        if (await preCheckUnfollow.isVisible().catch(() => false)) {
            this.log(`${logPrefix}  Already following.`);
            return { success: true, attempts: 0, reason: 'already_following' };
        }

        // Pre-check: Button text already says "Following" or "Pending"?
        const preCheckFollow = this.page.locator(followBtnSelector).first();
        if (await preCheckFollow.isVisible().catch(() => false)) {
            const preText = (await preCheckFollow.textContent() || '').toLowerCase();
            if (preText.includes('following')) {
                this.log(`${logPrefix}  Already following (button text).`);
                return { success: true, attempts: 0, reason: 'already_following' };
            }
            // Race Condition Fix #4: Handle Pending state
            if (preText.includes('pending')) {
                this.log(`${logPrefix}  Follow request pending. Waiting for resolution...`);
                await this.page.waitForTimeout(3000);
                // Re-check after wait
                if (await preCheckUnfollow.isVisible().catch(() => false)) {
                    this.log(`${logPrefix}  Pending resolved to Following.`);
                    return { success: true, attempts: 0, reason: 'pending_resolved' };
                }
            }
        }

        // Initial delay: 5-10s to "read the profile"
        const initialDelay = mathUtils.randomInRange(8000, 15000);
        this.log(`${logPrefix} Reading profile for ${(initialDelay / 1000).toFixed(1)}s...`);
        await this.page.waitForTimeout(initialDelay);

        const totalAttempts = MAX_ATTEMPTS + POST_RELOAD_ATTEMPTS;

        for (let attempt = 1; attempt &lt;= totalAttempts; attempt++) {
            result.attempts = attempt;

            // Check if we need to reload (after MAX_ATTEMPTS failures)
            if (attempt === MAX_ATTEMPTS + 1 &amp;&amp; !hasReloaded) {
                this.log(`${logPrefix}  All ${MAX_ATTEMPTS} attempts failed. Reloading page...`);

                // Thinking delay before reload
                await this.page.waitForTimeout(mathUtils.randomInRange(2000, 5000));

                try {
                    if (reloadUrl) {
                        this.log(`${logPrefix}  Force Navigating to: ${reloadUrl}`);
                        await this.page.goto(reloadUrl, { waitUntil: 'domcontentloaded', timeout: 60000 });
                    } else {
                        await this.page.reload({ waitUntil: 'networkidle', timeout: 60000 });
                    }

                    await this.page.waitForTimeout(mathUtils.randomInRange(5000, 10000));
                    hasReloaded = true;
                    this.log(`${logPrefix} Page reloaded. Trying ${POST_RELOAD_ATTEMPTS} more attempts...`);
                } catch (e) {
                    this.log(`${logPrefix} Reload failed: ${e.message}`);
                    result.reason = 'reload_failed';
                    result.fatal = true;
                    break;
                }
            }

            // Pre-flight: Dismiss overlays
            await this.dismissOverlays();

            // --- SOFT ERROR CHECK ---
            if (await this.checkAndHandleSoftError(reloadUrl)) {
                await this.page.waitForTimeout(mathUtils.randomInRange(5000, 8000));
                continue;
            }

            // Re-query selectors each attempt to avoid stale references
            const freshFollowBtn = this.page.locator(followBtnSelector).first();
            const freshUnfollowBtn = this.page.locator(unfollowBtnSelector).first();

            // Check if already succeeded (from previous attempt's delayed state change)
            if (await freshUnfollowBtn.isVisible().catch(() => false)) {
                this.log(`${logPrefix}  Already following (detected on attempt ${attempt}).`);
                result.success = true;
                result.reason = 'unfollow_button_visible';
                break;
            }

            // --- HEALTH CHECK ---
            const health = await this.performHealthCheck();
            if (!health.healthy) {
                this.log(`${logPrefix}  CRITICAL HEALTH FAILURE: ${health.reason}. Aborting task.`);
                result.success = false;
                result.fatal = true;
                result.reason = health.reason;
                break;
            }

            if (await freshFollowBtn.isVisible()) {
                const buttonText = (await freshFollowBtn.textContent() || '').toLowerCase();

                // Safety: Skip if button text suggests already following
                if (buttonText.includes('following') || buttonText.includes('unfollow')) {
                    this.log(`${logPrefix} Button text '${buttonText}' suggests already following.`);
                    result.success = true;
                    result.reason = 'button_text_following';
                    break;
                }

                if (buttonText.includes('follow')) {
                    this.log(`${logPrefix} === Attempt ${attempt}/${totalAttempts} ===`);

                    try {
                        // Pre-flight: Scroll to Golden Zone
                        await this.scrollToGoldenZone(freshFollowBtn);

                        // Pre-flight: Verify actionability
                        const isActionable = await this.isElementActionable(freshFollowBtn);
                        if (!isActionable) {
                            this.log(`${logPrefix} Button not actionable (covered by overlay?). Retrying...`);
                            await this.dismissOverlays();
                            await this.page.waitForTimeout(500);
                        }

                        // Race Condition Fix #1: Re-check button state right before clicking
                        const preClickBtn = this.page.locator(followBtnSelector).first();
                        const preClickText = (await preClickBtn.textContent().catch(() => '') || '').toLowerCase();
                        if (preClickText.includes('following') || preClickText.includes('pending')) {
                            this.log(`${logPrefix} Button changed to '${preClickText}' before click. Verifying...`);
                            if (await this.page.locator(unfollowBtnSelector).first().isVisible().catch(() => false)) {
                                this.state.follows++;
                                result.success = true;
                                result.reason = 'state_changed_before_click';
                                this.log(`${logPrefix} Already followed (detected pre-click)`);
                                break;
                            }
                        }

                        // Execute 6-layer click strategy
                        const clickPerformed = await this.sixLayerClick(preClickBtn, logPrefix);

                        if (!clickPerformed) {
                            this.log(`${logPrefix} All 6 click layers failed.`);
                            result.reason = 'all_layers_failed';
                            continue;
                        }

                        // Polling verification: Check every 500ms for up to 5s
                        this.log(`${logPrefix} Verifying follow state...`);
                        const verified = await this.pollForFollowState(unfollowBtnSelector, followBtnSelector, 20000);

                        if (verified) {
                            this.state.follows++;
                            result.success = true;
                            result.reason = 'verified_success';
                            this.log(`${logPrefix} Followed Successfully (Attempt ${attempt})`);
                            break;
                        }

                        // Race Condition Fix #3: Re-query locator after polling (DOM may have changed)
                        const postPollBtn = this.page.locator(followBtnSelector).first();
                        const ariaLabel = await postPollBtn.getAttribute('aria-label').catch(() => '');
                        if (ariaLabel &amp;&amp; ariaLabel.toLowerCase().includes('following')) {
                            this.state.follows++;
                            result.success = true;
                            result.reason = 'aria_label_following';
                            this.log(`${logPrefix} Followed Successfully (Attempt ${attempt})`);
                            break;
                        }

                        // Additional check: Button text after polling
                        const postPollText = (await postPollBtn.textContent().catch(() => '') || '').toLowerCase();
                        if (postPollText.includes('following')) {
                            this.state.follows++;
                            result.success = true;
                            result.reason = 'post_poll_text_following';
                            this.log(`${logPrefix} Followed Successfully (Attempt ${attempt})`);
                            break;
                        }

                        this.log(`${logPrefix} Attempt ${attempt} verification failed.`);
                        result.reason = 'verification_failed';

                    } catch (e) {
                        this.log(`${logPrefix} Attempt ${attempt} error: ${e.message}`);
                        result.reason = e.message;
                    }

                    // Exponential backoff before retry
                    if (attempt &lt; totalAttempts) {
                        const base = 3000 + (attempt * 1000);
                        const jitter = mathUtils.randomInRange(-500, 500);
                        const backoff = base + jitter;
                        this.log(`${logPrefix} Backoff ${(backoff / 1000).toFixed(1)}s before attempt ${attempt + 1}...`);
                        await this.page.waitForTimeout(backoff);
                    }
                } else {
                    result.reason = 'button_text_not_follow';
                }
            } else {
                this.log(`${logPrefix} Follow button not visible on attempt ${attempt}.`);
                result.reason = 'button_not_visible';
                if (attempt &lt; totalAttempts) {
                    await this.page.waitForTimeout(2000);
                }
            }
        }

        if (!result.success) {
            this.log(`${logPrefix}  Follow failed after ${result.attempts} attempts (reload: ${hasReloaded}). Reason: ${result.reason}`);
        }

        return result;
    }

    /**
     * Performs a comprehensive health check on the browser session.
     * Detects:
     * 1. Critical Error Pages (Redirect loops, broken pages)
     * 2. Network Zombie State (No activity for > 30s)
     * @returns {Promise&lt;{healthy: boolean, reason: string}>}
     */
    async performHealthCheck() {
        try {
            // 1. Check Network Vital Signs
            const timeSinceLastActivity = Date.now() - this.lastNetworkActivity;
            if (timeSinceLastActivity > 30000) { // 30s Threshold
                return { healthy: false, reason: `network_inactivity_${Math.round(timeSinceLastActivity / 1000)}s` };
            }

            // 2. Check for Critical Error Pages
            // Simple text content scan is usually enough for these standard chrome error pages
            const content = await this.page.content().catch(() => '');
            if (content.includes('ERR_TOO_MANY_REDIRECTS') ||
                content.includes('This page isnt working') ||
                content.includes('redirected you too many times')) {
                return { healthy: false, reason: 'critical_error_page_redirects' };
            }

            return { healthy: true, reason: '' };
        } catch (e) {
            // If we can't check, assume something is very wrong if network is also silent, 
            // but let's be conservative and return healthy if just the check fails but page is alive.
            return { healthy: true, reason: 'check_failed' };
        }
    }

    /**
     * Checks for "Something went wrong" soft error and reloads if found.
     * @param {string|null} [reloadUrl=null] - Optional URL to force navigate to on reload
     * @returns {Promise&lt;boolean>} - True if error was found and reload triggered
     */
    async checkAndHandleSoftError(reloadUrl = null) {
        try {
            // Broad text match for the error header
            const softError = this.page.locator('text=/Something went wrong/i').first();

            // Check if error is visible (fast check)
            if (await softError.isVisible({ timeout: 1000 }).catch(() => false)) {
                this.state.consecutiveSoftErrors = (this.state.consecutiveSoftErrors || 0) + 1;
                this.log(` Soft Error detected: 'Something went wrong'. (Attempt ${this.state.consecutiveSoftErrors}/3)`);

                if (this.state.consecutiveSoftErrors >= 3) {
                    this.log(`[SoftError] Maximum retries reached. potential twitter logged out`);
                    throw new Error('potential twitter logged out');
                }

                // Strategy 1: Try clicking explicit "Retry" button if available
                // LIMIT: Only try this 1x (on the first error detection)
                if (this.state.consecutiveSoftErrors === 1) {
                    const retryBtn = this.page.locator('[role="button"][name="Retry"], button:has-text("Retry")').first();
                    if (await retryBtn.isVisible().catch(() => false)) {
                        this.log(`[SoftError] Found Retry button. Clicking...`);
                        await retryBtn.click().catch(() => { });
                        await this.page.waitForTimeout(3000);
                        return true;
                    }
                }

                // Strategy 2: Full Page Reload
                this.log(`[SoftError] No retry button found. Initializing Page Reload...`);
                try {
                    // Reduce chance of infinite reloading the same bad state by waiting a bit
                    await this.page.waitForTimeout(2000);

                    const targetUrl = reloadUrl || this.page.url();
                    if (targetUrl.startsWith('http')) {
                        this.log(`[SoftError] Simulating Refresh by re-entering URL: ${targetUrl}`);
                        await this.page.goto(targetUrl, { waitUntil: 'domcontentloaded', timeout: 45000 });
                    } else {
                        // Fallback if URL is weird (e.g. about:blank)
                        await this.page.reload({ waitUntil: 'domcontentloaded', timeout: 45000 });
                    }

                    await this.page.waitForTimeout(5000); // Post-refresh wait

                    // VERIFICATION: Did the refresh fix it?
                    if (!await this.page.locator('text=/Something went wrong/i').isVisible({ timeout: 1000 }).catch(() => false)) {
                        this.log(`[SoftError] Refresh successful. Error cleared. Resuming task...`);
                        this.state.consecutiveSoftErrors = 0;
                    }

                    return true;
                } catch (e) {
                    this.log(` Reload failed: ${e.message}`);
                    return true; // Still return true so we don't proceed with broken page
                }
            } else {
                // No soft error visible, reset counter
                this.state.consecutiveSoftErrors = 0;
            }
        } catch (e) {
            // Propagate the logout error
            if (e.message.includes('potential twitter logged out')) throw e;
            // Ignore other errors (like page closed) during check
        }
        return false;
    }




    checkFatigue() {
        if (this.isFatigued) return;
        const elapsed = Date.now() - this.sessionStart;
        if (elapsed > this.fatigueThreshold) {
            this.triggerHotSwap();
        }
    }

    triggerHotSwap() {
        this.log(` ENERGY DECAY TRIGGERED | Simulasi wes kesel browsing`);
        const slowerProfile = profileManager.getFatiguedVariant(this.config.timings.scrollPause.mean);
        if (slowerProfile) {
            this.log(`HOT SWAP: ${this.config.id} >>> ${slowerProfile.id}`);
            this.config = slowerProfile;
            this.isFatigued = true;
            // Adjust probabilities and timing when fatigued
            this.config.probabilities.refresh = this.clamp((this.config.probabilities.refresh || 0.05) * 0.5, 0, 0.2);
            this.config.probabilities.idle = this.clamp((this.config.probabilities.idle || 0.2) + 0.2, 0, 0.8);
            this.state.fatigueBias = 0.2;
        } else {
            this.log('Already at minimum energy state. Entering DOOM SCROLL mode.');
            this.isFatigued = true;
            this.state.fatigueBias = 0.3;
        }
    }

    getScrollMethod() {
        const methods = this.config.inputMethods || { wheelDown: 0.8, wheelUp: 0.05, space: 0.05, keysDown: 0.1, keysUp: 0 };
        const roll = Math.random();
        let sum = 0;
        if (roll &lt; (sum += methods.wheelDown)) return 'WHEEL_DOWN';
        if (roll &lt; (sum += methods.wheelUp)) return 'WHEEL_UP';
        if (roll &lt; (sum += methods.space)) return 'SPACE';
        if (roll &lt; (sum += methods.keysDown)) return 'KEYS_DOWN';
        return 'KEYS_UP';
    }

    normalizeProbabilities(p) {
        // Fallback to default safe probabilities if not specified
        const base = {
            refresh: 0.1,        // refresh feed
            profileDive: 0.15,   // dive into a profile
            tweetDive: 0.1,      // open an expanded tweet
            idle: 0.3,           // explicit idle
            likeTweetafterDive: 0.005,
            bookmarkAfterDive: 0.005,
            followOnProfile: 0.005,
        };
        const merged = { ...base, ...(p || {}) };

        // fatigue bias increases idle probability a bit
        merged.idle = this.clamp(merged.idle + (this.state.fatigueBias || 0), 0, 0.9);

        // recent refresh suppression: if refreshed in last 20s, reduce refresh
        const sinceRefresh = Date.now() - (this.state.lastRefreshAt || 0);
        if (sinceRefresh &lt; 20000) {
            merged.refresh = this.clamp(merged.refresh * 0.4, 0, 0.2);
        }

        // ensure each is within [0,1]
        for (const k of Object.keys(merged)) merged[k] = this.clamp(merged[k], 0, 1);
        if (merged.likeTweetAfterDive != null &amp;&amp; merged.likeTweetafterDive == null) {
            merged.likeTweetafterDive = merged.likeTweetAfterDive;
        }

        // BURST MODE OVERRIDE: High Engagement, No Idle
        if (this.state.activityMode === 'BURST') {
            merged.idle = 0.0;
            merged.refresh = 0.0;
            merged.tweetDive = 0.6; // High chance to open tweets
            merged.profileDive = 0.2;
            // Boost engagement chances during burst
            merged.likeTweetafterDive = 0.5;
            merged.bookmarkAfterDive = 0.3;
            merged.followOnProfile = 0.2;
        }

        return merged;
    }

    async simulateReading() {
        const { mean, deviation } = this.config.timings.readingPhase;
        const actionDelays = this.config.timings.actionSpecific || {
            space: { mean: 1000, deviation: 200 },
            keys: { mean: 100, deviation: 30 }
        };

        // HUMAN-LIKE: Use content skimming pattern
        await this.human.consumeContent('tweet', 'skim');

        // Calculate duration using Gaussian distribution
        let baseDuration = (mean)
            ? mathUtils.gaussian(mean, deviation || mean * 0.3)
            : mathUtils.randomInRange(30000, 60000);

        // Fatigue lengthens reading by up to +25%
        let fatigueFactor = this.isFatigued ? 1.25 : 1.0;

        // BURST MODE OVERRIDE: Fast scanning (0.5s - 2s)
        if (this.state.activityMode === 'BURST') {
            baseDuration = mathUtils.randomInRange(500, 2000);
            fatigueFactor = 1.0;
        }

        const duration = Math.floor(baseDuration * fatigueFactor);
        const startTime = Date.now();

        this.log(`[Idle] Reading Phase (${(duration / 1000).toFixed(1)}s)`);

        while ((Date.now() - startTime) &lt; duration) {
            if (this.isSessionExpired()) return;
            this.checkFatigue();

            // --- SOFT ERROR CHECK ---
            if (await this.checkAndHandleSoftError()) {
                // HUMAN-LIKE: Error recovery
                await this.human.recoverFromError('timeout', {});
                await this.page.waitForTimeout(5000);
                continue;
            }

            // --- FATAL HEALTH CHECK ---
            const health = await this.performHealthCheck();
            if (!health.healthy) {
                this.log(` Fatal Error detected during reading phase: ${health.reason}`);
                throw new Error(`Fatal: ${health.reason}`);
            }

            // HUMAN-LIKE: Multitasking during reading
            if (mathUtils.roll(0.15)) {
                await this.human.multitask();
            }

            // Micro: occasional cursor drift/hover
            if (mathUtils.roll(0.25)) {
                try {
                    const viewport = this.page.viewportSize() || { width: 1280, height: 720 };
                    const x = mathUtils.gaussian(viewport.width / 2, viewport.width / 4);
                    const y = mathUtils.gaussian(viewport.height / 2, viewport.height / 4);
                    const safeX = Math.max(0, Math.min(viewport.width, x));
                    const safeY = Math.max(0, Math.min(viewport.height, y));
                    await this.ghost.move(safeX, safeY, mathUtils.randomInRange(8, 20));
                } catch { }
            }

            // Micro: Fidgeting
            if (mathUtils.roll(0.15)) {
                await this.simulateFidget();
            }

            // Micro: tiny jitter scroll
            if (mathUtils.roll(0.15)) {
                await scrollRandom(this.page, -60, 60);
                await this.page.waitForTimeout(mathUtils.randomInRange(50, 140));
            }

            const method = this.getScrollMethod();

            if (method === 'WHEEL_DOWN') {
                const distance = mathUtils.gaussian(400, 150);
                await scrollDown(this.page, distance);
                if (mathUtils.roll(0.2)) {
                    const viewport = this.page.viewportSize() || { width: 1280, height: 720 };
                    // Random move within viewport
                    const x = mathUtils.gaussian(viewport.width / 2, viewport.width / 3);
                    const y = mathUtils.gaussian(viewport.height / 2, viewport.height / 3);
                    await this.ghost.move(Math.max(0, Math.min(viewport.width, x)), Math.max(0, Math.min(viewport.height, y)), 10);
                }
            } else if (method === 'WHEEL_UP') {
                const distance = mathUtils.gaussian(300, 100);
                await scrollRandom(this.page, distance, distance);
            } else if (method === 'SPACE') {
                await this.page.keyboard.press('Space', { delay: mathUtils.randomInRange(50, 150) });
                const d = actionDelays.space;
                await this.page.waitForTimeout(Math.max(10, mathUtils.gaussian(d.mean, d.deviation)));
            } else if (method === 'KEYS_DOWN') {
                const presses = mathUtils.randomInRange(1, 4);
                for (let k = 0; k &lt; presses; k++) {
                    if (this.isSessionExpired()) return;
                    await this.page.keyboard.press('ArrowDown', { delay: mathUtils.randomInRange(50, 150) });
                    const d = actionDelays.keys;
                    await this.page.waitForTimeout(Math.max(10, mathUtils.gaussian(d.mean, d.deviation)));
                }
            } else if (method === 'KEYS_UP') {
                const presses = mathUtils.randomInRange(1, 3);
                for (let k = 0; k &lt; presses; k++) {
                    if (this.isSessionExpired()) return;
                    await this.page.keyboard.press('ArrowUp', { delay: mathUtils.randomInRange(50, 150) });
                    const d = actionDelays.keys;
                    await this.page.waitForTimeout(Math.max(10, mathUtils.gaussian(d.mean, d.deviation)));
                }
            }

            // Reading pause influenced by fatigue
            const { mean, deviation } = this.config.timings.scrollPause;
            let pause = Math.floor(mathUtils.gaussian(mean, deviation) * (this.isFatigued ? 1.2 : 1));
            pause = Math.max(50, pause);

            // HUMAN BEHAVIOR: "Mouse Parking"
            // If reading for > 2 seconds, move mouse to margin
            if (pause > 2000 &amp;&amp; mathUtils.roll(0.7)) { // 70% chance to park
                // Subtract parking time (~1s) from total pause to keep rhythm
                await this.ghost.park();
                pause = Math.max(50, pause - 1000);
            }

            await this.page.waitForTimeout(pause);



            // Chance to Dive into a Tweet
            const p = this.normalizeProbabilities(this.config.probabilities);
            if (mathUtils.roll(p.tweetDive)) {
                await this.diveTweet();
            }
        }
    }

    async diveTweet() {
        this.log('[Branch] Tweet Dive (Expanding)...');
        try {
            // Try up to 3 times to find a suitable tweet
            let targetTweet = null;
            for (let attempt = 0; attempt &lt; 3; attempt++) {
                const tweets = this.page.locator('article[data-testid="tweet"]');
                const count = await tweets.count();

                if (count > 0) {
                    for (let i = 0; i &lt; Math.min(count, 10); i++) {
                        const t = tweets.nth(i);
                        const box = await t.boundingBox();
                        // Relaxed bounds: just needs to be somewhat on screen (positive height)
                        // and not WAY down the page (> 1000)
                        if (box &amp;&amp; box.height > 0 &amp;&amp; box.y > -50 &amp;&amp; box.y &lt; 1000) {
                            targetTweet = t;
                            if (Math.random() > 0.4) break; // Random selection
                        }
                    }
                }

                if (targetTweet) break;

                // Not found? Scroll a bit and retry
                this.log('[Dive] No suitable tweets in view. Scrolling...');
                await scrollRandom(this.page, 300, 300);
                await this.page.waitForTimeout(entropy.retryDelay(attempt));
            }

            if (!targetTweet) {
                this.log('No suitable tweets found in viewport after retries. Refreshing Home...');
                // Reset state by going to https://x.com/ (redirects to default feed)
                await this.page.goto('https://x.com/');
                await this.ensureForYouTab();
                return;
            }



            const timeStamp = targetTweet.locator('time').first();
            const textContent = targetTweet.locator('[data-testid="tweetText"]').first();

            let clickTarget = null;
            let parentLink = null;

            if (await textContent.count() > 0 &amp;&amp; await textContent.isVisible()) {
                clickTarget = textContent;
                this.log('[Debug] Targeting tweet text body (Primary).');
            } else if (await timeStamp.count() > 0 &amp;&amp; await timeStamp.isVisible()) {
                parentLink = timeStamp.locator('xpath=./ancestor::a[1]');
                clickTarget = (await parentLink.count() > 0) ? parentLink : timeStamp;
                this.log('[Debug] Targeting tweet permalink/time (Fallback).');
            } else {
                clickTarget = targetTweet;
                this.log('[Debug] Targeting entire tweet card (Last Resort).');
            }

            if (clickTarget) {
                // Ensure the SPECIFIC TARGET is centered to avoid sticky header (120px safety)
                await clickTarget.evaluate(el => el.scrollIntoView({ block: 'center', inline: 'center' }));
                await this.page.waitForTimeout(entropy.scrollSettleTime()); // Wait for scroll alignment

                // ROBUST VIEWPORT &amp; SCROLL CHECK
                let dbgBox = await clickTarget.boundingBox();
                let dbgVP = this.page.viewportSize();

                // Fallback for null viewport
                if (!dbgVP) {
                    try {
                        dbgVP = await this.page.evaluate(() => ({ width: window.innerWidth, height: window.innerHeight }));
                    } catch (e) {
                        dbgVP = { width: 1280, height: 720 };
                    }
                }

                // Verify if actually on screen. If not, force scroll again.
                if (dbgBox &amp;&amp; (dbgBox.y &lt; 80 || dbgBox.y > dbgVP.height - 80)) {
                    this.log(`[Debug] Target off-screen after scroll (y=${Math.round(dbgBox.y)}). Adjusting...`);
                    // Force precise scroll
                    await clickTarget.evaluate(el => {
                        const rect = el.getBoundingClientRect();
                        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                        window.scrollTo({ top: scrollTop + rect.top - 200, behavior: 'auto' });
                    });
                    await this.page.waitForTimeout(entropy.scrollSettleTime());
                    dbgBox = await clickTarget.boundingBox(); // Update box
                }

                this.log(`[Debug] Navigate Target: Box=${dbgBox ? `x:${Math.round(dbgBox.x)},y:${Math.round(dbgBox.y)},w:${Math.round(dbgBox.width)},h:${Math.round(dbgBox.height)}` : 'null'} | VP=${dbgVP ? `${dbgVP.width}x${dbgVP.height}` : 'null'}`);

                this.log(`[Attempt] Ghost Click on Permalink...`);
                // Use new anti-sybil wrapper with retry
                await this.safeHumanClick(clickTarget, 'Tweet Permalink', 3);
            }

            let expanded = false;
            try {
                await this.page.waitForURL('**/status/**', { timeout: 8000 });
                this.log('[Success] Ghost Click navigated to tweet.');
                expanded = true;
            } catch (e) {
                this.log('[Fail] Ghost Click did not navigate. Retrying with NATIVE click...');
                if (clickTarget) {
                    this.log('[Attempt] Native Click (Force)...');
                    await clickTarget.click({ force: true });
                }
                try {
                    await this.page.waitForURL('**/status/**', { timeout: 8000 });
                    this.log('[Success] Native Click navigated to tweet.');
                    expanded = true;
                } catch (e2) {
                    this.log('[Fail] Failed to expand tweet after retry. Aborting dive.');
                    return;
                }
            }

            if (!expanded) return;

            // Read main tweet and open media occasionally
            const readTime = mathUtils.randomInRange(5000, 15000);
            this.log(`[Idle] Reading expanded tweet for ${readTime}ms...`);
            await this.page.waitForTimeout(readTime);

            // Optional open media
            if (mathUtils.roll(0.2)) {
                const media = this.page.locator('[data-testid="tweetPhoto"]').first();
                if (await media.count() > 0 &amp;&amp; await media.isVisible()) {
                    this.log('[Action] Open media viewer');
                    await this.safeHumanClick(media, 'Media Viewer', 3);
                    const viewTime = mathUtils.randomInRange(5000, 12000);
                    this.log(`[Media] Viewing media for ${(viewTime / 1000).toFixed(1)}s...`);
                    await this.page.waitForTimeout(viewTime);
                    // Close media viewer with ESC
                    await this.page.keyboard.press('Escape', { delay: mathUtils.randomInRange(50, 150) });
                    await this.page.waitForTimeout(mathUtils.randomInRange(400, 900));
                }
            }

            // Read replies
            this.log('[Scroll] Reading replies...');
            await scrollRandom(this.page, 300, 600);
            await this.page.waitForTimeout(mathUtils.randomInRange(2000, 4000));

            // Asymmetric return (don't scroll back exactly the same amount)
            await scrollRandom(this.page, 240, 660);
            await this.page.waitForTimeout(mathUtils.randomInRange(1000, 2000));

            const p = this.normalizeProbabilities(this.config.probabilities);

            // Like
            if (mathUtils.roll(p.likeTweetafterDive)) {
                if (this.state.likes >= (this.config.maxLike || 0)) {
                    this.log(`[Limit] Max likes reached (${this.state.likes}/${this.config.maxLike}). Skipping like.`);
                } else {
                    // ROBUST LIKE: Check for "Like" state specifically
                    // "unlike" means it's already liked. "like" means unliked.
                    const likeButton = this.page.locator('button[data-testid="like"][role="button"]').first();
                    const unlikeButton = this.page.locator('button[data-testid="unlike"][role="button"]').first();

                    if (await unlikeButton.isVisible()) {
                        this.log('[Skip] Tweet is ALREADY LIKED.');
                    } else if (await likeButton.count() > 0) {
                        try {
                            this.log('[Action] Scrolling Like button into view...');
                            await likeButton.scrollIntoViewIfNeeded();
                            await this.page.waitForTimeout(mathUtils.randomInRange(500, 1000));

                            // Double check visibility and state
                            if (await likeButton.isVisible()) {
                                // Verify aria-label confirms "Like" action (not "Unlike" or "Remove Like")
                                const label = await likeButton.getAttribute('aria-label') || '';
                                if (label.includes('Unlike')) {
                                    this.log('[Skip] Tweet already liked (aria-label check).');
                                } else {
                                    this.log('Action:  Like');
                                    await this.safeHumanClick(likeButton, 'Like Button', 3);
                                    this.state.likes++;
                                    await this.page.waitForTimeout(mathUtils.randomInRange(2000, 5000));
                                }
                            }
                        } catch (e) {
                            this.log(`[Warn] Failed to scroll/like: ${e.message}`);
                        }
                    }
                }
            }

            // Bookmark (Robust)
            if (mathUtils.roll(p.bookmarkAfterDive)) {
                // Check if already bookmarked (usually has different testid 'removeBookmark' or similar)
                const bm = this.page.locator('button[data-testid="bookmark"]').first();
                const unbm = this.page.locator('button[data-testid="removeBookmark"]').first();

                if (await unbm.isVisible()) {
                    this.log('[Skip] Tweet ALREADY bookmarked.');
                } else if (await bm.isVisible()) {
                    this.log('[Action] Attempting Ghost Click:  Bookmark');
                    try {
                        await this.safeHumanClick(bm, 'Bookmark Button', 3);
                        await this.page.waitForTimeout(entropy.postClickDelay());
                        this.log('[Success] Ghost Click: Bookmark');
                    } catch (e) {
                        this.log(`[Fail] Ghost Click Bookmark: ${e.message}. Fallback to Native.`);
                        try {
                            await bm.click();
                            await this.page.waitForTimeout(entropy.postClickDelay());
                            this.log('[Success] Native Click: Bookmark');
                        } catch (e2) {
                            this.log(`[Fail] Native Click Bookmark also failed: ${e2.message}`);
                        }
                    }
                }
            }



            // Idle after actions
            await this.page.waitForTimeout(mathUtils.randomInRange(1200, 2400));

            // Return Home
            await this.navigateHome();
            await this.page.waitForTimeout(mathUtils.randomInRange(1500, 3000));


        } catch (e) {
            this.log('Dive sequence failed: ' + e.message);
            if (!this.page.url().includes('home')) {
                await this.navigateHome();
            }
        }
    }

    async diveProfile() {
        this.log('[Branch] Inspecting User Profile');
        // Broader selector to catch all links in the tweet header (Avatar, Name, Handle)
        const selector = 'article[data-testid="tweet"] a[href^="/"]';

        // Evaluate all to find valid profile links (exclude /status/, /hashtag/, etc.)
        const validIndices = await this.page.$$eval(selector, (els) => {
            const reserved = ['home', 'explore', 'notifications', 'messages', 'compose', 'settings', 'search', 'i'];
            return els.map((el, i) => {
                let href = el.getAttribute('href');
                if (!href) return -1;

                // Remove trailing slash for checking
                if (href.endsWith('/')) href = href.slice(0, -1);

                const parts = href.split('/').filter(p => p.trim() !== '');

                // Valid profile link: 1 part (e.g. /username)
                // AND not in reserved list
                // AND not containing blocked keywords like status
                if (
                    parts.length === 1 &amp;&amp;
                    !reserved.includes(parts[0].toLowerCase()) &amp;&amp;
                    !href.includes('/status/') &amp;&amp;
                    !href.includes('/hashtag/') &amp;&amp;
                    !href.includes('/cashtag/')
                ) {
                    return i;
                }
                return -1;
            }).filter(i => i !== -1);
        });

        if (validIndices.length > 0) {
            const chosenIndex = validIndices[Math.floor(Math.random() * validIndices.length)];
            const target = this.page.locator(selector).nth(chosenIndex);

            const href = await target.getAttribute('href');
            this.log(`Clicking profile: @${href.replace('/', '')}`);

            // Navigate
            this.log(`[Attempt] Ghost Click on Profile Link...`);
            // Use new anti-sybil wrapper with retry
            await this.safeHumanClick(target, 'Profile Link', 3);
            try {
                // Wait for the URL to contain the user handle (ignoring query params)
                // We use a looser regex check or just wait for loadstate because sometimes href is just /User
                await this.page.waitForLoadState('domcontentloaded');
                await this.page.waitForTimeout(entropy.pageLoadWait());

                // Verify we navigated somewhere relevant
                if (this.page.url().includes(href)) {
                    this.log('[Success] Ghost Click navigated to profile.');
                } else {
                    throw new Error('Url did not change to expected profile.');
                }
            } catch (e) {
                this.log('[Fail] Ghost Click did not navigate. Retrying with NATIVE click...');
                try {
                    // Force click sometimes helps if element is covered
                    await target.click({ force: true });
                    await this.page.waitForLoadState('domcontentloaded');
                    await this.page.waitForTimeout(entropy.pageLoadWait());
                    if (this.page.url().includes(href)) {
                        this.log('[Success] Native Click navigated to profile.');
                    } else {
                        this.log('[Fail] Native click also failed verification. Proceeding anyway.');
                    }
                } catch (e2) {
                    this.log(`[Fail] Native click error: ${e2.message}`);
                }
            }

            // Optional follow (Robust with Retry)
            const p = this.normalizeProbabilities(this.config.probabilities);
            if (mathUtils.roll(p.followOnProfile)) {
                if (this.state.follows >= (this.config.maxFollow || 0)) {
                    this.log(`[Limit] Max follows reached (${this.state.follows}/${this.config.maxFollow}). Skipping follow.`);
                } else {
                    await this.robustFollow('[Profile Follow]');
                }
            }



            // Explore a tab occasionally
            const doTab = mathUtils.roll(0.4);
            if (doTab) {
                const tabs = [
                    { name: 'Tweets', sel: 'div[role="tablist"] > div[role="presentation"]:nth-child(1) a[role="tab"]' }, // 1st tab (Posts)
                    { name: 'Replies', sel: 'a[role="tab"][href$="/with_replies"]' },
                    { name: 'Media', sel: 'a[role="tab"][href$="/media"]' },
                    { name: 'Likes', sel: 'a[role="tab"][href$="/likes"]' },
                ];
                const chosen = tabs[Math.floor(Math.random() * tabs.length)];
                const tab = this.page.locator(chosen.sel).first();
                if (await tab.count() > 0 &amp;&amp; await tab.isVisible()) {
                    this.log(`[Tab] Visiting profile tab: ${chosen.name}`);
                    await this.safeHumanClick(tab, `Profile Tab ${chosen.name}`, 3);
                    await this.page.waitForTimeout(mathUtils.randomInRange(800, 1600));
                    await this.simulateReading();
                }
            }

            this.log('[Navigation] Returning to Home Feed');
            await this.navigateHome();
            await this.page.waitForTimeout(entropy.pageLoadWait());
        } else {
            this.log('No targets found, skipping dive.');
        }
    }

    async navigateHome() {
        this.log('Returning to Home Feed...');

        // 10% chance to use direct URL navigation (User Request)
        if (mathUtils.roll(0.10)) {
            this.log('[Navigation]  Random 10%: Using direct URL navigation.');
            try {
                await this.page.goto('https://x.com/home');
                await this.ensureForYouTab();
                return;
            } catch (e) {
                this.log(`[Navigation] Direct URL failed: ${e.message}. Falling back to click.`);
            }
        }

        try {
            const useHomeIcon = Math.random() &lt; 0.8;
            let targetSelector = useHomeIcon ? '[data-testid="AppTabBar_Home_Link"]' : '[aria-label="X"]';
            let targetName = useHomeIcon ? 'Home Icon' : 'X Logo';
            let target = this.page.locator(targetSelector).first();

            if (!(await target.isVisible().catch(() => false))) {
                this.log(`Preferred nav target (${targetName}) not visible. Switching...`);
                targetSelector = useHomeIcon ? '[aria-label="X"]' : '[data-testid="AppTabBar_Home_Link"]';
                targetName = useHomeIcon ? 'X Logo' : 'Home Icon';
                target = this.page.locator(targetSelector).first();
            }

            if (await target.isVisible()) {
                // First click
                this.log(`[Navigation] Clicking '${targetName}' (1st click for reload)...`);
                await this.safeHumanClick(target, targetName, 3);
                await this.page.waitForTimeout(mathUtils.randomInRange(800, 1500));

                // Second click to ensure fresh content
                this.log(`[Navigation] Clicking '${targetName}' again (2nd click to reload)...`);
                await this.safeHumanClick(target, targetName, 3);
                await this.page.waitForTimeout(mathUtils.randomInRange(500, 1000));

                // Note: "Show X posts" button check is now handled in ensureForYouTab()
                // which is called below after URL navigation completes

                try {
                    await this.page.waitForURL('**/home**', { timeout: 5000 });
                    this.log('[Navigation] Navigate to /home Success.');
                    await this.ensureForYouTab();
                    return;
                } catch (e) {
                    this.log('[Navigation] Ghost click did not trigger nav. Trying native...');
                    await target.click();
                    await this.page.waitForTimeout(mathUtils.randomInRange(800, 1500));
                    await target.click();
                    await this.page.waitForURL('**/home**', { timeout: 5000 });
                    this.log('[Navigation] Native Click navigated to home.');
                    await this.ensureForYouTab();
                    return;
                }
            }
        } catch (e) {
            this.log(`[Navigation] Interaction failed: ${e.message}`);
        }

        this.log('[Navigation] Fallback to direct URL goto.');
        await this.page.goto('https://x.com/home');
        await this.ensureForYouTab();
    }

    async ensureForYouTab() {
        try {
            // Strictly enforce 'For you' tab to avoid empty 'Following' feeds
            const targetText = 'For you';

            // Wait for tablist to load (ensure page is ready)
            try {
                await this.page.waitForSelector('div[role="tablist"]', { state: 'visible', timeout: 5000 });
            } catch (e) {
                this.log('[Tab] Tablist not found within timeout.');
                return;
            }

            const tablist = this.page.locator('div[role="tablist"]').first();

            // Get all tabs (generalized selector)
            const tabs = tablist.locator('[role="tab"]');
            const count = await tabs.count();
            let target = null;

            // 1. Try to find by text content
            for (let i = 0; i &lt; count; i++) {
                const tab = tabs.nth(i);
                const text = await tab.textContent().catch(() => '');
                if (text &amp;&amp; text.trim() === targetText) {
                    target = tab;
                    break;
                }
            }

            // 2. Fallback to index if text not found
            if (!target) {
                this.log(`[Tab] "${targetText}" text not found. Fallback to index.`);
                // Index 0 is "For you"
                const fallbackIndex = 0;
                if (count > fallbackIndex) {
                    target = tabs.nth(fallbackIndex);
                }
            }

            if (!target) {
                this.log(`[Tab] "${targetText}" tab could not be found via text or index.`);
                // Debug: print what we found
                for (let i = 0; i &lt; count; i++) {
                    const t = await tabs.nth(i).textContent().catch(() => 'err');
                    this.log(`[Tab] Found index ${i}: "${t}"`);
                }
                return;
            }

            // Check if already selected
            const isSelected = await target.getAttribute('aria-selected').catch(() => null);
            if (isSelected === 'true') {
                this.log(`[Tab] "${targetText}" is already selected.`);
                return;
            }

            if (await target.isVisible()) {
                this.log(`[Tab] Switching to "${targetText}" tab...`);
                try {
                    await this.safeHumanClick(target, 'For You Tab', 3);
                    await this.page.waitForTimeout(mathUtils.randomInRange(800, 1500));
                } catch (e) {
                    this.log('[Tab] Ghost click failed, trying native...');
                    await target.click();
                }
            }
            
            // After ensuring "For you" tab, check for "Show X posts" button
            // This button appears 2-3 seconds after returning home (per user feedback)
            await this.checkAndClickShowPostsButton();
        } catch (e) {
            this.log(`[Tab] Failed to ensure timeline tab: ${e.message}`);
        }
    }

    /**
     * Check for and click "Show X posts" button that appears when new posts are available
     * This button typically appears 2-3 seconds after returning home and ensuring "For you" tab
     * @returns {Promise&lt;boolean>} true if button was found and clicked, false otherwise
     */
    async checkAndClickShowPostsButton() {
        try {
            // Wait 2-3 seconds for button to appear (as per user feedback)
            this.log('[Posts] Waiting for "Show X posts" button to appear...');
            await this.page.waitForTimeout(mathUtils.randomInRange(2000, 3000));

            // Multiple selector patterns to catch variations:
            // - "Show 34 posts"
            // - "Show 5 posts" 
            // - "Show X new posts"
            const buttonSelectors = [
                // Primary: button with role containing span with "Show" and "posts"
                '[role="button"]:has(span:has-text(/Show\\s+\\d+\\s+posts/i))',
                // Alternative: button containing text "Show" and "posts"
                'button:has-text(/Show\\s+\\d+\\s+posts/i)',
                // Broader match: any element with role button containing "Show" and number
                '[role="button"]:has-text("Show"):has-text(/\\d+/)'
            ];

            let showPostsBtn = null;
            let btnText = '';

            // Try each selector
            for (const selector of buttonSelectors) {
                try {
                    const btn = this.page.locator(selector).first();
                    if (await btn.count() > 0 &amp;&amp; await btn.isVisible()) {
                        const text = await btn.textContent().catch(() => '');
                        // Validate it matches the pattern
                        if (/show\s+\d+\s+post/i.test(text)) {
                            showPostsBtn = btn;
                            btnText = text.trim();
                            break;
                        }
                    }
                } catch (e) {
                    // Continue to next selector
                }
            }

            if (showPostsBtn) {
                this.log(`[Posts] Found "${btnText}" button, clicking to load new posts...`);
                
                // HUMAN-LIKE: Additional pre-click behavior for this specific button
                // 1. Ensure button is in viewport (scroll if needed)
                await showPostsBtn.evaluate(el => el.scrollIntoView({ block: 'center', inline: 'center' }));
                await this.page.waitForTimeout(mathUtils.randomInRange(300, 600));
                
                // 2. Move cursor to vicinity first (not directly on button)
                const box = await showPostsBtn.boundingBox();
                if (box) {
                    const offsetX = mathUtils.randomInRange(-30, 30);
                    const offsetY = mathUtils.randomInRange(-20, 20);
                    await this.ghost.move(box.x + box.width/2 + offsetX, box.y + box.height/2 + offsetY, mathUtils.randomInRange(15, 25));
                    await this.page.waitForTimeout(mathUtils.randomInRange(400, 800));
                }
                
                // 3. Use safeHumanClick for full simulated interaction with retry
                await this.safeHumanClick(showPostsBtn, 'Show Posts Button', 3);
                
                // 3. HUMAN-LIKE: "Reading" the new posts after loading
                this.log('[Posts] Posts loading, simulating reading behavior...');
                const waitTime = mathUtils.randomInRange(1200, 2500);
                await this.page.waitForTimeout(waitTime);
                
                // 4. Scroll down slightly to show the new posts (human-like discovery)
                const scrollVariance = 0.8 + Math.random() * 0.4;
                await scrollRandom(this.page, Math.floor(150 * scrollVariance), Math.floor(250 * scrollVariance));
                await this.page.waitForTimeout(mathUtils.randomInRange(600, 1000));
                
                this.log('[Posts] New posts loaded successfully.');
                return true;
            } else {
                this.log('[Posts] No "Show X posts" button found.');
                return false;
            }
        } catch (error) {
            this.log(`[Posts] Error checking for show posts button: ${error.message}`);
            return false;
        }
    }

    async checkLoginState() {
        try {
            // Check for specific text content indicating logged out state (Relaxed Matching)
            const signedOutText = [
                'Sign in',
                'Sign up with Google',
                'Create account',
                'Join X today',
                'Oops, something went wrong'
            ];

            for (const text of signedOutText) {
                // Removed { exact: true } to be more robust against whitespace/styling
                const element = this.page.getByText(text).first();
                if (await element.isVisible().catch(() => false)) {
                    this.log(`[WARN] Not logged in. Found text: "${text}"`);
                    this.state.consecutiveLoginFailures++;
                    return false;
                }
            }

            // Check for specific login selectors
            const loginSelectors = [
                'a[href*="/login"]',
                'a[href*="/i/flow/login"]',
                '[data-testid="loginButton"]',
                '[data-testid="signupButton"]',
                '[data-testid="google_sign_in_container"]'
            ];

            for (const selector of loginSelectors) {
                if (await this.page.locator(selector).first().isVisible().catch(() => false)) {
                    this.log(`[WARN] Not logged in. Found selector: "${selector}"`);
                    this.state.consecutiveLoginFailures++;
                    return false;
                }
            }

            // Heuristic: If we are supposedly on Home but can't see the primary column or interacting elements
            if (this.page.url().includes('home')) {
                const mainColumn = this.page.locator('[data-testid="primaryColumn"]');
                if (await mainColumn.count() === 0 || !(await mainColumn.isVisible())) {
                    const timeline = this.page.locator('[aria-label="Home timeline"]');
                    if (await timeline.count() === 0) {
                        this.log(`[WARN] Suspected not logged in: Primary Timeline not visible on /home.`);
                        this.state.consecutiveLoginFailures++;
                        return false;
                    }
                }
            }

            // Reset if successful
            this.state.consecutiveLoginFailures = 0;
            return true;
        } catch (e) {
            this.log(`[WARN] checkLoginState failed: ${e.message}`);
            this.state.consecutiveLoginFailures++;
            return false;
        }
    }

    isSessionExpired() {
        if (!this.sessionEndTime) return false;
        return Date.now() > this.sessionEndTime;
    }

    async runSession(cycles = 10, minDurationSec = 0, maxDurationSec = 0) {
        this.log(`Starting Session on ${this.page.url()}`);

        if (minDurationSec > 0 &amp;&amp; maxDurationSec > 0) {
            const durationMs = mathUtils.randomInRange(minDurationSec * 1000, maxDurationSec * 1000);
            this.sessionEndTime = Date.now() + durationMs;
            this.log(`Session Timer Set: ${(durationMs / 1000).toFixed(1)}s (until ${new Date(this.sessionEndTime).toLocaleTimeString()})`);
        } else {
            this.log(`Session Mode: Fixed Cycles (${cycles})`);
        }

        const theme = this.config.theme || 'dark';
        if (theme) {
            this.log(`Enforcing theme: ${theme}`);
            await this.page.emulateMedia({ colorScheme: theme });
        }

        if (!this.page.url().includes('home')) {
            await this.navigateHome();
        }

        // HUMAN-LIKE: Session warmup
        await this.human.sessionStart();

        // Initial Login Check with Retries (3-Strike Rule)
        for (let i = 0; i &lt; 3; i++) {
            const isLoggedIn = await this.checkLoginState();
            if (isLoggedIn) break;

            if (i &lt; 2) {
                const delay = entropy.retryDelay(i, 5000);
                this.log(`[Validation] Login check failed (${i + 1}/3). Retrying in ${(delay / 1000).toFixed(1)}s...`);
                await this.page.waitForTimeout(delay);
            }
        }

        if (this.state.consecutiveLoginFailures >= 3) {
            this.log(' Aborting session: Not logged in (3 consecutive failures).');
            return;
        }


        while (true) {
            // HUMAN-LIKE: Check if should end session based on natural patterns
            const elapsed = Date.now() - this.sessionStart;
            if (this.human.session.shouldEndSession(elapsed)) {
                this.log(` Natural session end reached. Finishing...`);
                break;
            }

            if (this.isSessionExpired()) {
                this.log(` Session Time Limit Reached. Finishing...`);
                break;
            }

            // Check for repeated login failures
            if (this.state.consecutiveLoginFailures >= 3) {
                this.log(` ABORTING: Detected 'Not Logged In' state 3 times consecutively.`);
                break;
            }

            if (!this.sessionEndTime &amp;&amp; this.loopIndex >= cycles) {
                this.log(`Session Cycle Limit Reached (${cycles}). Finishing...`);
                break;
            }

            this.loopIndex += 1;
            this.log(`--- Loop ${this.loopIndex} ${this.sessionEndTime ? '' : `of ${cycles}`} ---`);

            // HUMAN-LIKE: Boredom pause - every 4th cycle, take a random "distraction" break
            if (this.loopIndex % 4 === 0 &amp;&amp; mathUtils.roll(0.25)) {
                await this.human.session.boredomPause(this.page);
            }

            // --- BURST MODE STATE MACHINE ---
            const now = Date.now();
            if (this.state.activityMode === 'BURST') {
                if (now > this.state.burstEndTime) {
                    this.state.activityMode = 'NORMAL';
                    this.log(' Burst Mode Ended. Returning to normal pace.');
                }
            } else if (this.state.activityMode === 'NORMAL') {
                // 10% chance to enter BURST mode (if not fatigue-limited)
                // Only if not already fatigued
                if (!this.isFatigued &amp;&amp; mathUtils.roll(0.10)) {
                    this.state.activityMode = 'BURST';
                    const duration = mathUtils.randomInRange(30000, 60000); // 30-60s burst
                    this.state.burstEndTime = now + duration;
                    this.log(` >>> ENTERING BURST MODE! High intensity for ${(duration / 1000).toFixed(1)}s`);
                }
            }
            // --------------------------------

            await this.simulateReading();
            if (this.isSessionExpired()) break;

            // Decision Logic
            const p = this.normalizeProbabilities(this.config.probabilities);
            const roll = Math.random();
            let cursor = 0;

            if (roll &lt; (cursor += p.refresh)) {
                this.log('[Branch] Refresh Feed');
                this.state.lastRefreshAt = Date.now();
                // Prefer soft refresh via clicking Home
                await this.navigateHome();
                await this.page.waitForTimeout(Math.max(50, mathUtils.gaussian(1500, 600)));
            } else if (roll &lt; (cursor += p.profileDive)) {
                await this.diveProfile();
            } else if (roll &lt; (cursor += p.tweetDive)) {
                await this.diveTweet();
            } else {
                this.log('[Branch] Idle (Staring at screen)');
                // Use profile-configured idle duration (default to old 5s heuristic if missing)
                const idleCfg = this.config.timings.actionSpecific.idle || { mean: 5000, deviation: 2000 };
                const duration = Math.max(1000, mathUtils.gaussian(idleCfg.mean, idleCfg.deviation));
                await this.page.waitForTimeout(duration);
            }

            // Graceful wind-down if under 20s remaining
            if (this.sessionEndTime &amp;&amp; (this.sessionEndTime - Date.now() &lt; 20000)) {
                this.log('Winding down session... Navigating Home and idling briefly.');
                await this.navigateHome();
                await this.page.waitForTimeout(mathUtils.randomInRange(1500, 3000));
                break;
            }

            // HUMAN-LIKE: Cycle complete
            await this.human.cycleComplete();
        }

        // HUMAN-LIKE: Session wrap-up
        await this.human.sessionEnd();
        this.log('Session Complete.');
    }

    async simulateFidget() {
        const fidgetType = mathUtils.roll(0.4) ? 'TEXT_SELECT' : (mathUtils.roll(0.5) ? 'MOUSE_WIGGLE' : 'OVERSHOOT');
        this.log(`[Fidget] Performing ${fidgetType}...`);

        // Save current URL for navigation detection
        const currentUrl = this.page.url();

        try {
            if (fidgetType === 'TEXT_SELECT') {
                // Select random text on page (fidgeting)
                // Fix: Use data-testid="tweetText" which is the standard for tweet body text
                const candidates = await this.page.locator('[data-testid="tweetText"]').all();

                // DEBUG: Log candidate count to diagnose selection failures
                this.log(`[Debug] Found ${candidates.length} text candidates.`);

                if (candidates.length > 0) {
                    // ROBUST SELECTION: Filter for VISIBLE candidates using evaluate (faster &amp; more reliable)
                    const visibleIndices = await this.page.evaluate(() => {
                        const all = document.querySelectorAll('[data-testid="tweetText"]');
                        const valid = [];
                        const vpHeight = window.innerHeight;
                        // const vpWidth = window.innerWidth; // Unused for now

                        for (let i = 0; i &lt; all.length; i++) {
                            const rect = all[i].getBoundingClientRect();
                            // Check vertical visibility with header safety margin (100px)
                            if (rect.top > 100 &amp;&amp; rect.bottom &lt; vpHeight) {
                                // Optional: check if text is long enough
                                if (all[i].innerText.length > 10) {
                                    valid.push(i);
                                }
                            }
                        }
                        return valid;
                    });

                    this.log(`[Debug] Visible &amp; Valid Candidates indices: ${JSON.stringify(visibleIndices)}`);

                    if (visibleIndices.length > 0) {
                        // Pick random valid index
                        const chosenIndex = visibleIndices[Math.floor(Math.random() * visibleIndices.length)];
                        const target = candidates[chosenIndex];
                        const box = await target.boundingBox();

                        // Double check (should be valid per evaluate)
                        if (box) {
                            const text = await target.innerText();
                            const preview = text.substring(0, 20).replace(/\n/g, ' ');
                            this.log(`[Fidget] Selecting text: "${preview}..."`);

                            await this.page.mouse.move(box.x + 10, box.y + 10);
                            await this.page.waitForTimeout(150); // Settle before clicking
                            await this.page.mouse.down();

                            const dragX = mathUtils.randomInRange(100, 300); // Increased min drag to avoid "click" interpretation
                            // Randomize drag speed (steps) for natural feel
                            const dragSteps = mathUtils.randomInRange(20, 50);
                            await this.page.mouse.move(box.x + 10 + dragX, box.y + 10 + mathUtils.randomInRange(-2, 2), { steps: dragSteps });
                            await this.page.waitForTimeout(mathUtils.randomInRange(400, 800)); // Hold longer
                            await this.page.mouse.up();

                            // Natural pause to "read" the selected text (extended for realism)
                            const readDelay = mathUtils.randomInRange(2000, 5000);
                            this.log(`[Fidget] Reading selected text for ${(readDelay / 1000).toFixed(1)}s...`);
                            await this.page.waitForTimeout(readDelay);
                            return; // Done
                        }
                    } else {
                        this.log(`[Fidget] No suitable text found in viewport (Filtered from ${candidates.length} candidates).`);
                    }
                }
            } else if (fidgetType === 'MOUSE_WIGGLE') {
                // Random small movements
                const current = this.ghost.previousPos || { x: 0, y: 0 };
                for (let i = 0; i &lt; 3; i++) {
                    const dx = mathUtils.randomInRange(-20, 20);
                    const dy = mathUtils.randomInRange(-20, 20);
                    await this.page.mouse.move(current.x + dx, current.y + dy, { steps: 3 });
                    await this.page.waitForTimeout(mathUtils.randomInRange(50, 150));
                }
            } else if (fidgetType === 'OVERSHOOT') {
                // Scroll down a bit, then up immediately (simulating missing target)
                await scrollRandom(this.page, 200, 400);

                // Reaction time: Pause to realize we went too far (increased from 100-300ms)
                await this.page.waitForTimeout(mathUtils.randomInRange(800, 1500));

                // Correction scroll (slightly less than overshoot to stay offset)
                await scrollRandom(this.page, 140, 360);

                // SAFETY: Check if we accidentally navigated (OVERSHOOT can trigger clicks)
                await this.page.waitForTimeout(500);
                const newUrl = this.page.url();

                if (newUrl !== currentUrl &amp;&amp; newUrl.includes('/status/')) {
                    // We accidentally navigated to a tweet! Recover automatically.
                    this.log(`[Fidget] Accidental navigation detected! Recovering to Home...`);
                    await this.navigateHome();
                    await this.page.waitForTimeout(mathUtils.randomInRange(2000, 4000));
                }
            }

            // General pause after other fidgets
            await this.page.waitForTimeout(mathUtils.randomInRange(1000, 3000));

        } catch (e) {
            // Fidgeting shouldn't crash the session
            this.log(`[Fidget] Error: ${e.message}`);
        }
    }
    async humanType(element, text) {
        if (!element || !text) return;
        try {
            await element.focus();
            for (const char of text) {
                await this.page.keyboard.type(char, { delay: mathUtils.randomInRange(50, 150) });
                // Occasional pause
                if (mathUtils.roll(0.05)) {
                    await this.page.waitForTimeout(mathUtils.randomInRange(300, 800));
                }
            }
        } catch (e) {
            this.log(`[Warn] humanType failed: ${e.message}. Fallback to fill.`);
            await element.fill(text);
        }
    }

    /**
     * Posts a new tweet with human-like interactions.
     * @param {string} text - The content to tweet
     */
    async postTweet(text) {
        if (!text) return;
        this.log(`[postTweet]  Initiating New Tweet: "${text.substring(0, 30)}..."`);

        try {
            // 1. Open Composer
            // Try keyboard shortcut 'N' first (20% chance)
            let composerOpened = false;

            if (mathUtils.roll(0.2)) {
                this.log('[postTweet] Pressing "N" to open composer...');
                await this.page.keyboard.press('n');
                try {
                    await this.page.waitForSelector('[data-testid="tweetTextarea_0"]', { timeout: 3000 });
                    composerOpened = true;
                    this.log('[postTweet] Composer opened via shortcut.');
                } catch {
                    this.log('[Warn] Shortcut "N" failed. Falling back to UI click.');
                }
            }

            // Fallback to UI Button
            if (!composerOpened) {
                const postBtn = this.page.locator('[data-testid="SideNav_NewTweet_Button"]').first();
                if (await postBtn.isVisible()) {
                    await this.safeHumanClick(postBtn, 'New Tweet Button', 3);
                    await this.page.waitForSelector('[data-testid="tweetTextarea_0"]', { timeout: 5000 });
                } else {
                    this.log('[Error]  New Tweet button not found.');
                    return;
                }
            }

            // 2. Type Text
            const textarea = this.page.locator('[data-testid="tweetTextarea_0"]').first();
            await this.page.waitForTimeout(mathUtils.randomInRange(500, 1500)); // Pause before typing

            this.log('[postTweet]  Typing tweet content...');
            await this.humanType(textarea, text);
            await this.page.waitForTimeout(mathUtils.randomInRange(1000, 2000)); // Review pause

            // 3. Click Post
            const sendBtn = this.page.locator('[data-testid="tweetButton"]').first();
            await this.safeHumanClick(sendBtn, 'Post Button', 3);

            this.log(`[postTweet]  Tweet sent successfully: "${text}"`);
            this.state.engagements++;
            this.state.tweets++;
            await this.page.waitForTimeout(mathUtils.randomInRange(2000, 4000)); // Wait for post animation

        } catch (e) {
            this.log(`[Error] Failed to post tweet: ${e.message}`);
        }
    }
}</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.5</a> on Sat Feb 14 2026 11:39:38 GMT+0700 (Indochina Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
