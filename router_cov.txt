
[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/My Script/auto-ai[39m
      [2mCoverage enabled with [22m[33mv8[39m


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mC:/My Script/auto-ai[39m
      [2mCoverage enabled with [22m[33mv8[39m

[90mstdout[2m | tests/unit/free-api-router.test.js
[22m[39mâœ… MaxListeners increased to 50

[90mstdout[2m | tests/unit/free-api-router.test.js
[22m[39mâœ… MaxListeners increased to 50

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mConstructor[2m > [22m[2mshould initialize with custom options
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session browser1:task1 -> API Key 2/2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: browser1:task1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 2, Selected: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=30000ms, quick=10000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 2 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mConstructor[2m > [22m[2mshould initialize with custom options
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session browser1:task1 -> API Key 2/2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: browser1:task1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 2, Selected: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=30000ms, quick=10000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 2 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mConstructor[2m > [22m[2mshould select API key based on session hash
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session browser1:task1 -> API Key 2/3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: browser1:task1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 3, Selected: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mConstructor[2m > [22m[2mshould select API key based on session hash
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session browser1:task1 -> API Key 2/3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: browser1:task1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 3, Selected: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mConstructor[2m > [22m[2mshould initialize modules when enabled
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mConstructor[2m > [22m[2mshould initialize modules when enabled
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2msetTask[2m > [22m[2mshould update browserId and taskId
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session changed: old-browser:old-task -> new-browser:new-task[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m No API keys configured[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2msetTask[2m > [22m[2mshould update browserId and taskId
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session changed: old-browser:old-task -> new-browser:new-task[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m No API keys configured[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_parseProxy[2m > [22m[2mshould return null for invalid format
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Invalid proxy format: invalid[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_parseProxy[2m > [22m[2mshould return null for invalid format
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Invalid proxy format: invalid[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould return cached response on dedupe hit
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Dedupe hit, returning cached response[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould return cached response on dedupe hit
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Dedupe hit, returning cached response[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould make successful API call
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould make successful API call
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould make successful API call
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(13 chars)[0m[0m: test response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould make successful API call
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(13 chars)[0m[0m: test response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould make successful API call
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould make successful API call
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould handle API error with rate limiting
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould handle API error with rate limiting
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould handle network error gracefully
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould handle network error gracefully
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould track stats correctly
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould track stats correctly
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould track stats correctly
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould track stats correctly
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould track stats correctly
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mprocessRequest[2m > [22m[2mshould track stats correctly
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_tryModelWithKey[2m > [22m[2mshould select proxy and call appropriate method
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_tryModelWithKey[2m > [22m[2mshould select proxy and call appropriate method
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect[2m > [22m[2mshould make direct API call
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect[2m > [22m[2mshould make direct API call
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect[2m > [22m[2mshould make direct API call
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(15 chars)[0m[0m: direct response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect[2m > [22m[2mshould make direct API call
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(15 chars)[0m[0m: direct response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect[2m > [22m[2mshould handle timeout
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect[2m > [22m[2mshould handle timeout
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect[2m > [22m[2mshould handle non-ok response
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect[2m > [22m[2mshould handle non-ok response
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould handle empty messages array
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould handle empty messages array
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould handle empty messages array
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould handle empty messages array
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould handle empty messages array
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 618642e2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould handle empty messages array
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 618642e2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould use default values for optional params
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould use default values for optional params
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould use default values for optional params
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould use default values for optional params
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould use default values for optional params
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError handling[2m > [22m[2mshould use default values for optional params
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle missing API keys gracefully
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m No API keys configured[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 0, Selected: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to anthropic/claude-3.5-sonnet:free[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle missing API keys gracefully
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m No API keys configured[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 0, Selected: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to anthropic/claude-3.5-sonnet:free[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle missing API keys gracefully
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model anthropic/claude-3.5-sonnet:free failed: Cannot read properties of undefined [95m(reading 'ok')[0m[33m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m anthropic/claude-3.5-sonnet:free failure [95m(1/1, error: Cannot read properties of undefined (reading 'ok')[0m[0m...)[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle missing API keys gracefully
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model anthropic/claude-3.5-sonnet:free failed: Cannot read properties of undefined [95m(reading 'ok')[0m[33m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m anthropic/claude-3.5-sonnet:free failure [95m(1/1, error: Cannot read properties of undefined (reading 'ok')[0m[0m...)[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle fallback models when primary fails
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model primary/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=primary/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to primary/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle fallback models when primary fails
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model primary/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=primary/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to primary/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle fallback models when primary fails
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model primary/model failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m primary/model::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model fallback/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=fallback/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to fallback/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle fallback models when primary fails
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model primary/model failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m primary/model::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model fallback/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=fallback/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to fallback/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle fallback models when primary fails
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(17 chars)[0m[0m: fallback response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle fallback models when primary fails
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(17 chars)[0m[0m: fallback response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle fallback models when primary fails
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m fallback/model::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 6127155[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould handle fallback models when primary fails
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m fallback/model::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 6127155[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould track circuit breaker state
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Circuit open for test/model, skipping[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEdge cases[2m > [22m[2mshould track circuit breaker state
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Circuit open for test/model, skipping[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 5 models [95m(shuffled)[0m[0m - 2 tested working + 3 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model config1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=config1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to config1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 5 models [95m(shuffled)[0m[0m - 2 tested working + 3 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model config1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=config1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to config1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m config1::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -61bda11[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m config1::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -61bda11[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 3 tested working + 0 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model working3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=working3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to working3[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 3 tested working + 0 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model working3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=working3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to working3[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m working3::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 609d46fb[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading - Working Models < 3[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m working3::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 609d46fb[0m

 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mConstructor[2m > [22mshould initialize with default values when disabled[32m 13[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mConstructor[2m > [22mshould initialize with custom options[32m 20[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mConstructor[2m > [22mshould select API key based on session hash[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mConstructor[2m > [22mshould initialize modules when enabled[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_hash[2m > [22mshould return consistent hash for same string[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_hash[2m > [22mshould return different hash for different strings[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22msetTask[2m > [22mshould update browserId and taskId[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22msetTask[2m > [22mshould not change session if values are same[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_selectRequestProxy[2m > [22mshould return null when proxy is disabled[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_selectRequestProxy[2m > [22mshould return null when proxy list is empty[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_selectRequestProxy[2m > [22mshould return a proxy from the list when enabled[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_parseProxy[2m > [22mshould return null for empty string[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_parseProxy[2m > [22mshould return null for null input[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_parseProxy[2m > [22mshould parse proxy with host and port only[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_parseProxy[2m > [22mshould parse proxy with credentials[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_parseProxy[2m > [22mshould return null for invalid format[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_maskKey[2m > [22mshould return null for null key[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_maskKey[2m > [22mshould return *** for short key[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_maskKey[2m > [22mshould mask long key properly[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mprocessRequest[2m > [22mshould return error when not enabled[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mprocessRequest[2m > [22mshould return cached response on dedupe hit[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mprocessRequest[2m > [22mshould make successful API call[32m 5[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mprocessRequest[2m > [22mshould handle API error with rate limiting[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mprocessRequest[2m > [22mshould handle network error gracefully[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mprocessRequest[2m > [22mshould track stats correctly[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_tryModelWithKey[2m > [22mshould select proxy and call appropriate method[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callDirect[2m > [22mshould make direct API call[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callDirect[2m > [22mshould handle timeout[32m 14[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callDirect[2m > [22mshould handle non-ok response[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mError handling[2m > [22mshould handle empty messages array[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mError handling[2m > [22mshould use default values for optional params[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mgetStats[2m > [22mshould return stats object[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mEdge cases[2m > [22mshould handle missing API keys gracefully[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mEdge cases[2m > [22mshould handle fallback models when primary fails[32m 4[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mEdge cases[2m > [22mshould track circuit breaker state[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel Cascading - Working Models < 3[2m > [22mshould add from config when working models < 3[32m 3[2mms[22m[39m
[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Edge Cases[2m > [22m[2mshould handle timeout in proxy call
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=1ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Edge Cases[2m > [22m[2mshould handle timeout in proxy call
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=1ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Handling[2m > [22m[2mshould wrap error when error does not have name/code
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Handling[2m > [22m[2mshould wrap error when error does not have name/code
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Handling[2m > [22m[2mshould rethrow AppError when error has name and code
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Handling[2m > [22m[2mshould rethrow AppError when error has name and code
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetSessionInfo - Different Configurations[2m > [22m[2mshould return correct info when proxy disabled
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session browser1:task1 -> API Key 2/2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: browser1:task1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 2, Selected: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetSessionInfo - Different Configurations[2m > [22m[2mshould return correct info when proxy disabled
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session browser1:task1 -> API Key 2/2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: browser1:task1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 2, Selected: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetSessionInfo - Different Configurations[2m > [22m[2mshould return correct info with no fallback models
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session browser1:task1 -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: browser1:task1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetSessionInfo - Different Configurations[2m > [22m[2mshould return correct info with no fallback models
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session browser1:task1 -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: browser1:task1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetSessionInfo - Different Configurations[2m > [22m[2mshould return correct info with no API keys
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m No API keys configured[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 0, Selected: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetSessionInfo - Different Configurations[2m > [22m[2mshould return correct info with no API keys
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m No API keys configured[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 0, Selected: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle empty working array in test results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to configured1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle empty working array in test results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to configured1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle empty working array in test results
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle empty working array in test results
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle empty working array in test results
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m configured1::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -6655e31[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle empty working array in test results
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m configured1::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -6655e31[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle testResults with no working property
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to configured1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle testResults with no working property
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=configured1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to configured1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle testResults with no working property
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle testResults with no working property
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle testResults with no working property
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m configured1::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -6655e31[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional Cascading Edge Cases[2m > [22m[2mshould handle testResults with no working property
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m configured1::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -6655e31[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle response with empty content but reasoning_content
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle response with empty content but reasoning_content
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle response with empty content but reasoning_content
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m âš ï¸ Content empty but reasoning_content has 14 chars - using reasoning_content[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(14 chars)[0m[0m: reasoning text...[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Reasoning content excluded by API [95m(14 chars)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle response with empty content but reasoning_content
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m âš ï¸ Content empty but reasoning_content has 14 chars - using reasoning_content[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(14 chars)[0m[0m: reasoning text...[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Reasoning content excluded by API [95m(14 chars)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle response with empty content but reasoning_content
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle response with empty content but reasoning_content
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle completely empty response
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle completely empty response
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle completely empty response
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m âš ï¸ EMPTY RESPONSE from model test/model[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Full API Response: {
  [93m"choices"[0m[33m: [
    {
      [93m"message"[0m[33m: {
        [93m"content"[0m[33m: [93m""[0m[33m
      }
    }
  ]
}[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Message object: {
  [93m"content"[0m[33m: [93m""[0m[33m
}[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m All choices: [
  {
    [93m"message"[0m[33m: {
      [93m"content"[0m[33m: [93m""[0m[33m
    }
  }
][0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle completely empty response
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m âš ï¸ EMPTY RESPONSE from model test/model[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Full API Response: {
  [93m"choices"[0m[33m: [
    {
      [93m"message"[0m[33m: {
        [93m"content"[0m[33m: [93m""[0m[33m
      }
    }
  ]
}[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Message object: {
  [93m"content"[0m[33m: [93m""[0m[33m
}[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m All choices: [
  {
    [93m"message"[0m[33m: {
      [93m"content"[0m[33m: [93m""[0m[33m
    }
  }
][0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle completely empty response
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Not caching empty response[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty Response Handling[2m > [22m[2mshould handle completely empty response
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Not caching empty response[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould fallback to direct when proxy fails and fallbackToDirect is enabled
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould fallback to direct when proxy fails and fallbackToDirect is enabled
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould fallback to direct when proxy fails and fallbackToDirect is enabled
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Proxy Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Proxy Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy failed, trying direct connection...[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould fallback to direct when proxy fails and fallbackToDirect is enabled
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Proxy Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Proxy Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy failed, trying direct connection...[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould fallback to direct when proxy fails and fallbackToDirect is enabled
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(14 chars)[0m[0m: direct success...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould fallback to direct when proxy fails and fallbackToDirect is enabled
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(14 chars)[0m[0m: direct success...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould fallback to direct when proxy fails and fallbackToDirect is enabled
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/2, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould fallback to direct when proxy fails and fallbackToDirect is enabled
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/2, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould not fallback to direct when fallbackToDirect is disabled
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould not fallback to direct when fallbackToDirect is disabled
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould not fallback to direct when fallbackToDirect is disabled
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Proxy Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Proxy Error...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback from Proxy[2m > [22m[2mshould not fallback to direct when fallbackToDirect is disabled
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Proxy Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Proxy Error...)[0m[0m[0m

 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel Cascading - Working Models < 3[2m > [22mshould not add from config when working models >= 3[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mRate Limited Model Tracking[2m > [22mshould track multiple models getting rate limited in one request[32m 32[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mRate Limited Model Tracking[2m > [22mshould add server errors to rateLimitedModels[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Edge Cases[2m > [22mshould handle createProxyAgent throwing[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Edge Cases[2m > [22mshould handle httpAgent.getAgent() returning null[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Edge Cases[2m > [22mshould handle timeout in proxy call[32m 34[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callDirect Error Handling[2m > [22mshould wrap error when error does not have name/code[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callDirect Error Handling[2m > [22mshould rethrow AppError when error has name and code[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mgetSessionInfo - Different Configurations[2m > [22mshould return correct info when proxy disabled[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mgetSessionInfo - Different Configurations[2m > [22mshould return correct info with no fallback models[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mgetSessionInfo - Different Configurations[2m > [22mshould return correct info with no API keys[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAdditional Cascading Edge Cases[2m > [22mshould handle empty working array in test results[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAdditional Cascading Edge Cases[2m > [22mshould handle testResults with no working property[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mEmpty Response Handling[2m > [22mshould handle response with empty content but reasoning_content[32m 4[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mEmpty Response Handling[2m > [22mshould handle completely empty response[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mDirect Fallback from Proxy[2m > [22mshould fallback to direct when proxy fails and fallbackToDirect is enabled[32m 4[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mDirect Fallback from Proxy[2m > [22mshould not fallback to direct when fallbackToDirect is disabled[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mMultiple 429 Rate Limiting[2m > [22mshould track rate limited models when 429 occurs[32m 1[2mms[22m[39m
[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mCircuit Breaker and Rate Limit Exhaustion[2m > [22m[2mshould track circuit breaker opens in stats
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Circuit open for model1, skipping[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Circuit open for model2, skipping[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mCircuit Breaker and Rate Limit Exhaustion[2m > [22m[2mshould track circuit breaker opens in stats
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Circuit open for model1, skipping[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Circuit open for model2, skipping[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Error Scenarios[2m > [22m[2mshould handle proxy timeout
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=1ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Error Scenarios[2m > [22m[2mshould handle proxy timeout
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=1ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Error Scenarios[2m > [22m[2mshould handle proxy non-ok response
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Error Scenarios[2m > [22m[2mshould handle proxy non-ok response
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Error Scenarios[2m > [22m[2mshould handle proxy response with reasoning_content
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Error Scenarios[2m > [22m[2mshould handle proxy response with reasoning_content
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Error Scenarios[2m > [22m[2mshould handle proxy response with reasoning_content
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m âš ï¸ Content empty but reasoning_content has 15 chars via proxy - using reasoning_content[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(15 chars)[0m[0m: proxy reasoning...[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Reasoning content excluded by API [95m(15 chars)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Error Scenarios[2m > [22m[2mshould handle proxy response with reasoning_content
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m âš ï¸ Content empty but reasoning_content has 15 chars via proxy - using reasoning_content[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(15 chars)[0m[0m: proxy reasoning...[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Reasoning content excluded by API [95m(15 chars)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Wrapping[2m > [22m[2mshould wrap error when error does not have name/code properties
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Wrapping[2m > [22m[2mshould wrap error when error does not have name/code properties
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Wrapping[2m > [22m[2mshould rethrow AppError when error has name and code
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Wrapping[2m > [22m[2mshould rethrow AppError when error has name and code
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 5 models [95m(shuffled)[0m[0m - 2 tested working + 3 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to working2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 5 models [95m(shuffled)[0m[0m - 2 tested working + 3 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to working2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m working2::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -33a7280[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould add from config when working models < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m working2::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -33a7280[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 3 tested working + 0 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to working1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 3 tested working + 0 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to working1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m working1::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 381468f9[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading with Shuffle[2m > [22m[2mshould not add from config when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m working1::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 381468f9[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetModelsInfo[2m > [22m[2mshould return models info with test results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetModelsInfo[2m > [22m[2mshould return models info with test results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetModelsInfo[2m > [22m[2mshould return models info without test results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetModelsInfo[2m > [22m[2mshould return models info without test results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2msyncWithHelper[2m > [22m[2mshould sync with helper when helper has results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: old-primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Synced with helper: primary=model1, fallbacks=2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2msyncWithHelper[2m > [22m[2mshould sync with helper when helper has results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: old-primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Synced with helper: primary=model1, fallbacks=2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2msyncWithHelper[2m > [22m[2mshould return false when helper is null
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2msyncWithHelper[2m > [22m[2mshould return false when helper is null
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2msyncWithHelper[2m > [22m[2mshould return false when helper has no working models
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2msyncWithHelper[2m > [22m[2mshould return false when helper has no working models
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mrefreshRateLimits[2m > [22m[2mshould refresh rate limits when sessionApiKey exists
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mrefreshRateLimits[2m > [22m[2mshould refresh rate limits when sessionApiKey exists
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mrefreshRateLimits[2m > [22m[2mshould return null when no sessionApiKey
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m No API keys configured[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 0, Selected: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mrefreshRateLimits[2m > [22m[2mshould return null when no sessionApiKey
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m No API keys configured[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 0, Selected: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mresetStats[2m > [22m[2mshould reset all stats and module states
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[circuit-breaker.js][0m[0m[0m[33m[CircuitBreaker][0m[0m Reset all circuits[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[rate-limit-tracker.js][0m[0m[0m[33m[RateLimitTracker][0m[0m Cache cleared[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cache cleared[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m Reset all stats[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[api-key-timeout-tracker.js][0m[0m[0m[33m[ApiKeyTimeoutTracker][0m[0m Reset all stats[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m All stats reset[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mresetStats[2m > [22m[2mshould reset all stats and module states
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[circuit-breaker.js][0m[0m[0m[33m[CircuitBreaker][0m[0m Reset all circuits[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[rate-limit-tracker.js][0m[0m[0m[33m[RateLimitTracker][0m[0m Cache cleared[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cache cleared[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m Reset all stats[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[api-key-timeout-tracker.js][0m[0m[0m[33m[ApiKeyTimeoutTracker][0m[0m Reset all stats[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m All stats reset[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2misReady[2m > [22m[2mshould return true when enabled with API key
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2misReady[2m > [22m[2mshould return true when enabled with API key
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2misReady[2m > [22m[2mshould return false when no API keys
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m No API keys configured[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 0, Selected: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2misReady[2m > [22m[2mshould return false when no API keys
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m No API keys configured[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 0, Selected: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetDetailedStats[2m > [22m[2mshould return detailed stats including best model
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mgetDetailedStats[2m > [22m[2mshould return detailed stats including best model
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould execute shuffle loop when working models >= 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 3 tested working + 0 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to working2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould execute shuffle loop when working models >= 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 3 tested working + 0 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to working2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould execute shuffle loop when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould execute shuffle loop when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould execute shuffle loop when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m working2::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -33a7280[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould execute shuffle loop when working models >= 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m working2::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -33a7280[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould add only unique models from config when working < 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 1 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 1 tested working + 2 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to working2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould add only unique models from config when working < 3
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: working1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 1 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 1 tested working + 2 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=working2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to working2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould add only unique models from config when working < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould add only unique models from config when working < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould add only unique models from config when working < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m working2::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -33a7280[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAdditional processRequest Edge Cases[2m > [22m[2mshould add only unique models from config when working < 3
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m working2::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -33a7280[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Additional Edge Cases[2m > [22m[2mshould handle timeout in proxy call with AbortError
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=10ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Additional Edge Cases[2m > [22m[2mshould handle timeout in proxy call with AbortError
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=10ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mServer Errors Adding to Rate Limited Models[2m > [22mshould add 500 error to rateLimitedModels[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mServer Errors Adding to Rate Limited Models[2m > [22mshould add 504 error to rateLimitedModels[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mCircuit Breaker and Rate Limit Exhaustion[2m > [22mshould track circuit breaker opens in stats[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Error Scenarios[2m > [22mshould handle createProxyAgent throwing error[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Error Scenarios[2m > [22mshould handle httpAgent.getAgent() returning null[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Error Scenarios[2m > [22mshould handle proxy timeout[32m 26[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Error Scenarios[2m > [22mshould handle proxy non-ok response[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Error Scenarios[2m > [22mshould handle proxy response with reasoning_content[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callDirect Error Wrapping[2m > [22mshould wrap error when error does not have name/code properties[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callDirect Error Wrapping[2m > [22mshould rethrow AppError when error has name and code[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel Cascading with Shuffle[2m > [22mshould add from config when working models < 3[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel Cascading with Shuffle[2m > [22mshould not add from config when working models >= 3[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mgetModelsInfo[2m > [22mshould return models info with test results[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mgetModelsInfo[2m > [22mshould return models info without test results[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22msyncWithHelper[2m > [22mshould sync with helper when helper has results[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22msyncWithHelper[2m > [22mshould return false when helper is null[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22msyncWithHelper[2m > [22mshould return false when helper has no working models[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mrefreshRateLimits[2m > [22mshould refresh rate limits when sessionApiKey exists[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mrefreshRateLimits[2m > [22mshould return null when no sessionApiKey[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mresetStats[2m > [22mshould reset all stats and module states[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22misReady[2m > [22mshould return true when enabled with API key[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22misReady[2m > [22mshould return false when not enabled[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22misReady[2m > [22mshould return false when no API keys[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mgetDetailedStats[2m > [22mshould return detailed stats including best model[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mgetSharedHelper and setSharedHelper[2m > [22mshould get and set shared helper[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAdditional processRequest Edge Cases[2m > [22mshould execute shuffle loop when working models >= 3[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAdditional processRequest Edge Cases[2m > [22mshould add only unique models from config when working < 3[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAdditional processRequest Edge Cases[2m > [22mshould track all 429 errors in rateLimitedModels for same request[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAdditional processRequest Edge Cases[2m > [22mshould add 500, 502, 503, 504 to rateLimitedModels[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAdditional processRequest Edge Cases[2m > [22mshould skip models in circuit breaker[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAdditional processRequest Edge Cases[2m > [22mshould skip rate limit exhausted keys and track stats[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Additional Edge Cases[2m > [22mshould throw when createProxyAgent throws[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Additional Edge Cases[2m > [22mshould throw when httpAgent is null[32m 0[2mms[22m[39m
[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Additional Edge Cases[2m > [22m[2mshould handle proxy fetch network error
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callThroughProxy Additional Edge Cases[2m > [22m[2mshould handle proxy fetch network error
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Wrapping Edge Cases[2m > [22m[2mshould wrap plain error without name/code
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Wrapping Edge Cases[2m > [22m[2mshould wrap plain error without name/code
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Wrapping Edge Cases[2m > [22m[2mshould wrap error with empty string name
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2m_callDirect Error Wrapping Edge Cases[2m > [22m[2mshould wrap error with empty string name
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould use configured models when no test results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 3 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model primary1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=primary1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to primary1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould use configured models when no test results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 3 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model primary1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=primary1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to primary1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould use configured models when no test results
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould use configured models when no test results
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould use configured models when no test results
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m primary1::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4a132148[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould use configured models when no test results
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m primary1::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4a132148[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould handle working array with length 0
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: config1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model config1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=config1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to config1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould handle working array with length 0
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: config1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model config1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=config1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to config1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould handle working array with length 0
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould handle working array with length 0
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould handle working array with length 0
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m config1::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -61bda11[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould handle working array with length 0
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m config1::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -61bda11[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould filter out duplicate models when adding from config
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model3[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould filter out duplicate models when adding from config
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model3[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould filter out duplicate models when adding from config
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould filter out duplicate models when adding from config
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould filter out duplicate models when adding from config
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model3::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -2721d53[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel Cascading Edge Cases[2m > [22m[2mshould filter out duplicate models when adding from config
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model3::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -2721d53[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models fail with circuit open
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 2 models [95m(shuffled)[0m[0m - 2 tested working + 0 from config[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Circuit open for model1, skipping[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Circuit open for model2, skipping[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models fail with circuit open
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 2 models [95m(shuffled)[0m[0m - 2 tested working + 0 from config[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Circuit open for model1, skipping[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Circuit open for model2, skipping[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models get rate limited
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models get rate limited
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models get rate limited
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model2 failed: Rate Limited[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key failure [95m(1/1, error: Rate Limited...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 2 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models get rate limited
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model2 failed: Rate Limited[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key failure [95m(1/1, error: Rate Limited...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 2 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models get rate limited
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model1 failed: Rate Limited[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key failure [95m(1/1, error: Rate Limited...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 2/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 3/3: Trying model model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model3[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models get rate limited
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model1 failed: Rate Limited[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key failure [95m(1/1, error: Rate Limited...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 2/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 3/3: Trying model model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model3[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models get rate limited
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model3 failed: Rate Limited[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model3::test-key failure [95m(1/1, error: Rate Limited...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models get rate limited
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model3 failed: Rate Limited[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model3::test-key failure [95m(1/1, error: Rate Limited...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models fail with server errors
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 2 models [95m(shuffled)[0m[0m - 2 tested working + 0 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models fail with server errors
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 2 models [95m(shuffled)[0m[0m - 2 tested working + 0 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models fail with server errors
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model2 failed: Server Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key failure [95m(1/1, error: Server Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models fail with server errors
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model2 failed: Server Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key failure [95m(1/1, error: Server Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models fail with server errors
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model1 failed: Server Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key failure [95m(1/1, error: Server Error...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAll Models Exhausted Scenarios[2m > [22m[2mshould return exhausted error when all models fail with server errors
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model1 failed: Server Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key failure [95m(1/1, error: Server Error...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback Error Paths[2m > [22m[2mshould handle proxy fallback to direct when both fail
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback Error Paths[2m > [22m[2mshould handle proxy fallback to direct when both fail
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback Error Paths[2m > [22m[2mshould handle proxy fallback to direct when both fail
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model2 failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy failed, trying direct connection...[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback Error Paths[2m > [22m[2mshould handle proxy fallback to direct when both fail
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model2 failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy failed, trying direct connection...[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate Limit Warning Status[2m > [22m[2mshould continue when rate limit status is warning
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 2 models [95m(shuffled)[0m[0m - 2 tested working + 0 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate Limit Warning Status[2m > [22m[2mshould continue when rate limit status is warning
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 2 models [95m(shuffled)[0m[0m - 2 tested working + 0 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate Limit Warning Status[2m > [22m[2mshould continue when rate limit status is warning
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate Limit Warning Status[2m > [22m[2mshould continue when rate limit status is warning
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate Limit Warning Status[2m > [22m[2mshould continue when rate limit status is warning
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4499bbc2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate Limit Warning Status[2m > [22m[2mshould continue when rate limit status is warning
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4499bbc2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback Error Paths[2m > [22m[2mshould handle proxy fallback to direct when both fail
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback Error Paths[2m > [22m[2mshould handle proxy fallback to direct when both fail
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy enabled: 1 proxies[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=proxy1:8080[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback Error Paths[2m > [22m[2mshould handle proxy fallback to direct when both fail
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy failed, trying direct connection...[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDirect Fallback Error Paths[2m > [22m[2mshould handle proxy fallback to direct when both fail
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Proxy failed, trying direct connection...[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mWarning Status in Response[2m > [22m[2mshould include warningStatus in response
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mWarning Status in Response[2m > [22m[2mshould include warningStatus in response
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mWarning Status in Response[2m > [22m[2mshould include warningStatus in response
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mWarning Status in Response[2m > [22m[2mshould include warningStatus in response
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mWarning Status in Response[2m > [22m[2mshould include warningStatus in response
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -4faab33[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mWarning Status in Response[2m > [22m[2mshould include warningStatus in response
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -4faab33[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with usage data[2m > [22m[2mshould track usage when present in response
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with usage data[2m > [22m[2mshould track usage when present in response
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Only 2 working models from tester, adding more from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Using 3 models [95m(shuffled)[0m[0m - 2 tested working + 1 from config[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with usage data[2m > [22m[2mshould track usage when present in response
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with usage data[2m > [22m[2mshould track usage when present in response
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with usage data[2m > [22m[2mshould track usage when present in response
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with usage data[2m > [22m[2mshould track usage when present in response
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty configured models array[2m > [22m[2mshould handle empty configured models
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to anthropic/claude-3.5-sonnet:free[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty configured models array[2m > [22m[2mshould handle empty configured models
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=anthropic/claude-3.5-sonnet:free[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to anthropic/claude-3.5-sonnet:free[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty configured models array[2m > [22m[2mshould handle empty configured models
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model anthropic/claude-3.5-sonnet:free failed: Cannot read properties of undefined [95m(reading 'ok')[0m[33m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m anthropic/claude-3.5-sonnet:free::test-key failure [95m(1/1, error: Cannot read properties of undefined (reading 'ok')[0m[0m...)[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mEmpty configured models array[2m > [22m[2mshould handle empty configured models
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model anthropic/claude-3.5-sonnet:free failed: Cannot read properties of undefined [95m(reading 'ok')[0m[33m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m anthropic/claude-3.5-sonnet:free::test-key failure [95m(1/1, error: Cannot read properties of undefined (reading 'ok')[0m[0m...)[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mMultiple fallback models with mixed results[2m > [22m[2mshould try multiple fallbacks until success
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 3 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mMultiple fallback models with mixed results[2m > [22m[2mshould try multiple fallbacks until success
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 3 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mMultiple fallback models with mixed results[2m > [22m[2mshould try multiple fallbacks until success
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model1 failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 2 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mMultiple fallback models with mixed results[2m > [22m[2mshould try multiple fallbacks until success
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model1 failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 2 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mMultiple fallback models with mixed results[2m > [22m[2mshould try multiple fallbacks until success
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model2 failed: Rate Limited[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key failure [95m(1/1, error: Rate Limited...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 2/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 3/3: Trying model model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model3[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mMultiple fallback models with mixed results[2m > [22m[2mshould try multiple fallbacks until success
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model2 failed: Rate Limited[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key failure [95m(1/1, error: Rate Limited...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 2/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 3/3: Trying model model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model3[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model3[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mMultiple fallback models with mixed results[2m > [22m[2mshould try multiple fallbacks until success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(7 chars)[0m[0m: success...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mMultiple fallback models with mixed results[2m > [22m[2mshould try multiple fallbacks until success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(7 chars)[0m[0m: success...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mMultiple fallback models with mixed results[2m > [22m[2mshould try multiple fallbacks until success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model3::test-key success [95m(1/1, 3ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -2721d53[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mMultiple fallback models with mixed results[2m > [22m[2mshould try multiple fallbacks until success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model3::test-key success [95m(1/1, 3ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key -2721d53[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRetry behavior with maxRetries[2m > [22m[2mshould retry up to maxRetries times
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRetry behavior with maxRetries[2m > [22m[2mshould retry up to maxRetries times
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRetry behavior with maxRetries[2m > [22m[2mshould retry up to maxRetries times
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model1 failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRetry behavior with maxRetries[2m > [22m[2mshould retry up to maxRetries times
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model1 failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRetry behavior with maxRetries[2m > [22m[2mshould retry up to maxRetries times
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model2 failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key failure [95m(1/1, error: Error...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRetry behavior with maxRetries[2m > [22m[2mshould retry up to maxRetries times
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model2 failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key failure [95m(1/1, error: Error...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with only reasoning_content[2m > [22m[2mshould use reasoning_content when content is empty
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with only reasoning_content[2m > [22m[2mshould use reasoning_content when content is empty
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with only reasoning_content[2m > [22m[2mshould use reasoning_content when content is empty
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m âš ï¸ Content empty but reasoning_content has 16 chars - using reasoning_content[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(16 chars)[0m[0m: reasoning result...[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Reasoning content excluded by API [95m(16 chars)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with only reasoning_content[2m > [22m[2mshould use reasoning_content when content is empty
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m âš ï¸ Content empty but reasoning_content has 16 chars - using reasoning_content[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(16 chars)[0m[0m: reasoning result...[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Reasoning content excluded by API [95m(16 chars)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with only reasoning_content[2m > [22m[2mshould use reasoning_content when content is empty
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mResponse with only reasoning_content[2m > [22m[2mshould use reasoning_content when content is empty
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDedupe cache hit scenarios[2m > [22m[2mshould return cached result on dedupe hit with all fields
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Dedupe hit, returning cached response[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mDedupe cache hit scenarios[2m > [22m[2mshould return cached result on dedupe hit with all fields
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Dedupe hit, returning cached response[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mCircuit breaker state management[2m > [22m[2mshould record success after failure
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mCircuit breaker state management[2m > [22m[2mshould record success after failure
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model1[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mCircuit breaker state management[2m > [22m[2mshould record success after failure
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model1 failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mCircuit breaker state management[2m > [22m[2mshould record success after failure
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model model1 failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model1::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=model2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to model2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mCircuit breaker state management[2m > [22m[2mshould record success after failure
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(7 chars)[0m[0m: success...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mCircuit breaker state management[2m > [22m[2mshould record success after failure
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(7 chars)[0m[0m: success...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mCircuit breaker state management[2m > [22m[2mshould record success after failure
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4499bbc2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mCircuit breaker state management[2m > [22m[2mshould record success after failure
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m model2::test-key success [95m(1/1, 2ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4499bbc2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on success
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on success
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on failure
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on failure
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on failure
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model fallback[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=fallback[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to fallback[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on failure
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model fallback[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=fallback[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to fallback[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on failure
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model fallback failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m fallback::test-key failure [95m(1/1, error: Error...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel performance tracking[2m > [22m[2mshould track model performance on failure
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model fallback failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m fallback::test-key failure [95m(1/1, error: Error...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on success
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on success
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on failure
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on failure
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 2 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on failure
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model fallback[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=fallback[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to fallback[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on failure
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Error...)[0m[0m[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Moving to next model. Progress: 1/3 attempts used, 1 models remaining[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 2/3: Trying model fallback[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=fallback[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to fallback[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on failure
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model fallback failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m fallback::test-key failure [95m(1/1, error: Error...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mAPI key timeout tracking[2m > [22m[2mshould track API key timeout on failure
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model fallback failed: Error[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m fallback::test-key failure [95m(1/1, error: Error...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate limit tracker integration[2m > [22m[2mshould track request on success
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate limit tracker integration[2m > [22m[2mshould track request on success
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate limit tracker integration[2m > [22m[2mshould track request on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate limit tracker integration[2m > [22m[2mshould track request on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate limit tracker integration[2m > [22m[2mshould track request on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRate limit tracker integration[2m > [22m[2mshould track request on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRequest deduplication[2m > [22m[2mshould set dedupe on success
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRequest deduplication[2m > [22m[2mshould set dedupe on success
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRequest deduplication[2m > [22m[2mshould set dedupe on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRequest deduplication[2m > [22m[2mshould set dedupe on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Response received [95m(8 chars)[0m[0m: response...[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRequest deduplication[2m > [22m[2mshould set dedupe on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mRequest deduplication[2m > [22m[2mshould set dedupe on success
[22m[39m[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key success [95m(1/1, 1ms avg)[0m[0m[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[request-dedupe.js][0m[0m[0m[33m[RequestDedupe][0m[0m Cached response for key 4daae485[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 400 Bad Request
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 400 Bad Request
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 400 Bad Request
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Invalid request[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Invalid request...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 400 Bad Request
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Invalid request[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Invalid request...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 401 Unauthorized
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 401 Unauthorized
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 401 Unauthorized
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Invalid API key[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Invalid API key...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 401 Unauthorized
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Invalid API key[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Invalid API key...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 403 Forbidden
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 403 Forbidden
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 403 Forbidden
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Access denied[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Access denied...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 403 Forbidden
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Access denied[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Access denied...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 404 Not Found
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 404 Not Found
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 0[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m processRequest: calling _tryModelWithKey[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m No test results available, using 1 configured models[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Attempt 1/3: Trying model test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: model=test/model[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _tryModelWithKey: proxy=null[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m _callDirect: starting request to test/model[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 404 Not Found
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Endpoint not found[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Endpoint not found...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mError response with different status codes[2m > [22m[2mshould handle 404 Not Found
[22m[39m[2m15:46:13[0m [33mðŸŸ¡[0m [0m[38;5;208m[free-api-router.js][0m[33m[0m[33m[FreeRouter][0m[33m Model test/model failed: Endpoint not found[0m
[2m15:46:13[0m [90mâšª[0m [0m[38;5;208m[model-perf-tracker.js][0m[0m[0m[33m[ModelPerfTracker][0m[0m test/model::test-key failure [95m(1/1, error: Endpoint not found...)[0m[0m[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel info with different scenarios[2m > [22m[2mshould get models info with failed test results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel info with different scenarios[2m > [22m[2mshould get models info with failed test results
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel info with different scenarios[2m > [22m[2mshould get models info with allConfigured
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mModel info with different scenarios[2m > [22m[2mshould get models info with allConfigured
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: primary[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 2[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mSync with helper edge cases[2m > [22m[2mshould sync when primary is not in working
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: not-in-list[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Synced with helper: primary=model1, fallbacks=2[0m

[90mstdout[2m | tests/unit/free-api-router.test.js[2m > [22m[2mFreeApiRouter[2m > [22m[2mSync with helper edge cases[2m > [22m[2mshould sync when primary is not in working
[22m[39m[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Session default:default -> API Key 1/1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Initialized for session: default:default[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m API Keys: 1, Selected: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Primary model: not-in-list[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Fallback models: 1[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Timeout: default=60000ms, quick=20000ms[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Advanced features: CircuitBreaker, RateLimitTracker, RequestDedupe, ModelPerfTracker, ApiKeyTimeoutTracker[0m
[2m15:46:13[0m [36mðŸ”µ[0m [0m[38;5;208m[free-api-router.js][0m[0m[0m[33m[FreeRouter][0m[0m Synced with helper: primary=model1, fallbacks=2[0m

 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Additional Edge Cases[2m > [22mshould handle timeout in proxy call with AbortError[32m 35[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callThroughProxy Additional Edge Cases[2m > [22mshould handle proxy fetch network error[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callDirect Error Wrapping Edge Cases[2m > [22mshould wrap plain error without name/code[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_callDirect Error Wrapping Edge Cases[2m > [22mshould wrap error with empty string name[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel Cascading Edge Cases[2m > [22mshould use configured models when no test results[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel Cascading Edge Cases[2m > [22mshould handle working array with length 0[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel Cascading Edge Cases[2m > [22mshould filter out duplicate models when adding from config[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAll Models Exhausted Scenarios[2m > [22mshould return exhausted error when all models fail with circuit open[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAll Models Exhausted Scenarios[2m > [22mshould return exhausted error when all models get rate limited[32m 5[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAll Models Exhausted Scenarios[2m > [22mshould return exhausted error when all models fail with server errors[32m 4[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mDirect Fallback Error Paths[2m > [22mshould handle proxy fallback to direct when both fail[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mRate Limit Warning Status[2m > [22mshould continue when rate limit status is warning[32m 5[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mDirect Fallback Error Paths[2m > [22mshould handle proxy fallback to direct when both fail[32m 4[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mWarning Status in Response[2m > [22mshould include warningStatus in response[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mResponse with usage data[2m > [22mshould track usage when present in response[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mEmpty configured models array[2m > [22mshould handle empty configured models[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22m_getCachedHash[2m > [22mshould cache hash results[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mMultiple fallback models with mixed results[2m > [22mshould try multiple fallbacks until success[32m 5[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mRetry behavior with maxRetries[2m > [22mshould retry up to maxRetries times[32m 4[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mResponse with only reasoning_content[2m > [22mshould use reasoning_content when content is empty[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mDedupe cache hit scenarios[2m > [22mshould return cached result on dedupe hit with all fields[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mCircuit breaker state management[2m > [22mshould record success after failure[32m 4[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel performance tracking[2m > [22mshould track model performance on success[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel performance tracking[2m > [22mshould track model performance on failure[32m 4[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAPI key timeout tracking[2m > [22mshould track API key timeout on success[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mAPI key timeout tracking[2m > [22mshould track API key timeout on failure[32m 4[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mRate limit tracker integration[2m > [22mshould track request on success[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mRequest deduplication[2m > [22mshould set dedupe on success[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mProxy selection variations[2m > [22mshould handle proxy with username and password format[32m 0[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mError response with different status codes[2m > [22mshould handle 400 Bad Request[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mError response with different status codes[2m > [22mshould handle 401 Unauthorized[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mError response with different status codes[2m > [22mshould handle 403 Forbidden[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mError response with different status codes[2m > [22mshould handle 404 Not Found[32m 3[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel info with different scenarios[2m > [22mshould get models info with failed test results[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mModel info with different scenarios[2m > [22mshould get models info with allConfigured[32m 1[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js[2m > [22mFreeApiRouter[2m > [22mSync with helper edge cases[2m > [22mshould sync when primary is not in working[32m 2[2mms[22m[39m
 [32mâœ“[39m tests/unit/free-api-router.test.js [2m([22m[2m123 tests[22m[2m)[22m[33m 411[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m123 passed[39m[22m[90m (123)[39m
[2m   Start at [22m 15:46:12
[2m   Duration [22m 2.29s[2m (transform 244ms, setup 17ms, import 250ms, tests 411ms, environment 0ms)[22m


[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m123 passed[39m[22m[90m (123)[39m
[2m   Start at [22m 15:46:12
[2m   Duration [22m 2.29s[2m (transform 244ms, setup 17ms, import 250ms, tests 411ms, environment 0ms)[22m

[34m % [39m[2mCoverage report from [22m[33mv8[39m
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |    2.85 |     2.68 |    3.42 |    2.89 |                   
 core              |       0 |        0 |       0 |       0 |                   
  ...-connector.js |       0 |        0 |       0 |       0 | 15-577            
  agent-cortex.js  |       0 |        0 |       0 |       0 | 12-409            
  ...t-verifier.js |       0 |        0 |       0 |       0 | 9-325             
  automator.js     |       0 |        0 |       0 |       0 | 11-516            
  ...it-breaker.js |       0 |        0 |       0 |       0 | 8-266             
  cloud-client.js  |       0 |        0 |       0 |       0 | 14-779            
  discovery.js     |       0 |        0 |       0 |       0 | 11-137            
  ...th-monitor.js |       0 |        0 |       0 |       0 | 5-113             
  ...-compactor.js |       0 |        0 |       0 |       0 | 9-250             
  ...zer-engine.js |       0 |        0 |       0 |       0 | 9-264             
  idle-ghosting.js |       0 |        0 |       0 |       0 | 9-185             
  ...classifier.js |       0 |        0 |       0 |       0 | 9-225             
  local-client.js  |       0 |        0 |       0 |       0 | 12-197            
  log-capture.js   |       0 |        0 |       0 |       0 | 5-78              
  ollama-client.js |       0 |        0 |       0 |       0 | 12-714            
  orchestrator.js  |       0 |        0 |       0 |       0 | 16-709            
  ...pt-builder.js |       0 |        0 |       0 |       0 | 13-106            
  request-queue.js |       0 |        0 |       0 |       0 | 9-263             
  ...tic-parser.js |       0 |        0 |       0 |       0 | 9-320             
  ...ionManager.js |       0 |        0 |       0 |       0 | 13-892            
  state-manager.js |       0 |        0 |       0 |       0 | 9-186             
  ...k-detector.js |       0 |        0 |       0 |       0 | 10-59             
  ...nterpreter.js |       0 |        0 |       0 |       0 | 9-141             
  ...n-packager.js |       0 |        0 |       0 |       0 | 11-277            
  vllm-client.js   |       0 |        0 |       0 |       0 | 10-215            
 core/vision       |       0 |        0 |       0 |       0 |                   
  image-storage.js |       0 |        0 |       0 |       0 | 11-59             
  roi-detector.js  |       0 |        0 |       0 |       0 | 13-32             
 tasks             |       0 |        0 |       0 |       0 |                   
  _template.js     |       0 |        0 |       0 |       0 | 16-68             
  agent.js         |       0 |        0 |       0 |       0 | 14-161            
  agentNavigate.js |       0 |        0 |       0 |       0 | 15-156            
  ai-testertask.js |       0 |        0 |       0 |       0 | 14-201            
  ...erActivity.js |       0 |        0 |       0 |       0 | 20-394            
  ...ationTask1.js |       0 |        0 |       0 |       0 | 4-59              
  ...ationTask2.js |       0 |        0 |       0 |       0 | 4-59              
  ...eBotRandom.js |       0 |        0 |       0 |       0 | 11-117            
  ...valid_task.js |       0 |      100 |       0 |       0 | 2                 
  reply-test.js    |       0 |        0 |       0 |       0 | 11-80             
  retweet-test.js  |       0 |        0 |       0 |       0 | 11-60             
  runAgent.js      |       0 |        0 |       0 |       0 | 10-29             
  semangka.js      |       0 |      100 |       0 |       0 | 10-22             
  taskAgent.js     |       0 |        0 |       0 |       0 | 5-35              
  taskAgent2.js    |       0 |        0 |       0 |       0 | 4-11              
  test-vision.js   |       0 |        0 |       0 |       0 | 5-38              
  ...ogleSearch.js |       0 |        0 |       0 |       0 | 20-207            
  ...manMethods.js |       0 |        0 |       0 |       0 | 43-580            
  testTask.js      |       0 |      100 |       0 |       0 | 3                 
  ...erActivity.js |       0 |        0 |       0 |       0 | 18-383            
  twitterFollow.js |       0 |        0 |       0 |       0 | 7-312             
  ...ikeRetweet.js |       0 |        0 |       0 |       0 | 7-435             
  twitterTweet.js  |       0 |        0 |       0 |       0 | 16-303            
  twitterscroll.js |       0 |        0 |       0 |       0 | 15-71             
 utils             |    4.66 |     4.21 |    5.48 |    4.77 |                   
  ...chestrator.js |       0 |        0 |       0 |       0 | 10-156            
  ...ext-engine.js |       0 |        0 |       0 |       0 | 11-897            
  ...ote-engine.js |       0 |        0 |       0 |       0 | 15-1539           
  ...ply-engine.js |       0 |        0 |       0 |       0 | 21-2402           
  ai-tools.js      |       0 |        0 |       0 |       0 | 12-292            
  ...itterAgent.js |       0 |        0 |       0 |       0 | 37-3017           
  ...ut-tracker.js |   46.59 |    44.68 |      40 |   45.12 | ...68,177-196,200 
  apiHandler.js    |       0 |        0 |       0 |       0 | 16-102            
  async-queue.js   |       0 |        0 |       0 |       0 | 12-491            
  banner.js        |       0 |      100 |       0 |       0 | 7-30              
  browserPatch.js  |       0 |        0 |       0 |       0 | 12-73             
  ...it-breaker.js |   35.29 |    34.04 |   27.27 |   36.36 | ...26-138,142-147 
  config-cache.js  |       0 |        0 |       0 |       0 | 9-264             
  ...ig-manager.js |       0 |        0 |       0 |       0 | 16-541            
  ...ig-service.js |       0 |        0 |       0 |       0 | 19-434            
  ...-validator.js |   19.48 |    15.06 |      25 |      20 | ...36-359,376-385 
  configLoader.js  |       0 |        0 |       0 |       0 | 11-184            
  content-depth.js |       0 |        0 |       0 |       0 | 12-283            
  dockerLLM.js     |       0 |        0 |       0 |       0 | 13-111            
  ...ent-limits.js |       0 |        0 |       0 |       0 | 9-213             
  ...Controller.js |       0 |        0 |       0 |       0 | 19-453            
  envLoader.js     |       0 |        0 |       0 |       0 | 13-145            
  ...ent-config.js |       0 |        0 |       0 |       0 | 9-312             
  errors.js        |   51.21 |       45 |   78.57 |   51.21 | ...48-149,180-202 
  ...api-router.js |   68.08 |       61 |   45.16 |   68.61 | ...87-619,664-734 
  ...ter-helper.js |       0 |        0 |       0 |       0 | 10-350            
  ...bugProfile.js |       0 |      100 |       0 |       0 | 5-94              
  ...teProfiles.js |       0 |        0 |       0 |       0 | 6-232             
  ghostCursor.js   |       0 |        0 |       0 |       0 | 10-521            
  ...controller.js |       0 |        0 |       0 |       0 | 11-217            
  ...nteraction.js |       0 |        0 |       0 |       0 | 12-850            
  human-timing.js  |       0 |        0 |       0 |       0 | 9-125             
  ...ma-manager.js |       0 |        0 |       0 |       0 | 11-230            
  logger.js        |    51.8 |    34.09 |   41.86 |   51.94 | ...83,497,505-550 
  ...ing-config.js |       0 |        0 |       0 |       0 | 8-133             
  mathUtils.js     |       0 |        0 |       0 |       0 | 5-34              
  metrics.js       |       0 |        0 |       0 |       0 | 8-613             
  ...teractions.js |       0 |        0 |       0 |       0 | 12-230            
  ...ake-engine.js |       0 |        0 |       0 |       0 | 11-220            
  ...rf-tracker.js |   39.09 |    31.81 |    40.9 |   39.04 | ...07-225,233-257 
  motor-control.js |       0 |        0 |       0 |       0 | 14-550            
  multi-api.js     |       0 |        0 |       0 |       0 | 8-176             
  ...-diversity.js |       0 |        0 |       0 |       0 | 11-240            
  pageZoom.js      |       0 |        0 |       0 |       0 | 10-138            
  popup-closer.js  |       0 |        0 |       0 |       0 | 5-75              
  probe_llm.js     |       0 |        0 |       0 |       0 | 5-58              
  ...ileManager.js |       0 |        0 |       0 |       0 | 6-192             
  proxy-agent.js   |   44.82 |    31.25 |      80 |   44.82 | 18,28,31,43-69    
  ...mScrolling.js |       0 |        0 |       0 |       0 | 10-104            
  randomZoom.js    |       0 |        0 |       0 |       0 | 9-99              
  ...it-tracker.js |      24 |       24 |   22.22 |   23.94 | ...30-162,175-180 
  ...est-dedupe.js |   48.52 |    47.22 |   42.85 |   48.48 | ...34-140,144-153 
  retry.js         |       0 |        0 |       0 |       0 | 8-52              
  screenshot.js    |       0 |        0 |       0 |       0 | 11-52             
  scroll-helper.js |       0 |        0 |       0 |       0 | 24-91             
  ...-humanizer.js |       0 |        0 |       0 |       0 | 11-192            
  ...yzer-multi.js |       0 |        0 |       0 |       0 | 18-374            
  ...-analyzers.js |       0 |        0 |       0 |       0 | 17-453            
  ...iment-data.js |       0 |        0 |       0 |       0 | 10-716            
  ...ion-engine.js |       0 |        0 |       0 |       0 | 10-415            
  ...ment-guard.js |       0 |        0 |       0 |       0 | 9-177             
  ...ntegration.js |       0 |        0 |       0 |       0 | 12-265            
  ...nt-service.js |       0 |        0 |       0 |       0 | 30-410            
  ...ion-phases.js |       0 |        0 |       0 |       0 | 9-110             
  ...fig-loader.js |       0 |        0 |       0 |       0 | 14-313            
  ...-awareness.js |       0 |        0 |       0 |       0 | 11-229            
  ...on-methods.js |       0 |        0 |       0 |       0 | 10-647            
  ...ply-prompt.js |       0 |        0 |       0 |       0 | 7-423             
  twitterAgent.js  |       0 |        0 |       0 |       0 | 16-1793           
  ...CloseMedia.js |       0 |        0 |       0 |       0 | 11-208            
  urlReferrer.js   |       0 |        0 |       0 |       0 | 20-587            
  ...rGenerator.js |       0 |        0 |       0 |       0 | 11-213            
  utils.js         |       0 |        0 |       0 |       0 |                   
  validator.js     |       0 |        0 |       0 |       0 | 9-250             
 utils/actions     |       0 |        0 |       0 |       0 |                   
  ...r-bookmark.js |       0 |        0 |       0 |       0 | 11-130            
  ...er-go-home.js |       0 |        0 |       0 |       0 | 11-114            
  ...itter-like.js |       0 |        0 |       0 |       0 | 11-130            
  ...tter-quote.js |       0 |        0 |       0 |       0 | 11-189            
  ...tter-reply.js |       0 |        0 |       0 |       0 | 11-185            
  ...er-retweet.js |       0 |        0 |       0 |       0 | 11-273            
  index.js         |       0 |        0 |       0 |       0 | 22-210            
 ...s/humanization |       0 |        0 |       0 |       0 |                   
  action.js        |       0 |        0 |       0 |       0 | 19-260            
  content.js       |       0 |        0 |       0 |       0 | 18-217            
  engine.js        |       0 |        0 |       0 |       0 | 26-250            
  error.js         |       0 |        0 |       0 |       0 | 18-328            
  index.js         |       0 |        0 |       0 |       0 |                   
  multitask.js     |       0 |        0 |       0 |       0 | 18-204            
  scroll.js        |       0 |        0 |       0 |       0 | 19-185            
  session.js       |       0 |        0 |       0 |       0 | 18-263            
  timing.js        |       0 |        0 |       0 |       0 | 17-270            
 .../twitter-agent |       0 |        0 |       0 |       0 |                   
  BaseHandler.js   |       0 |        0 |       0 |       0 | 6-491             
  ...entHandler.js |       0 |        0 |       0 |       0 | 5-491             
  ...ionHandler.js |       0 |      100 |       0 |       0 | 5                 
  ...ionHandler.js |       0 |        0 |       0 |       0 | 6-238             
  ...ionHandler.js |       0 |        0 |       0 |       0 | 7-433             
-------------------|---------|----------|---------|---------|-------------------
