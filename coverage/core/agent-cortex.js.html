
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for core/agent-cortex.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../index.html">All files</a> / <a href="index.html">core</a> agent-cortex.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/158</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/110</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/16</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/155</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a>
<a name='L212'></a><a href='#L212'>212</a>
<a name='L213'></a><a href='#L213'>213</a>
<a name='L214'></a><a href='#L214'>214</a>
<a name='L215'></a><a href='#L215'>215</a>
<a name='L216'></a><a href='#L216'>216</a>
<a name='L217'></a><a href='#L217'>217</a>
<a name='L218'></a><a href='#L218'>218</a>
<a name='L219'></a><a href='#L219'>219</a>
<a name='L220'></a><a href='#L220'>220</a>
<a name='L221'></a><a href='#L221'>221</a>
<a name='L222'></a><a href='#L222'>222</a>
<a name='L223'></a><a href='#L223'>223</a>
<a name='L224'></a><a href='#L224'>224</a>
<a name='L225'></a><a href='#L225'>225</a>
<a name='L226'></a><a href='#L226'>226</a>
<a name='L227'></a><a href='#L227'>227</a>
<a name='L228'></a><a href='#L228'>228</a>
<a name='L229'></a><a href='#L229'>229</a>
<a name='L230'></a><a href='#L230'>230</a>
<a name='L231'></a><a href='#L231'>231</a>
<a name='L232'></a><a href='#L232'>232</a>
<a name='L233'></a><a href='#L233'>233</a>
<a name='L234'></a><a href='#L234'>234</a>
<a name='L235'></a><a href='#L235'>235</a>
<a name='L236'></a><a href='#L236'>236</a>
<a name='L237'></a><a href='#L237'>237</a>
<a name='L238'></a><a href='#L238'>238</a>
<a name='L239'></a><a href='#L239'>239</a>
<a name='L240'></a><a href='#L240'>240</a>
<a name='L241'></a><a href='#L241'>241</a>
<a name='L242'></a><a href='#L242'>242</a>
<a name='L243'></a><a href='#L243'>243</a>
<a name='L244'></a><a href='#L244'>244</a>
<a name='L245'></a><a href='#L245'>245</a>
<a name='L246'></a><a href='#L246'>246</a>
<a name='L247'></a><a href='#L247'>247</a>
<a name='L248'></a><a href='#L248'>248</a>
<a name='L249'></a><a href='#L249'>249</a>
<a name='L250'></a><a href='#L250'>250</a>
<a name='L251'></a><a href='#L251'>251</a>
<a name='L252'></a><a href='#L252'>252</a>
<a name='L253'></a><a href='#L253'>253</a>
<a name='L254'></a><a href='#L254'>254</a>
<a name='L255'></a><a href='#L255'>255</a>
<a name='L256'></a><a href='#L256'>256</a>
<a name='L257'></a><a href='#L257'>257</a>
<a name='L258'></a><a href='#L258'>258</a>
<a name='L259'></a><a href='#L259'>259</a>
<a name='L260'></a><a href='#L260'>260</a>
<a name='L261'></a><a href='#L261'>261</a>
<a name='L262'></a><a href='#L262'>262</a>
<a name='L263'></a><a href='#L263'>263</a>
<a name='L264'></a><a href='#L264'>264</a>
<a name='L265'></a><a href='#L265'>265</a>
<a name='L266'></a><a href='#L266'>266</a>
<a name='L267'></a><a href='#L267'>267</a>
<a name='L268'></a><a href='#L268'>268</a>
<a name='L269'></a><a href='#L269'>269</a>
<a name='L270'></a><a href='#L270'>270</a>
<a name='L271'></a><a href='#L271'>271</a>
<a name='L272'></a><a href='#L272'>272</a>
<a name='L273'></a><a href='#L273'>273</a>
<a name='L274'></a><a href='#L274'>274</a>
<a name='L275'></a><a href='#L275'>275</a>
<a name='L276'></a><a href='#L276'>276</a>
<a name='L277'></a><a href='#L277'>277</a>
<a name='L278'></a><a href='#L278'>278</a>
<a name='L279'></a><a href='#L279'>279</a>
<a name='L280'></a><a href='#L280'>280</a>
<a name='L281'></a><a href='#L281'>281</a>
<a name='L282'></a><a href='#L282'>282</a>
<a name='L283'></a><a href='#L283'>283</a>
<a name='L284'></a><a href='#L284'>284</a>
<a name='L285'></a><a href='#L285'>285</a>
<a name='L286'></a><a href='#L286'>286</a>
<a name='L287'></a><a href='#L287'>287</a>
<a name='L288'></a><a href='#L288'>288</a>
<a name='L289'></a><a href='#L289'>289</a>
<a name='L290'></a><a href='#L290'>290</a>
<a name='L291'></a><a href='#L291'>291</a>
<a name='L292'></a><a href='#L292'>292</a>
<a name='L293'></a><a href='#L293'>293</a>
<a name='L294'></a><a href='#L294'>294</a>
<a name='L295'></a><a href='#L295'>295</a>
<a name='L296'></a><a href='#L296'>296</a>
<a name='L297'></a><a href='#L297'>297</a>
<a name='L298'></a><a href='#L298'>298</a>
<a name='L299'></a><a href='#L299'>299</a>
<a name='L300'></a><a href='#L300'>300</a>
<a name='L301'></a><a href='#L301'>301</a>
<a name='L302'></a><a href='#L302'>302</a>
<a name='L303'></a><a href='#L303'>303</a>
<a name='L304'></a><a href='#L304'>304</a>
<a name='L305'></a><a href='#L305'>305</a>
<a name='L306'></a><a href='#L306'>306</a>
<a name='L307'></a><a href='#L307'>307</a>
<a name='L308'></a><a href='#L308'>308</a>
<a name='L309'></a><a href='#L309'>309</a>
<a name='L310'></a><a href='#L310'>310</a>
<a name='L311'></a><a href='#L311'>311</a>
<a name='L312'></a><a href='#L312'>312</a>
<a name='L313'></a><a href='#L313'>313</a>
<a name='L314'></a><a href='#L314'>314</a>
<a name='L315'></a><a href='#L315'>315</a>
<a name='L316'></a><a href='#L316'>316</a>
<a name='L317'></a><a href='#L317'>317</a>
<a name='L318'></a><a href='#L318'>318</a>
<a name='L319'></a><a href='#L319'>319</a>
<a name='L320'></a><a href='#L320'>320</a>
<a name='L321'></a><a href='#L321'>321</a>
<a name='L322'></a><a href='#L322'>322</a>
<a name='L323'></a><a href='#L323'>323</a>
<a name='L324'></a><a href='#L324'>324</a>
<a name='L325'></a><a href='#L325'>325</a>
<a name='L326'></a><a href='#L326'>326</a>
<a name='L327'></a><a href='#L327'>327</a>
<a name='L328'></a><a href='#L328'>328</a>
<a name='L329'></a><a href='#L329'>329</a>
<a name='L330'></a><a href='#L330'>330</a>
<a name='L331'></a><a href='#L331'>331</a>
<a name='L332'></a><a href='#L332'>332</a>
<a name='L333'></a><a href='#L333'>333</a>
<a name='L334'></a><a href='#L334'>334</a>
<a name='L335'></a><a href='#L335'>335</a>
<a name='L336'></a><a href='#L336'>336</a>
<a name='L337'></a><a href='#L337'>337</a>
<a name='L338'></a><a href='#L338'>338</a>
<a name='L339'></a><a href='#L339'>339</a>
<a name='L340'></a><a href='#L340'>340</a>
<a name='L341'></a><a href='#L341'>341</a>
<a name='L342'></a><a href='#L342'>342</a>
<a name='L343'></a><a href='#L343'>343</a>
<a name='L344'></a><a href='#L344'>344</a>
<a name='L345'></a><a href='#L345'>345</a>
<a name='L346'></a><a href='#L346'>346</a>
<a name='L347'></a><a href='#L347'>347</a>
<a name='L348'></a><a href='#L348'>348</a>
<a name='L349'></a><a href='#L349'>349</a>
<a name='L350'></a><a href='#L350'>350</a>
<a name='L351'></a><a href='#L351'>351</a>
<a name='L352'></a><a href='#L352'>352</a>
<a name='L353'></a><a href='#L353'>353</a>
<a name='L354'></a><a href='#L354'>354</a>
<a name='L355'></a><a href='#L355'>355</a>
<a name='L356'></a><a href='#L356'>356</a>
<a name='L357'></a><a href='#L357'>357</a>
<a name='L358'></a><a href='#L358'>358</a>
<a name='L359'></a><a href='#L359'>359</a>
<a name='L360'></a><a href='#L360'>360</a>
<a name='L361'></a><a href='#L361'>361</a>
<a name='L362'></a><a href='#L362'>362</a>
<a name='L363'></a><a href='#L363'>363</a>
<a name='L364'></a><a href='#L364'>364</a>
<a name='L365'></a><a href='#L365'>365</a>
<a name='L366'></a><a href='#L366'>366</a>
<a name='L367'></a><a href='#L367'>367</a>
<a name='L368'></a><a href='#L368'>368</a>
<a name='L369'></a><a href='#L369'>369</a>
<a name='L370'></a><a href='#L370'>370</a>
<a name='L371'></a><a href='#L371'>371</a>
<a name='L372'></a><a href='#L372'>372</a>
<a name='L373'></a><a href='#L373'>373</a>
<a name='L374'></a><a href='#L374'>374</a>
<a name='L375'></a><a href='#L375'>375</a>
<a name='L376'></a><a href='#L376'>376</a>
<a name='L377'></a><a href='#L377'>377</a>
<a name='L378'></a><a href='#L378'>378</a>
<a name='L379'></a><a href='#L379'>379</a>
<a name='L380'></a><a href='#L380'>380</a>
<a name='L381'></a><a href='#L381'>381</a>
<a name='L382'></a><a href='#L382'>382</a>
<a name='L383'></a><a href='#L383'>383</a>
<a name='L384'></a><a href='#L384'>384</a>
<a name='L385'></a><a href='#L385'>385</a>
<a name='L386'></a><a href='#L386'>386</a>
<a name='L387'></a><a href='#L387'>387</a>
<a name='L388'></a><a href='#L388'>388</a>
<a name='L389'></a><a href='#L389'>389</a>
<a name='L390'></a><a href='#L390'>390</a>
<a name='L391'></a><a href='#L391'>391</a>
<a name='L392'></a><a href='#L392'>392</a>
<a name='L393'></a><a href='#L393'>393</a>
<a name='L394'></a><a href='#L394'>394</a>
<a name='L395'></a><a href='#L395'>395</a>
<a name='L396'></a><a href='#L396'>396</a>
<a name='L397'></a><a href='#L397'>397</a>
<a name='L398'></a><a href='#L398'>398</a>
<a name='L399'></a><a href='#L399'>399</a>
<a name='L400'></a><a href='#L400'>400</a>
<a name='L401'></a><a href='#L401'>401</a>
<a name='L402'></a><a href='#L402'>402</a>
<a name='L403'></a><a href='#L403'>403</a>
<a name='L404'></a><a href='#L404'>404</a>
<a name='L405'></a><a href='#L405'>405</a>
<a name='L406'></a><a href='#L406'>406</a>
<a name='L407'></a><a href='#L407'>407</a>
<a name='L408'></a><a href='#L408'>408</a>
<a name='L409'></a><a href='#L409'>409</a>
<a name='L410'></a><a href='#L410'>410</a>
<a name='L411'></a><a href='#L411'>411</a>
<a name='L412'></a><a href='#L412'>412</a>
<a name='L413'></a><a href='#L413'>413</a>
<a name='L414'></a><a href='#L414'>414</a>
<a name='L415'></a><a href='#L415'>415</a>
<a name='L416'></a><a href='#L416'>416</a>
<a name='L417'></a><a href='#L417'>417</a>
<a name='L418'></a><a href='#L418'>418</a>
<a name='L419'></a><a href='#L419'>419</a>
<a name='L420'></a><a href='#L420'>420</a>
<a name='L421'></a><a href='#L421'>421</a>
<a name='L422'></a><a href='#L422'>422</a>
<a name='L423'></a><a href='#L423'>423</a>
<a name='L424'></a><a href='#L424'>424</a>
<a name='L425'></a><a href='#L425'>425</a>
<a name='L426'></a><a href='#L426'>426</a>
<a name='L427'></a><a href='#L427'>427</a>
<a name='L428'></a><a href='#L428'>428</a>
<a name='L429'></a><a href='#L429'>429</a>
<a name='L430'></a><a href='#L430'>430</a>
<a name='L431'></a><a href='#L431'>431</a>
<a name='L432'></a><a href='#L432'>432</a>
<a name='L433'></a><a href='#L433'>433</a>
<a name='L434'></a><a href='#L434'>434</a>
<a name='L435'></a><a href='#L435'>435</a>
<a name='L436'></a><a href='#L436'>436</a>
<a name='L437'></a><a href='#L437'>437</a>
<a name='L438'></a><a href='#L438'>438</a>
<a name='L439'></a><a href='#L439'>439</a>
<a name='L440'></a><a href='#L440'>440</a>
<a name='L441'></a><a href='#L441'>441</a>
<a name='L442'></a><a href='#L442'>442</a>
<a name='L443'></a><a href='#L443'>443</a>
<a name='L444'></a><a href='#L444'>444</a>
<a name='L445'></a><a href='#L445'>445</a>
<a name='L446'></a><a href='#L446'>446</a>
<a name='L447'></a><a href='#L447'>447</a>
<a name='L448'></a><a href='#L448'>448</a>
<a name='L449'></a><a href='#L449'>449</a>
<a name='L450'></a><a href='#L450'>450</a>
<a name='L451'></a><a href='#L451'>451</a>
<a name='L452'></a><a href='#L452'>452</a>
<a name='L453'></a><a href='#L453'>453</a>
<a name='L454'></a><a href='#L454'>454</a>
<a name='L455'></a><a href='#L455'>455</a>
<a name='L456'></a><a href='#L456'>456</a>
<a name='L457'></a><a href='#L457'>457</a>
<a name='L458'></a><a href='#L458'>458</a>
<a name='L459'></a><a href='#L459'>459</a>
<a name='L460'></a><a href='#L460'>460</a>
<a name='L461'></a><a href='#L461'>461</a>
<a name='L462'></a><a href='#L462'>462</a>
<a name='L463'></a><a href='#L463'>463</a>
<a name='L464'></a><a href='#L464'>464</a>
<a name='L465'></a><a href='#L465'>465</a>
<a name='L466'></a><a href='#L466'>466</a></td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * @fileoverview Agent Cortex - The "Brain" of the autonomous agent.
 * Manages state, history, "Stuck" detection, and decision making.
 * @module core/agent-cortex
 */
&nbsp;
import { createLogger } from '../utils/logger.js';
import VisionInterpreter from './vision-interpreter.js';
import LocalClient from './local-client.js';
import { getTimeoutValue } from '../utils/configLoader.js';
import crypto from 'crypto';
&nbsp;
const logger =<span class="cstat-no" title="statement not covered" > createLogger('agent-cortex.js');</span>
&nbsp;
// Configuration Constants - loaded from config
let STUCK_THRESHOLD = <span class="cstat-no" title="statement not covered" >3;</span>
let FAILURE_THRESHOLD = <span class="cstat-no" title="statement not covered" >2;</span>
let HISTORY_WINDOW = <span class="cstat-no" title="statement not covered" >5;</span>
let MAX_HISTORY_SIZE = <span class="cstat-no" title="statement not covered" >50;</span>
&nbsp;
async function <span class="fstat-no" title="function not covered" >_loadAgentConfig(</span>) {
    const agentConfig = <span class="cstat-no" title="statement not covered" >await getTimeoutValue('agent', {}) || {};</span>
<span class="cstat-no" title="statement not covered" >    STUCK_THRESHOLD = agentConfig.stuckThreshold ?? STUCK_THRESHOLD;</span>
    
    const stateConfig = <span class="cstat-no" title="statement not covered" >await getTimeoutValue('state', {}) || {};</span>
<span class="cstat-no" title="statement not covered" >    MAX_HISTORY_SIZE = stateConfig.maxBreadcrumbs ?? MAX_HISTORY_SIZE;</span>
}
<span class="cstat-no" title="statement not covered" >_loadAgentConfig();</span>
&nbsp;
class AgentCortex {
    /**
     * Creates a new AgentCortex instance
     * @param {string} sessionId - Session identifier
     * @param {string} goal - Agent goal
     * @param {Array} steps - Methodology steps
     */
<span class="fstat-no" title="function not covered" >    constructor(</span>sessionId, goal, steps = <span class="branch-0 cbranch-no" title="branch not covered" >[])</span> {
<span class="cstat-no" title="statement not covered" >        this.sessionId = sessionId;</span>
<span class="cstat-no" title="statement not covered" >        this.goal = goal;</span>
<span class="cstat-no" title="statement not covered" >        this.steps = steps; </span>             // Methodology checklist
&nbsp;
<span class="cstat-no" title="statement not covered" >        this.history = []; </span>              // Array of { action, result, summary }
<span class="cstat-no" title="statement not covered" >        this.consecutiveFailures = 0;</span>
<span class="cstat-no" title="statement not covered" >        this.lastVisionHash = null;</span>
<span class="cstat-no" title="statement not covered" >        this.stuckCounter = 0;</span>
&nbsp;
        // Step Tracking State
<span class="cstat-no" title="statement not covered" >        this.currentStep = steps.length &gt; 0 ? 1 : 0; </span> // Track actual current step
<span class="cstat-no" title="statement not covered" >        this.stepAttempts = 0; </span>           // How many turns on current step
<span class="cstat-no" title="statement not covered" >        this.maxStepAttempts = 5; </span>        // Max attempts per step before forcing advance
&nbsp;
        // Dependencies
<span class="cstat-no" title="statement not covered" >        this.interpreter = new VisionInterpreter();</span>
<span class="cstat-no" title="statement not covered" >        this.llmClient = new LocalClient(); </span>// Connects to Ollama
&nbsp;
<span class="cstat-no" title="statement not covered" >        logger.debug(`[${this.sessionId}] [Cortex] Initialized with goal: "${goal}"`);</span>
<span class="cstat-no" title="statement not covered" >        if (steps.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >            logger.debug(`[${this.sessionId}] [Cortex] Loaded ${steps.length} methodology steps`);</span>
<span class="cstat-no" title="statement not covered" >            logger.info(`[${this.sessionId}] [Cortex] ðŸ“‹ Starting at Step 1: ${steps[0]}`);</span>
        }
    }
&nbsp;
    /**
     * The Main "Think" Step.
     * Takes current vision/dom and returns the next Action.
     */
    async <span class="fstat-no" title="function not covered" >planNextStep(</span>visionPacket, semanticTree) {
        // 0. EARLY TERMINATION CHECK: If all steps completed, terminate immediately
        // This MUST happen before building the prompt to avoid undefined step content
<span class="cstat-no" title="statement not covered" >        if (this.steps.length &gt; 0 &amp;&amp; this.currentStep &gt; this.steps.length) {</span>
<span class="cstat-no" title="statement not covered" >            logger.success(`[${this.sessionId}] [Cortex] ðŸŽ‰ All ${this.steps.length} steps completed!`);</span>
<span class="cstat-no" title="statement not covered" >            return {</span>
                type: 'terminate',
                reason: `Successfully completed all ${this.steps.length} steps`,
                actions: [{
                    type: 'terminate',
                    reason: `Goal "${this.goal}" achieved - all steps completed`
                }]
            };
        }
&nbsp;
        // 0b. CHECK FOR TERMINATION STEP: If current step is a "DONE" marker, terminate
<span class="cstat-no" title="statement not covered" >        if (this.steps.length &gt; 0 &amp;&amp; this.currentStep &lt;= this.steps.length) {</span>
            const currentStepText = <span class="cstat-no" title="statement not covered" >this.steps[this.currentStep - 1].toLowerCase();</span>
            const terminationKeywords = <span class="cstat-no" title="statement not covered" >['done', 'complete', 'finish', 'end', 'terminate'];</span>
            const isTerminationStep = <span class="cstat-no" title="statement not covered" >terminationKeywords.some(<span class="fstat-no" title="function not covered" >kw </span>=&gt; <span class="cstat-no" title="statement not covered" >currentStepText.includes(kw))</span>;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            if (isTerminationStep) {</span>
<span class="cstat-no" title="statement not covered" >                logger.success(`[${this.sessionId}] [Cortex] ðŸ Reached termination step: "${this.steps[this.currentStep - 1]}"`);</span>
<span class="cstat-no" title="statement not covered" >                return {</span>
                    type: 'terminate',
                    reason: `Reached termination step (${this.currentStep}/${this.steps.length})`,
                    actions: [{
                        type: 'terminate',
                        reason: `Goal "${this.goal}" achieved - ${this.steps[this.currentStep - 1]}`
                    }]
                };
            }
        }
&nbsp;
        // 1. Check for Stuck State
<span class="cstat-no" title="statement not covered" >        this._checkStuckState(visionPacket);</span>
&nbsp;
        // 2. Build History Context (Pruned)
        const historyStr = <span class="cstat-no" title="statement not covered" >this._formatHistory();</span>
&nbsp;
        // 3. Construct Prompt
        const prompt = <span class="cstat-no" title="statement not covered" >this._buildPrompt(historyStr, semanticTree, visionPacket);</span>
&nbsp;
        // 4. Query LLM
<span class="cstat-no" title="statement not covered" >        logger.info(`[${this.sessionId}] [Cortex] Thinking...`);</span>
        const response = <span class="cstat-no" title="statement not covered" >await this.llmClient.sendRequest({</span>
            prompt: prompt,
            vision: visionPacket.base64,
            maxTokens: 2048,
            temperature: 0.1 // Low temperature for consistent, deterministic actions
        });
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (!response.success) {</span>
<span class="cstat-no" title="statement not covered" >            throw new Error(`Cortex Brain Freeze: ${response.error}`);</span>
        }
&nbsp;
        // 5. Parse
<span class="cstat-no" title="statement not covered" >        logger.debug(`[${this.sessionId}] [Cortex] Raw LLM Response: ${response.content.substring(0, 500)}...`);</span>
        const plan = <span class="cstat-no" title="statement not covered" >this.interpreter.parseResponse(response.content);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (!plan.success) {</span>
<span class="cstat-no" title="statement not covered" >            logger.warn(`[${this.sessionId}] [Cortex] Invalid thought format: ${plan.error}`);</span>
<span class="cstat-no" title="statement not covered" >            logger.debug(`[${this.sessionId}] [Cortex] Full response: ${response.content}`);</span>
            // Return recovery action with context
<span class="cstat-no" title="statement not covered" >            return {</span>
                type: 'wait',
                duration: 2000,
                description: `Parse Error: ${plan.error || 'Invalid JSON'}`
            };
        }
&nbsp;
        // Log the "Thought"
<span class="cstat-no" title="statement not covered" >        if (plan.data.thought) {</span>
<span class="cstat-no" title="statement not covered" >            logger.info(`[${this.sessionId}] ðŸ§  THOUGHT: ${plan.data.thought}`);</span>
        }
&nbsp;
        // 6. STEP VALIDATION &amp; ENFORCEMENT
<span class="cstat-no" title="statement not covered" >        if (this.steps.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >            this._validateAndEnforceStep(plan.data);</span>
&nbsp;
            // 7. AUTO-TERMINATE IF ALL STEPS COMPLETED
<span class="cstat-no" title="statement not covered" >            if (this.currentStep &gt; this.steps.length) {</span>
<span class="cstat-no" title="statement not covered" >                logger.success(`[${this.sessionId}] [Cortex] ðŸŽ‰ All ${this.steps.length} steps completed!`);</span>
<span class="cstat-no" title="statement not covered" >                return {</span>
                    type: 'terminate',
                    reason: `Successfully completed all ${this.steps.length} steps`,
                    actions: [{
                        type: 'terminate',
                        reason: `Goal "${this.goal}" achieved - all steps completed`
                    }]
                };
            }
        }
&nbsp;
        // Return the full plan data (includes all actions)
<span class="cstat-no" title="statement not covered" >        return plan.data;</span>
    }
&nbsp;
    /**
     * Record the result of an action.
     */
<span class="fstat-no" title="function not covered" >    recordResult(</span>action, success, message) {
<span class="cstat-no" title="statement not covered" >        this.history.push({</span>
            type: action.type,
            description: action.description,
            success: success,
            result: message,
            timestamp: Date.now()
        });
&nbsp;
        // Prune history if it exceeds max size
<span class="cstat-no" title="statement not covered" >        if (this.history.length &gt; MAX_HISTORY_SIZE) {</span>
<span class="cstat-no" title="statement not covered" >            this.history = this.history.slice(-MAX_HISTORY_SIZE);</span>
<span class="cstat-no" title="statement not covered" >            logger.debug(`[${this.sessionId}] [Cortex] History pruned to ${MAX_HISTORY_SIZE} entries`);</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (!success) {</span>
<span class="cstat-no" title="statement not covered" >            this.consecutiveFailures++;</span>
        } else {
<span class="cstat-no" title="statement not covered" >            this.consecutiveFailures = 0;</span>
            // Smart Step Completion Detection
<span class="cstat-no" title="statement not covered" >            this._detectStepCompletion(action);</span>
        }
    }
&nbsp;
    /**
     * Intelligently detect if the current step is complete based on action patterns.
     */
<span class="fstat-no" title="function not covered" >    _detectStepCompletion(</span>lastAction) {
<span class="cstat-no" title="statement not covered" >        if (this.currentStep &gt; this.steps.length) <span class="cstat-no" title="statement not covered" >return; </span></span>// Already past all steps
&nbsp;
        const currentStepDesc = <span class="cstat-no" title="statement not covered" >this.steps[this.currentStep - 1].toLowerCase();</span>
&nbsp;
        // Get recent successful actions (last 5)
        const recentActions = <span class="cstat-no" title="statement not covered" >this.history</span>
            .slice(-5)
            .filter(<span class="fstat-no" title="function not covered" >h </span>=&gt; <span class="cstat-no" title="statement not covered" >h.success)</span>
            .map(<span class="fstat-no" title="function not covered" >h </span>=&gt; <span class="cstat-no" title="statement not covered" >h.type)</span>;
&nbsp;
        // Detection patterns for common step types
        let shouldAdvance = <span class="cstat-no" title="statement not covered" >false;</span>
&nbsp;
        // Pattern 1: Navigation steps (e.g., "navigate to google.com")
<span class="cstat-no" title="statement not covered" >        if (currentStepDesc.includes('navigate') &amp;&amp; lastAction.type === 'navigate') {</span>
<span class="cstat-no" title="statement not covered" >            shouldAdvance = true;</span>
<span class="cstat-no" title="statement not covered" >            logger.debug(`[${this.sessionId}] [Cortex] ðŸ” Detected navigation completion`);</span>
        }
&nbsp;
        // Pattern 2: Search/Type steps (e.g., "search for X")
<span class="cstat-no" title="statement not covered" >        if (currentStepDesc.includes('search') &amp;&amp; recentActions.includes('press')) {</span>
            // Search typically involves: click â†’ type â†’ press Enter
<span class="cstat-no" title="statement not covered" >            if (recentActions.includes('type') &amp;&amp; recentActions.includes('click')) {</span>
<span class="cstat-no" title="statement not covered" >                shouldAdvance = true;</span>
<span class="cstat-no" title="statement not covered" >                logger.debug(`[${this.sessionId}] [Cortex] ðŸ” Detected search completion (clickâ†’typeâ†’press)`);</span>
            }
        }
&nbsp;
        // Pattern 3: Wait steps (e.g., "wait for X seconds")
<span class="cstat-no" title="statement not covered" >        if (currentStepDesc.includes('wait') &amp;&amp; lastAction.type === 'wait') {</span>
<span class="cstat-no" title="statement not covered" >            shouldAdvance = true;</span>
<span class="cstat-no" title="statement not covered" >            logger.debug(`[${this.sessionId}] [Cortex] ðŸ” Detected wait completion`);</span>
        }
&nbsp;
        // Pattern 4: Generic action completion - if step mentions specific action
        const actionVerbs = <span class="cstat-no" title="statement not covered" >['click', 'type', 'scroll', 'press'];</span>
<span class="cstat-no" title="statement not covered" >        for (const verb of actionVerbs) {</span>
<span class="cstat-no" title="statement not covered" >            if (currentStepDesc.includes(verb) &amp;&amp; lastAction.type === verb) {</span>
<span class="cstat-no" title="statement not covered" >                shouldAdvance = true;</span>
<span class="cstat-no" title="statement not covered" >                logger.debug(`[${this.sessionId}] [Cortex] ðŸ” Detected ${verb} action completion`);</span>
<span class="cstat-no" title="statement not covered" >                break;</span>
            }
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (shouldAdvance) {</span>
<span class="cstat-no" title="statement not covered" >            this.advanceStep();</span>
        }
    }
&nbsp;
    /**
     * Validate the LLM's reported step and enforce sequential progression.
     */
<span class="fstat-no" title="function not covered" >    _validateAndEnforceStep(</span>planData) {
        const reportedStep = <span class="cstat-no" title="statement not covered" >planData.currentStep || this.currentStep;</span>
&nbsp;
        // Always use the system's current step as the source of truth
<span class="cstat-no" title="statement not covered" >        planData.currentStep = this.currentStep;</span>
&nbsp;
        // Increment step attempts counter
<span class="cstat-no" title="statement not covered" >        this.stepAttempts++;</span>
&nbsp;
        // Log status
<span class="cstat-no" title="statement not covered" >        if (reportedStep !== this.currentStep) {</span>
<span class="cstat-no" title="statement not covered" >            logger.warn(`[${this.sessionId}] [Cortex] âš ï¸ LLM reported step ${reportedStep}, corrected to ${this.currentStep}`);</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        logger.info(`[${this.sessionId}] [Cortex] ðŸ“ Current Step: ${this.currentStep}/${this.steps.length} (Attempt ${this.stepAttempts}/${this.maxStepAttempts})`);</span>
&nbsp;
        // Force advancement if stuck too long on same step
<span class="cstat-no" title="statement not covered" >        if (this.stepAttempts &gt;= this.maxStepAttempts &amp;&amp; this.currentStep &lt;= this.steps.length) {</span>
<span class="cstat-no" title="statement not covered" >            logger.warn(`[${this.sessionId}] [Cortex] â­ï¸ Max attempts reached. Force advancing from step ${this.currentStep}`);</span>
<span class="cstat-no" title="statement not covered" >            this.advanceStep();</span>
<span class="cstat-no" title="statement not covered" >            planData.currentStep = this.currentStep;</span>
        }
&nbsp;
        // Display current step goal
<span class="cstat-no" title="statement not covered" >        if (this.currentStep &lt;= this.steps.length) {</span>
<span class="cstat-no" title="statement not covered" >            logger.info(`[${this.sessionId}] [Cortex] ðŸŽ¯ GOAL: "${this.steps[this.currentStep - 1]}"`);</span>
        } else {
<span class="cstat-no" title="statement not covered" >            logger.info(`[${this.sessionId}] [Cortex] ðŸ All steps completed!`);</span>
        }
    }
&nbsp;
    /**
     * Advance to the next step (called when current step is deemed complete).
     */
<span class="fstat-no" title="function not covered" >    advanceStep(</span>) {
<span class="cstat-no" title="statement not covered" >        if (this.currentStep &lt; this.steps.length) {</span>
<span class="cstat-no" title="statement not covered" >            this.currentStep++;</span>
<span class="cstat-no" title="statement not covered" >            this.stepAttempts = 0; </span>// Reset attempts for new step
<span class="cstat-no" title="statement not covered" >            logger.success(`[${this.sessionId}] [Cortex] âœ… Step ${this.currentStep - 1} completed!`);</span>
<span class="cstat-no" title="statement not covered" >            logger.info(`[${this.sessionId}] [Cortex] ðŸ“‹ Moving to Step ${this.currentStep}: ${this.steps[this.currentStep - 1]}`);</span>
        } else <span class="cstat-no" title="statement not covered" >if (this.currentStep === this.steps.length) {</span>
<span class="cstat-no" title="statement not covered" >            this.currentStep++;</span>
<span class="cstat-no" title="statement not covered" >            this.stepAttempts = 0;</span>
<span class="cstat-no" title="statement not covered" >            logger.success(`[${this.sessionId}] [Cortex] ðŸŽ‰ ALL STEPS COMPLETED! Ready to terminate.`);</span>
        }
    }
&nbsp;
    /**
     * Check if the agent is stuck (screen unchanged).
     * Uses MD5 hash of vision data for efficient comparison.
     */
<span class="fstat-no" title="function not covered" >    _checkStuckState(</span>visionPacket) {
        // Use a proper hash for vision comparison
        const currentHash = <span class="cstat-no" title="statement not covered" >crypto.createHash('md5')</span>
            .update(visionPacket.base64.substring(0, 1000)) // Hash first 1000 chars for speed
            .digest('hex');
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (this.lastVisionHash === currentHash) {</span>
<span class="cstat-no" title="statement not covered" >            this.stuckCounter++;</span>
        } else {
<span class="cstat-no" title="statement not covered" >            this.stuckCounter = 0;</span>
        }
<span class="cstat-no" title="statement not covered" >        this.lastVisionHash = currentHash;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (this.stuckCounter &gt;= STUCK_THRESHOLD) {</span>
<span class="cstat-no" title="statement not covered" >            logger.warn(`[${this.sessionId}] [Cortex] STUCK DETECTED (Screen unchanged for ${STUCK_THRESHOLD} steps).`);</span>
        }
    }
&nbsp;
    /**
     * Format history for prompt context.
     * Returns last N actions as a readable string.
     */
<span class="fstat-no" title="function not covered" >    _formatHistory(</span>) {
<span class="cstat-no" title="statement not covered" >        if (this.history.length === 0) <span class="cstat-no" title="statement not covered" >return "No previous actions.";</span></span>
&nbsp;
        const recent = <span class="cstat-no" title="statement not covered" >this.history.slice(-HISTORY_WINDOW);</span>
<span class="cstat-no" title="statement not covered" >        return recent.map(<span class="fstat-no" title="function not covered" >(h</span>, i) =&gt;</span>
<span class="cstat-no" title="statement not covered" >            `${i + 1}. Action: ${h.type} (${h.description}) â†’ Result: ${h.success ? 'Success' : 'Fail'} [${h.result}]`</span>
        ).join('\n');
    }
&nbsp;
    /**
     * Build the LLM prompt with all necessary context.
     */
<span class="fstat-no" title="function not covered" >    _buildPrompt(</span>history, semanticTree, visionPacket) {
        // 1. Context Status (Stuck/Failure Warnings)
        let contextStatus = <span class="cstat-no" title="statement not covered" >"";</span>
<span class="cstat-no" title="statement not covered" >        if (this.stuckCounter &gt;= STUCK_THRESHOLD) {</span>
<span class="cstat-no" title="statement not covered" >            contextStatus += `\nWARNING: You are STUCK. The screen has not changed for ${STUCK_THRESHOLD} turns. You MUST try a different approach or REFRESH.`;</span>
        }
<span class="cstat-no" title="statement not covered" >        if (this.consecutiveFailures &gt;= FAILURE_THRESHOLD) {</span>
<span class="cstat-no" title="statement not covered" >            contextStatus += `\nWARNING: Last ${FAILURE_THRESHOLD} actions FAILED. Critique your plan and try a different strategy.`;</span>
        }
&nbsp;
        // 2. URL Analysis (Anti-Hallucination)
        const currentUrl = <span class="cstat-no" title="statement not covered" >visionPacket?.metadata?.url || "unknown";</span>
<span class="cstat-no" title="statement not covered" >        logger.debug(`[${this.sessionId}] [Cortex] Current URL: ${currentUrl}`);</span>
&nbsp;
        let urlInfo = <span class="cstat-no" title="statement not covered" >`CURRENT URL: ${currentUrl}`;</span>
        let blankPageWarning = <span class="cstat-no" title="statement not covered" >"";</span>
        let mustNavigate = <span class="cstat-no" title="statement not covered" >false;</span>
&nbsp;
        // Detect blank states
<span class="cstat-no" title="statement not covered" >        if (currentUrl === 'about:blank' || currentUrl.includes('newtab') || currentUrl === 'data:,') {</span>
<span class="cstat-no" title="statement not covered" >            urlInfo += " (PAGE IS BLANK)";</span>
<span class="cstat-no" title="statement not covered" >            blankPageWarning = "\nâ”â”â” MANDATORY OVERRIDE â”â”â”\nTHE PAGE IS BLANK. YOU CANNOT SEE ANY CONTENT.\nYOUR FIRST ACTION **MUST** BE 'navigate'.\nIGNORE ANY VISUAL HALLUCINATIONS. THE SCREEN IS EMPTY.\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”";</span>
<span class="cstat-no" title="statement not covered" >            mustNavigate = true;</span>
        }
&nbsp;
        // 3. Methodology (Step-by-Step Guide)
        let methodology = <span class="cstat-no" title="statement not covered" >"";</span>
<span class="cstat-no" title="statement not covered" >        if (this.steps &amp;&amp; this.steps.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >            methodology = "METHODOLOGY (Sequence):\n";</span>
<span class="cstat-no" title="statement not covered" >            this.steps.forEach(<span class="fstat-no" title="function not covered" >(s</span>tep, i) =&gt; {</span>
<span class="cstat-no" title="statement not covered" >                methodology += `${i + 1}. ${step}\n`;</span>
            });
<span class="cstat-no" title="statement not covered" >            methodology += `\nTotal steps: ${this.steps.length}`;</span>
<span class="cstat-no" title="statement not covered" >            methodology += `\nWhen currentStep &gt; ${this.steps.length}, you have completed ALL steps. Output 'terminate' action.`;</span>
<span class="cstat-no" title="statement not covered" >            methodology += "\nAnalyze which step you are currently on based on History.";</span>
        }
&nbsp;
        // 4. System Rules
        const SYSTEM_RULES = <span class="cstat-no" title="statement not covered" >`SYSTEM RULES:</span>
1. You are a VISION-ONLY agent. You see the screen as a human does.
2. BLANK PAGE PROTOCOL: If URL is 'about:blank', your ONLY valid action is 'navigate'.
3. NO URL CRAFTING: Navigate to base URLs only (e.g. "https://google.com"). Use search boxes for queries.
4. COORDINATE-BASED INTERACTION: Analyze the screenshot visually and provide EXACT pixel coordinates (x, y) for where to click or type.
5. VISUAL ANALYSIS: Carefully identify the CENTER of buttons, input boxes, and links. Provide coordinates relative to the top-left of the viewport.
6. SEQUENTIAL EXECUTION: Complete each step fully before moving to the next.
7. TERMINATION: Only terminate when you see clear visual evidence that the GOAL is achieved.`;
&nbsp;
        // 5. Example override for blank pages
        // Calculate example coordinates based on actual viewport
        const viewport = <span class="cstat-no" title="statement not covered" >visionPacket?.metadata?.viewport || { width: 1280, height: 720 };</span>
        const searchBoxX = <span class="cstat-no" title="statement not covered" >Math.round(viewport.width * 0.5);</span>  // Center X
        const searchBoxY = <span class="cstat-no" title="statement not covered" >Math.round(viewport.height * 0.35);</span> // Upper-middle Y (typical for Google)
&nbsp;
        let responseExample = <span class="cstat-no" title="statement not covered" >`{</span>
  "analysis": "I see the Google search page. The viewport is ${viewport.width}x${viewport.height}. The search box appears to be in the center-top area of the screen.",
  "thought": "Based on the ${viewport.width}x${viewport.height} viewport, the search box center should be around x=${searchBoxX}, y=${searchBoxY}. I will click there, type 'blueberry', then press Enter.",
  "actions": [
    { "type": "click", "x": ${searchBoxX}, "y": ${searchBoxY}, "description": "Click search box" },
    { "type": "type", "text": "blueberry", "description": "Type query" },
    { "type": "press", "key": "Enter", "description": "Submit search" }
  ]
}`;
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (mustNavigate) {</span>
<span class="cstat-no" title="statement not covered" >            responseExample = `{</span>
  "analysis": "The page is completely blank (about:blank). I cannot see any content.",
  "thought": "I must navigate to the target URL before I can interact with any elements.",
  "actions": [
    { "type": "navigate", "url": "https://google.com", "description": "Navigate to Google" }
  ]
}`;
        }
&nbsp;
        // 6. Construct Prompt with strict step tracking
        // Only show step tracking if currentStep is within bounds (defensive check)
        const stepTracking = <span class="cstat-no" title="statement not covered" >(methodology &amp;&amp; this.currentStep &lt;= this.steps.length) ? `</span>
&nbsp;
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸŽ¯ YOUR CURRENT TASK (Step ${this.currentStep}/${this.steps.length}):
"${this.steps[this.currentStep - 1]}"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
&nbsp;
FOCUS: Complete THIS step only. Don't worry about other steps.
The system will automatically advance you when this step is done.
&nbsp;
All steps (for reference):
${this.steps.map(<span class="fstat-no" title="function not covered" >(s</span>, i) =&gt; <span class="cstat-no" title="statement not covered" >`${i + 1}. ${s}${i + 1 === this.currentStep ? ' â† YOU ARE HERE' : ''}`)</span>.join('\n')}
` : '';
&nbsp;
        // Get actual viewport dimensions for accurate coordinates
        const viewportInfo = <span class="cstat-no" title="statement not covered" >`Viewport size: ${viewport.width}x${viewport.height}`;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        return `You are an advanced autonomous agent.</span>
GOAL: "${this.goal}"
${urlInfo}
${blankPageWarning}
&nbsp;
${methodology}
${stepTracking}
&nbsp;
${SYSTEM_RULES}
&nbsp;
HISTORY (Past Actions):
${history}
&nbsp;
CURRENT STATE:
[Vision Only Mode - ${viewportInfo}]
${contextStatus}
&nbsp;
INSTRUCTIONS:
1. Check the CURRENT URL first. If it's 'about:blank', you MUST navigate before anything else.
2. VISUAL ANALYSIS: Study the screenshot carefully. Identify the pixel coordinates of interactive elements.
3. COORDINATE SYSTEM: The viewport is ${viewport.width}x${viewport.height}. Coordinates start at (0,0) in top-left.
4. For each action, provide EXACT coordinates (x, y) based on what you see in the screenshot.
5. Coordinates should be the CENTER of the element (button, input box, link).
6. Execute ONLY the current step. Complete it fully before moving to the next.
&nbsp;
VALID ACTIONS:
- navigate (url required) // Use this FIRST if page is blank
- click (x, y, description) // Click at exact pixel coordinates
- type (text, description) // Type text at current cursor position
- press (key, description) // Press a key (default: "Enter")
- scroll (direction: up/down)
- wait (duration ms)
- terminate (reason)
&nbsp;
RESPONSE FORMAT (JSON ONLY):
${responseExample}
`;
    }
}
&nbsp;
export default AgentCortex;
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-28T03:54:19.070Z
            </div>
        <script src="../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../sorter.js"></script>
        <script src="../block-navigation.js"></script>
    </body>
</html>
    